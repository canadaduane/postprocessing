{
  "version": 3,
  "sources": ["../src/core/Disposable.js", "../src/core/EffectComposer.js", "../src/passes/AdaptiveLuminancePass.js", "../src/materials/AdaptiveLuminanceMaterial.js", "../src/materials/BokehMaterial.js", "../src/materials/CircleOfConfusionMaterial.js", "../src/utils/getTextureDecoding.js", "../src/utils/orthographicDepthToViewZ.js", "../src/utils/viewZToOrthographicDepth.js", "../src/materials/KawaseBlurMaterial.js", "../src/enums/BlendFunction.js", "../src/enums/ColorChannel.js", "../src/enums/DepthCopyMode.js", "../src/enums/DepthTestStrategy.js", "../src/enums/EdgeDetectionMode.js", "../src/enums/EffectAttribute.js", "../src/enums/EffectShaderSection.js", "../src/enums/GlitchMode.js", "../src/enums/KernelSize.js", "../src/enums/LUTOperation.js", "../src/enums/MaskFunction.js", "../src/enums/PredicationMode.js", "../src/enums/SMAAPreset.js", "../src/enums/ToneMappingMode.js", "../src/enums/VignetteTechnique.js", "../src/enums/WebGLExtension.js", "../src/materials/CopyMaterial.js", "../src/materials/DepthComparisonMaterial.js", "../src/materials/DepthCopyMaterial.js", "../src/materials/DepthDownsamplingMaterial.js", "../src/materials/DepthMaskMaterial.js", "../src/materials/DownsamplingMaterial.js", "../src/materials/EdgeDetectionMaterial.js", "../src/materials/EffectMaterial.js", "../src/materials/GaussianBlurMaterial.js", "../src/materials/GodRaysMaterial.js", "../src/materials/LuminanceMaterial.js", "../src/materials/MaskMaterial.js", "../src/materials/OutlineMaterial.js", "../src/materials/SMAAWeightsMaterial.js", "../src/materials/SSAOMaterial.js", "../src/materials/UpsamplingMaterial.js", "../src/passes/CopyPass.js", "../src/passes/Pass.js", "../src/passes/ClearMaskPass.js", "../src/passes/ClearPass.js", "../src/passes/DepthPass.js", "../src/core/Resolution.js", "../src/core/OverrideMaterialManager.js", "../src/passes/RenderPass.js", "../src/passes/DepthDownsamplingPass.js", "../src/passes/DepthPickingPass.js", "../src/passes/DepthCopyPass.js", "../src/passes/EffectPass.js", "../src/passes/GaussianBlurPass.js", "../src/passes/KawaseBlurPass.js", "../src/passes/LambdaPass.js", "../src/passes/LuminancePass.js", "../src/passes/MaskPass.js", "../src/passes/MipmapBlurPass.js", "../src/passes/NormalPass.js", "../src/passes/ShaderPass.js", "../src/core/Timer.js", "../src/core/EffectShaderData.js", "../src/core/GaussKernel.js", "../src/core/Initializable.js", "../src/core/Resizable.js", "../src/core/Selection.js", "../src/effects/blending/BlendMode.js", "../src/effects/BloomEffect.js", "../src/effects/Effect.js", "../src/effects/BokehEffect.js", "../src/effects/BrightnessContrastEffect.js", "../src/effects/ColorAverageEffect.js", "../src/effects/ColorDepthEffect.js", "../src/effects/ChromaticAberrationEffect.js", "../src/effects/DepthEffect.js", "../src/effects/DepthOfFieldEffect.js", "../src/effects/DotScreenEffect.js", "../src/effects/FXAAEffect.js", "../src/effects/GammaCorrectionEffect.js", "../src/effects/GlitchEffect.js", "../src/textures/NoiseTexture.js", "../src/effects/GodRaysEffect.js", "../src/effects/GridEffect.js", "../src/effects/HueSaturationEffect.js", "../src/effects/LUT1DEffect.js", "../src/effects/LUT3DEffect.js", "../src/textures/lut/LookupTexture.js", "../src/textures/RawImageData.js", "../src/textures/lut/TetrahedralUpscaler.js", "../src/textures/smaa/SMAAAreaImageData.js", "../src/textures/smaa/SMAAImageGenerator.js", "../src/textures/smaa/SMAASearchImageData.js", "../src/effects/NoiseEffect.js", "../src/effects/OutlineEffect.js", "../src/effects/PixelationEffect.js", "../src/effects/RealisticBokehEffect.js", "../src/effects/ScanlineEffect.js", "../src/effects/ShockWaveEffect.js", "../src/effects/SelectiveBloomEffect.js", "../src/effects/SepiaEffect.js", "../src/effects/SMAAEffect.js", "../src/textures/smaa/searchImageDataURL.js", "../src/textures/smaa/areaImageDataURL.js", "../src/effects/SSAOEffect.js", "../src/effects/TextureEffect.js", "../src/effects/ToneMappingEffect.js", "../src/effects/VignetteEffect.js", "../src/loaders/LUT3dlLoader.js", "../src/loaders/LUTCubeLoader.js", "../src/loaders/SMAAImageLoader.js"],
  "sourcesContent": ["/**\n * The Disposable contract.\n *\n * Implemented by objects that can free internal resources.\n *\n * @interface\n */\n\nexport class Disposable {\n\n\t/**\n\t * Frees internal resources.\n\t */\n\n\tdispose() {}\n\n}\n", "import {\n\tDepthStencilFormat,\n\tDepthTexture,\n\tLinearFilter,\n\tREVISION,\n\tsRGBEncoding,\n\tUnsignedByteType,\n\tUnsignedIntType,\n\tUnsignedInt248Type,\n\tVector2,\n\tWebGLMultisampleRenderTarget,\n\tWebGLRenderTarget\n} from \"three\";\n\nimport { ClearMaskPass, CopyPass, MaskPass } from \"../passes\";\nimport { Timer } from \"./Timer\";\n\n/**\n * The EffectComposer may be used in place of a normal WebGLRenderer.\n *\n * The auto clear behaviour of the provided renderer will be disabled to prevent unnecessary clear operations.\n *\n * It is common practice to use a {@link RenderPass} as the first pass to automatically clear the buffers and render a\n * scene for further processing.\n *\n * @implements {Resizable}\n * @implements {Disposable}\n */\n\nexport class EffectComposer {\n\n\t/**\n\t * Constructs a new effect composer.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer that should be used.\n\t * @param {Object} [options] - The options.\n\t * @param {Boolean} [options.depthBuffer=true] - Whether the main render targets should have a depth buffer.\n\t * @param {Boolean} [options.stencilBuffer=false] - Whether the main render targets should have a stencil buffer.\n\t * @param {Boolean} [options.alpha] - Deprecated. Buffers are always RGBA since three r137.\n\t * @param {Number} [options.multisampling=0] - The number of samples used for multisample antialiasing. Requires WebGL 2.\n\t * @param {Number} [options.frameBufferType] - The type of the internal frame buffers. It's recommended to use HalfFloatType if possible.\n\t */\n\n\tconstructor(renderer = null, {\n\t\tdepthBuffer = true,\n\t\tstencilBuffer = false,\n\t\tmultisampling = 0,\n\t\tframeBufferType\n\t} = {}) {\n\n\t\t/**\n\t\t * The renderer.\n\t\t *\n\t\t * @type {WebGLRenderer}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderer = null;\n\n\t\t/**\n\t\t * The input buffer.\n\t\t *\n\t\t * Two identical buffers are used to avoid reading from and writing to the same render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.inputBuffer = this.createBuffer(depthBuffer, stencilBuffer, frameBufferType, multisampling);\n\n\t\t/**\n\t\t * The output buffer.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.outputBuffer = this.inputBuffer.clone();\n\n\t\t/**\n\t\t * A copy pass used for copying masked scenes.\n\t\t *\n\t\t * @type {CopyPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.copyPass = new CopyPass();\n\n\t\t/**\n\t\t * A depth texture.\n\t\t *\n\t\t * @type {DepthTexture}\n\t\t * @private\n\t\t */\n\n\t\tthis.depthTexture = null;\n\n\t\t/**\n\t\t * The passes.\n\t\t *\n\t\t * @type {Pass[]}\n\t\t * @private\n\t\t */\n\n\t\tthis.passes = [];\n\n\t\t/**\n\t\t * A timer.\n\t\t *\n\t\t * @type {Timer}\n\t\t * @private\n\t\t */\n\n\t\tthis.timer = new Timer();\n\n\t\t/**\n\t\t * Determines whether the last pass automatically renders to screen.\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\n\t\tthis.autoRenderToScreen = true;\n\n\t\tthis.setRenderer(renderer);\n\n\t}\n\n\t/**\n\t * The current amount of samples used for multisample anti-aliasing.\n\t *\n\t * @type {Number}\n\t */\n\n\tget multisampling() {\n\n\t\t// TODO Raise min three version to 138 and remove || 0.\n\t\treturn this.inputBuffer.samples || 0;\n\n\t}\n\n\t/**\n\t * Sets the amount of MSAA samples.\n\t *\n\t * Requires WebGL 2. Set to zero to disable multisampling.\n\t *\n\t * @type {Number}\n\t */\n\n\tset multisampling(value) {\n\n\t\tconst buffer = this.inputBuffer;\n\t\tconst multisampling = this.multisampling;\n\n\t\tif(multisampling > 0 && value > 0) {\n\n\t\t\tthis.inputBuffer.samples = value;\n\t\t\tthis.outputBuffer.samples = value;\n\t\t\tthis.inputBuffer.dispose();\n\t\t\tthis.outputBuffer.dispose();\n\n\t\t} else if(multisampling !== value) {\n\n\t\t\tthis.inputBuffer.dispose();\n\t\t\tthis.outputBuffer.dispose();\n\n\t\t\t// Enable or disable MSAA.\n\t\t\tthis.inputBuffer = this.createBuffer(\n\t\t\t\tbuffer.depthBuffer,\n\t\t\t\tbuffer.stencilBuffer,\n\t\t\t\tbuffer.texture.type,\n\t\t\t\tvalue\n\t\t\t);\n\n\t\t\tthis.inputBuffer.depthTexture = this.depthTexture;\n\t\t\tthis.outputBuffer = this.inputBuffer.clone();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the internal timer.\n\t *\n\t * @return {Timer} The timer.\n\t */\n\n\tgetTimer() {\n\n\t\treturn this.timer;\n\n\t}\n\n\t/**\n\t * Returns the renderer.\n\t *\n\t * @return {WebGLRenderer} The renderer.\n\t */\n\n\tgetRenderer() {\n\n\t\treturn this.renderer;\n\n\t}\n\n\t/**\n\t * Sets the renderer.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t */\n\n\tsetRenderer(renderer) {\n\n\t\tthis.renderer = renderer;\n\n\t\tif(renderer !== null) {\n\n\t\t\tconst size = renderer.getSize(new Vector2());\n\t\t\tconst alpha = renderer.getContext().getContextAttributes().alpha;\n\t\t\tconst frameBufferType = this.inputBuffer.texture.type;\n\n\t\t\tif(frameBufferType === UnsignedByteType && renderer.outputEncoding === sRGBEncoding) {\n\n\t\t\t\tthis.inputBuffer.texture.encoding = sRGBEncoding;\n\t\t\t\tthis.outputBuffer.texture.encoding = sRGBEncoding;\n\t\t\t\tthis.inputBuffer.dispose();\n\t\t\t\tthis.outputBuffer.dispose();\n\n\t\t\t}\n\n\t\t\trenderer.autoClear = false;\n\t\t\tthis.setSize(size.width, size.height);\n\n\t\t\tfor(const pass of this.passes) {\n\n\t\t\t\tpass.initialize(renderer, alpha, frameBufferType);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Replaces the current renderer with the given one.\n\t *\n\t * The auto clear mechanism of the provided renderer will be disabled. If the new render size differs from the\n\t * previous one, all passes will be updated.\n\t *\n\t * By default, the DOM element of the current renderer will automatically be removed from its parent node and the DOM\n\t * element of the new renderer will take its place.\n\t *\n\t * @deprecated Use setRenderer instead.\n\t * @param {WebGLRenderer} renderer - The new renderer.\n\t * @param {Boolean} updateDOM - Indicates whether the old canvas should be replaced by the new one in the DOM.\n\t * @return {WebGLRenderer} The old renderer.\n\t */\n\n\treplaceRenderer(renderer, updateDOM = true) {\n\n\t\tconst oldRenderer = this.renderer;\n\t\tconst parent = oldRenderer.domElement.parentNode;\n\n\t\tthis.setRenderer(renderer);\n\n\t\tif(updateDOM && parent !== null) {\n\n\t\t\tparent.removeChild(oldRenderer.domElement);\n\t\t\tparent.appendChild(renderer.domElement);\n\n\t\t}\n\n\t\treturn oldRenderer;\n\n\t}\n\n\t/**\n\t * Creates a depth texture attachment that will be provided to all passes.\n\t *\n\t * Note: When a shader reads from a depth texture and writes to a render target that uses the same depth texture\n\t * attachment, the depth information will be lost. This happens even if `depthWrite` is disabled.\n\t *\n\t * @private\n\t * @return {DepthTexture} The depth texture.\n\t */\n\n\tcreateDepthTexture() {\n\n\t\tconst depthTexture = this.depthTexture = new DepthTexture();\n\n\t\t// Hack: Make sure the input buffer uses the depth texture.\n\t\tthis.inputBuffer.depthTexture = depthTexture;\n\t\tthis.inputBuffer.dispose();\n\n\t\tif(this.inputBuffer.stencilBuffer) {\n\n\t\t\tdepthTexture.format = DepthStencilFormat;\n\t\t\tdepthTexture.type = UnsignedInt248Type;\n\n\t\t} else {\n\n\t\t\tdepthTexture.type = UnsignedIntType;\n\n\t\t}\n\n\t\treturn depthTexture;\n\n\t}\n\n\t/**\n\t * Deletes the current depth texture.\n\t *\n\t * @private\n\t */\n\n\tdeleteDepthTexture() {\n\n\t\tif(this.depthTexture !== null) {\n\n\t\t\tthis.depthTexture.dispose();\n\t\t\tthis.depthTexture = null;\n\n\t\t\t// Update the input buffer.\n\t\t\tthis.inputBuffer.depthTexture = null;\n\t\t\tthis.inputBuffer.dispose();\n\n\t\t\tfor(const pass of this.passes) {\n\n\t\t\t\tpass.setDepthTexture(null);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Creates a new render target.\n\t *\n\t * @deprecated Create buffers manually via WebGLRenderTarget instead.\n\t * @param {Boolean} depthBuffer - Whether the render target should have a depth buffer.\n\t * @param {Boolean} stencilBuffer - Whether the render target should have a stencil buffer.\n\t * @param {Number} type - The frame buffer type.\n\t * @param {Number} multisampling - The number of samples to use for antialiasing.\n\t * @return {WebGLRenderTarget} A new render target that equals the renderer's canvas.\n\t */\n\n\tcreateBuffer(depthBuffer, stencilBuffer, type, multisampling) {\n\n\t\tconst renderer = this.renderer;\n\t\tconst size = (renderer === null) ? new Vector2() : renderer.getDrawingBufferSize(new Vector2());\n\n\t\tconst options = {\n\t\t\tminFilter: LinearFilter,\n\t\t\tmagFilter: LinearFilter,\n\t\t\tstencilBuffer,\n\t\t\tdepthBuffer,\n\t\t\ttype\n\t\t};\n\n\t\tlet renderTarget;\n\n\t\tif(multisampling > 0) {\n\n\t\t\trenderTarget = (Number(REVISION.replace(/\\D+/g, \"\")) < 138) ?\n\t\t\t\tnew WebGLMultisampleRenderTarget(size.width, size.height, options) :\n\t\t\t\tnew WebGLRenderTarget(size.width, size.height, options);\n\n\t\t\trenderTarget.ignoreDepthForMultisampleCopy = false;\n\t\t\trenderTarget.samples = multisampling;\n\n\t\t} else {\n\n\t\t\trenderTarget = new WebGLRenderTarget(size.width, size.height, options);\n\n\t\t}\n\n\t\tif(type === UnsignedByteType && renderer !== null && renderer.outputEncoding === sRGBEncoding) {\n\n\t\t\trenderTarget.texture.encoding = sRGBEncoding;\n\n\t\t}\n\n\t\trenderTarget.texture.name = \"EffectComposer.Buffer\";\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\treturn renderTarget;\n\n\t}\n\n\t/**\n\t * Adds a pass, optionally at a specific index.\n\t *\n\t * @param {Pass} pass - A new pass.\n\t * @param {Number} [index] - An index at which the pass should be inserted.\n\t */\n\n\taddPass(pass, index) {\n\n\t\tconst passes = this.passes;\n\t\tconst renderer = this.renderer;\n\n\t\tconst drawingBufferSize = renderer.getDrawingBufferSize(new Vector2());\n\t\tconst alpha = renderer.getContext().getContextAttributes().alpha;\n\t\tconst frameBufferType = this.inputBuffer.texture.type;\n\n\t\tpass.setRenderer(renderer);\n\t\tpass.setSize(drawingBufferSize.width, drawingBufferSize.height);\n\t\tpass.initialize(renderer, alpha, frameBufferType);\n\n\t\tif(this.autoRenderToScreen) {\n\n\t\t\tif(passes.length > 0) {\n\n\t\t\t\tpasses[passes.length - 1].renderToScreen = false;\n\n\t\t\t}\n\n\t\t\tif(pass.renderToScreen) {\n\n\t\t\t\tthis.autoRenderToScreen = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif(index !== undefined) {\n\n\t\t\tpasses.splice(index, 0, pass);\n\n\t\t} else {\n\n\t\t\tpasses.push(pass);\n\n\t\t}\n\n\t\tif(this.autoRenderToScreen) {\n\n\t\t\tpasses[passes.length - 1].renderToScreen = true;\n\n\t\t}\n\n\t\tif(pass.needsDepthTexture || this.depthTexture !== null) {\n\n\t\t\tif(this.depthTexture === null) {\n\n\t\t\t\tconst depthTexture = this.createDepthTexture();\n\n\t\t\t\tfor(pass of passes) {\n\n\t\t\t\t\tpass.setDepthTexture(depthTexture);\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tpass.setDepthTexture(this.depthTexture);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Removes a pass.\n\t *\n\t * @param {Pass} pass - The pass.\n\t */\n\n\tremovePass(pass) {\n\n\t\tconst passes = this.passes;\n\t\tconst index = passes.indexOf(pass);\n\t\tconst exists = (index !== -1);\n\t\tconst removed = exists && (passes.splice(index, 1).length > 0);\n\n\t\tif(removed) {\n\n\t\t\tif(this.depthTexture !== null) {\n\n\t\t\t\t// Check if the depth texture is still required.\n\t\t\t\tconst reducer = (a, b) => (a || b.needsDepthTexture);\n\t\t\t\tconst depthTextureRequired = passes.reduce(reducer, false);\n\n\t\t\t\tif(!depthTextureRequired) {\n\n\t\t\t\t\tif(pass.getDepthTexture() === this.depthTexture) {\n\n\t\t\t\t\t\tpass.setDepthTexture(null);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.deleteDepthTexture();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif(this.autoRenderToScreen) {\n\n\t\t\t\t// Check if the removed pass was the last one.\n\t\t\t\tif(index === passes.length) {\n\n\t\t\t\t\tpass.renderToScreen = false;\n\n\t\t\t\t\tif(passes.length > 0) {\n\n\t\t\t\t\t\tpasses[passes.length - 1].renderToScreen = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Removes all passes.\n\t */\n\n\tremoveAllPasses() {\n\n\t\tconst passes = this.passes;\n\n\t\tthis.deleteDepthTexture();\n\n\t\tif(passes.length > 0) {\n\n\t\t\tif(this.autoRenderToScreen) {\n\n\t\t\t\tpasses[passes.length - 1].renderToScreen = false;\n\n\t\t\t}\n\n\t\t\tthis.passes = [];\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Renders all enabled passes in the order in which they were added.\n\t *\n\t * @param {Number} [deltaTime] - The time since the last frame in seconds.\n\t */\n\n\trender(deltaTime) {\n\n\t\tconst renderer = this.renderer;\n\t\tconst copyPass = this.copyPass;\n\n\t\tlet inputBuffer = this.inputBuffer;\n\t\tlet outputBuffer = this.outputBuffer;\n\n\t\tlet stencilTest = false;\n\t\tlet context, stencil, buffer;\n\n\t\tif(deltaTime === undefined) {\n\n\t\t\tdeltaTime = this.timer.update().getDelta();\n\n\t\t}\n\n\t\tfor(const pass of this.passes) {\n\n\t\t\tif(pass.enabled) {\n\n\t\t\t\tpass.render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest);\n\n\t\t\t\tif(pass.needsSwap) {\n\n\t\t\t\t\tif(stencilTest) {\n\n\t\t\t\t\t\tcopyPass.renderToScreen = pass.renderToScreen;\n\t\t\t\t\t\tcontext = renderer.getContext();\n\t\t\t\t\t\tstencil = renderer.state.buffers.stencil;\n\n\t\t\t\t\t\t// Preserve the unaffected pixels.\n\t\t\t\t\t\tstencil.setFunc(context.NOTEQUAL, 1, 0xffffffff);\n\t\t\t\t\t\tcopyPass.render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest);\n\t\t\t\t\t\tstencil.setFunc(context.EQUAL, 1, 0xffffffff);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbuffer = inputBuffer;\n\t\t\t\t\tinputBuffer = outputBuffer;\n\t\t\t\t\toutputBuffer = buffer;\n\n\t\t\t\t}\n\n\t\t\t\tif(pass instanceof MaskPass) {\n\n\t\t\t\t\tstencilTest = true;\n\n\t\t\t\t} else if(pass instanceof ClearMaskPass) {\n\n\t\t\t\t\tstencilTest = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets the size of the buffers, passes and the renderer.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t * @param {Boolean} [updateStyle] - Determines whether the style of the canvas should be updated.\n\t */\n\n\tsetSize(width, height, updateStyle) {\n\n\t\tconst renderer = this.renderer;\n\n\t\tif(width === undefined || height === undefined) {\n\n\t\t\tconst size = renderer.getSize(new Vector2());\n\t\t\twidth = size.width; height = size.height;\n\n\t\t}\n\n\t\t// Update the logical render size.\n\t\trenderer.setSize(width, height, updateStyle);\n\n\t\t// The drawing buffer size takes the device pixel ratio into account.\n\t\tconst drawingBufferSize = renderer.getDrawingBufferSize(new Vector2());\n\t\tthis.inputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\n\t\tthis.outputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\n\n\t\tfor(const pass of this.passes) {\n\n\t\t\tpass.setSize(drawingBufferSize.width, drawingBufferSize.height);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Resets this composer by deleting all passes and creating new buffers.\n\t */\n\n\treset() {\n\n\t\tconst autoReset = this.timer.isAutoResetEnabled();\n\t\tthis.dispose();\n\t\tthis.autoRenderToScreen = true;\n\t\tthis.timer.setAutoResetEnabled(autoReset);\n\n\t}\n\n\t/**\n\t * Disposes this composer and all passes.\n\t */\n\n\tdispose() {\n\n\t\tfor(const pass of this.passes) {\n\n\t\t\tpass.dispose();\n\n\t\t}\n\n\t\tthis.passes = [];\n\n\t\tif(this.inputBuffer !== null) {\n\n\t\t\tthis.inputBuffer.dispose();\n\n\t\t}\n\n\t\tif(this.outputBuffer !== null) {\n\n\t\t\tthis.outputBuffer.dispose();\n\n\t\t}\n\n\t\tthis.deleteDepthTexture();\n\t\tthis.copyPass.dispose();\n\t\tthis.timer.dispose();\n\n\t}\n\n}\n", "import { NearestFilter, WebGLRenderTarget } from \"three\";\nimport { AdaptiveLuminanceMaterial } from \"../materials\";\nimport { CopyPass } from \"./CopyPass\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A pass that renders an adaptive luminance map.\n */\n\nexport class AdaptiveLuminancePass extends Pass {\n\n\t/**\n\t * Constructs a new adaptive luminance pass.\n\t *\n\t * @param {Texture} luminanceBuffer - A buffer that contains the current scene luminance.\n\t * @param {Object} [options] - The options.\n\t * @param {Number} [options.minLuminance=0.01] - The minimum luminance.\n\t * @param {Number} [options.adaptationRate=1.0] - The luminance adaptation rate.\n\t */\n\n\tconstructor(luminanceBuffer, { minLuminance = 0.01, adaptationRate = 1.0 } = {}) {\n\n\t\tsuper(\"AdaptiveLuminancePass\");\n\n\t\tthis.fullscreenMaterial = new AdaptiveLuminanceMaterial();\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * A 1x1 render target that stores a copy of the last adapted luminance.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetPrevious = new WebGLRenderTarget(1, 1, {\n\t\t\tminFilter: NearestFilter,\n\t\t\tmagFilter: NearestFilter,\n\t\t\tdepthBuffer: false\n\t\t});\n\n\t\tthis.renderTargetPrevious.texture.name = \"Luminance.Previous\";\n\n\t\tconst material = this.fullscreenMaterial;\n\t\tmaterial.luminanceBuffer0 = this.renderTargetPrevious.texture;\n\t\tmaterial.luminanceBuffer1 = luminanceBuffer;\n\t\tmaterial.minLuminance = minLuminance;\n\t\tmaterial.adaptationRate = adaptationRate;\n\n\t\t/**\n\t\t * A 1x1 render target that stores the adapted average luminance.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetAdapted = this.renderTargetPrevious.clone();\n\t\tthis.renderTargetAdapted.texture.name = \"Luminance.Adapted\";\n\n\t\t/**\n\t\t * A save pass.\n\t\t *\n\t\t * @type {CopyPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.copyPass = new CopyPass(this.renderTargetPrevious, false);\n\n\t}\n\n\t/**\n\t * The adaptive luminance texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget texture() {\n\n\t\treturn this.renderTargetAdapted.texture;\n\n\t}\n\n\t/**\n\t * Returns the adaptive 1x1 luminance texture.\n\t *\n\t * @deprecated Use texture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetTexture() {\n\n\t\treturn this.renderTargetAdapted.texture;\n\n\t}\n\n\t/**\n\t * Sets the 1x1 mipmap level.\n\t *\n\t * This level is used to identify the smallest mipmap of the main luminance texture which contains the downsampled\n\t * average scene luminance.\n\t *\n\t * @type {Number}\n\t * @deprecated Use fullscreenMaterial.mipLevel1x1 instead.\n\t */\n\n\tset mipLevel1x1(value) {\n\n\t\tthis.fullscreenMaterial.mipLevel1x1 = value;\n\n\t}\n\n\t/**\n\t * The luminance adaptation rate.\n\t *\n\t * @type {Number}\n\t * @deprecated Use fullscreenMaterial.adaptationRate instead.\n\t */\n\n\tget adaptationRate() {\n\n\t\treturn this.fullscreenMaterial.adaptationRate;\n\n\t}\n\n\t/**\n\t * @type {Number}\n\t * @deprecated Use fullscreenMaterial.adaptationRate instead.\n\t */\n\n\tset adaptationRate(value) {\n\n\t\tthis.fullscreenMaterial.adaptationRate = value;\n\n\t}\n\n\t/**\n\t * Renders the scene normals.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\t// Use the frame delta time to chase after the current luminance.\n\t\tthis.fullscreenMaterial.deltaTime = deltaTime;\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : this.renderTargetAdapted);\n\t\trenderer.render(this.scene, this.camera);\n\n\t\t// Save the adapted luminance for the next frame.\n\t\tthis.copyPass.render(renderer, this.renderTargetAdapted);\n\n\t}\n\n}\n", "import { NoBlending, ShaderMaterial, Uniform } from \"three\";\n\nimport fragmentShader from \"./glsl/adaptive-luminance.frag\";\nimport vertexShader from \"./glsl/common.vert\";\n\n/**\n * An adaptive luminance shader material.\n */\n\nexport class AdaptiveLuminanceMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new adaptive luminance material.\n\t */\n\n\tconstructor() {\n\n\t\tsuper({\n\t\t\tname: \"AdaptiveLuminanceMaterial\",\n\t\t\tdefines: {\n\t\t\t\tMIP_LEVEL_1X1: \"0.0\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tluminanceBuffer0: new Uniform(null),\n\t\t\t\tluminanceBuffer1: new Uniform(null),\n\t\t\t\tminLuminance: new Uniform(0.01),\n\t\t\t\tdeltaTime: new Uniform(0.0),\n\t\t\t\ttau: new Uniform(1.0)\n\t\t\t},\n\t\t\textensions: {\n\t\t\t\tshaderTextureLOD: true\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t}\n\n\t/**\n\t * The primary luminance buffer that contains the downsampled average luminance.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset luminanceBuffer0(value) {\n\n\t\tthis.uniforms.luminanceBuffer0.value = value;\n\n\t}\n\n\t/**\n\t * Sets the primary luminance buffer that contains the downsampled average luminance.\n\t *\n\t * @deprecated Use luminanceBuffer0 instead.\n\t * @param {Texture} value - The buffer.\n\t */\n\n\tsetLuminanceBuffer0(value) {\n\n\t\tthis.uniforms.luminanceBuffer0.value = value;\n\n\t}\n\n\t/**\n\t * The secondary luminance buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset luminanceBuffer1(value) {\n\n\t\tthis.uniforms.luminanceBuffer1.value = value;\n\n\t}\n\n\t/**\n\t * Sets the secondary luminance buffer.\n\t *\n\t * @deprecated Use luminanceBuffer1 instead.\n\t * @param {Texture} value - The buffer.\n\t */\n\n\tsetLuminanceBuffer1(value) {\n\n\t\tthis.uniforms.luminanceBuffer1.value = value;\n\n\t}\n\n\t/**\n\t * The 1x1 mipmap level.\n\t *\n\t * This level is used to identify the smallest mipmap of the primary luminance buffer.\n\t *\n\t * @type {Number}\n\t */\n\n\tset mipLevel1x1(value) {\n\n\t\tthis.defines.MIP_LEVEL_1X1 = value.toFixed(1);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the 1x1 mipmap level.\n\t *\n\t * @deprecated Use mipLevel1x1 instead.\n\t * @param {Number} value - The level.\n\t */\n\n\tsetMipLevel1x1(value) {\n\n\t\tthis.mipLevel1x1 = value;\n\n\t}\n\n\t/**\n\t * The delta time.\n\t *\n\t * @type {Number}\n\t */\n\n\tset deltaTime(value) {\n\n\t\tthis.uniforms.deltaTime.value = value;\n\n\t}\n\n\t/**\n\t * Sets the delta time.\n\t *\n\t * @deprecated Use deltaTime instead.\n\t * @param {Number} value - The delta time.\n\t */\n\n\tsetDeltaTime(value) {\n\n\t\tthis.uniforms.deltaTime.value = value;\n\n\t}\n\n\t/**\n\t * The lowest possible luminance value.\n\t *\n\t * @type {Number}\n\t */\n\n\tget minLuminance() {\n\n\t\treturn this.uniforms.minLuminance.value;\n\n\t}\n\n\tset minLuminance(value) {\n\n\t\tthis.uniforms.minLuminance.value = value;\n\n\t}\n\n\t/**\n\t * Returns the lowest possible luminance value.\n\t *\n\t * @deprecated Use minLuminance instead.\n\t * @return {Number} The minimum luminance.\n\t */\n\n\tgetMinLuminance() {\n\n\t\treturn this.uniforms.minLuminance.value;\n\n\t}\n\n\t/**\n\t * Sets the minimum luminance.\n\t *\n\t * @deprecated Use minLuminance instead.\n\t * @param {Number} value - The minimum luminance.\n\t */\n\n\tsetMinLuminance(value) {\n\n\t\tthis.uniforms.minLuminance.value = value;\n\n\t}\n\n\t/**\n\t * The luminance adaptation rate.\n\t *\n\t * @type {Number}\n\t */\n\n\tget adaptationRate() {\n\n\t\treturn this.uniforms.tau.value;\n\n\t}\n\n\tset adaptationRate(value) {\n\n\t\tthis.uniforms.tau.value = value;\n\n\t}\n\n\t/**\n\t * Returns the luminance adaptation rate.\n\t *\n\t * @deprecated Use adaptationRate instead.\n\t * @return {Number} The adaptation rate.\n\t */\n\n\tgetAdaptationRate() {\n\n\t\treturn this.uniforms.tau.value;\n\n\t}\n\n\t/**\n\t * Sets the luminance adaptation rate.\n\t *\n\t * @deprecated Use adaptationRate instead.\n\t * @param {Number} value - The adaptation rate.\n\t */\n\n\tsetAdaptationRate(value) {\n\n\t\tthis.uniforms.tau.value = value;\n\n\t}\n\n}\n", "import { NoBlending, ShaderMaterial, Uniform, Vector2 } from \"three\";\n\nimport fragmentShader from \"./glsl/convolution.bokeh.frag\";\nimport vertexShader from \"./glsl/common.vert\";\n\n/**\n * A bokeh disc blur material.\n *\n * This material should be applied twice in a row, with `fill` mode enabled for the second pass. Enabling the\n * `foreground` option causes the shader to combine the near and far CoC values around foreground objects.\n *\n * @implements {Resizable}\n */\n\nexport class BokehMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new bokeh material.\n\t *\n\t * @param {Boolean} [fill=false] - Enables or disables the bokeh highlight fill mode.\n\t * @param {Boolean} [foreground=false] - Determines whether this material will be applied to foreground colors.\n\t */\n\n\tconstructor(fill = false, foreground = false) {\n\n\t\tsuper({\n\t\t\tname: \"BokehMaterial\",\n\t\t\tdefines: {\n\t\t\t\tPASS: fill ? \"2\" : \"1\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\tcocBuffer: new Uniform(null),\n\t\t\t\ttexelSize: new Uniform(new Vector2()),\n\t\t\t\tkernel64: new Uniform(null),\n\t\t\t\tkernel16: new Uniform(null),\n\t\t\t\tscale: new Uniform(new Vector2(1.0, 1.0))\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\tif(foreground) {\n\n\t\t\tthis.defines.FOREGROUND = \"1\";\n\n\t\t}\n\n\t\tthis.generateKernel();\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the input buffer.\n\t *\n\t * @deprecated Use inputBuffer instead.\n\t * @param {Texture} value - The buffer.\n\t */\n\n\tsetInputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The circle of confusion buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset cocBuffer(value) {\n\n\t\tthis.uniforms.cocBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the circle of confusion buffer.\n\t *\n\t * @deprecated Use cocBuffer instead.\n\t * @param {Texture} value - The buffer.\n\t */\n\n\tsetCoCBuffer(value) {\n\n\t\tthis.uniforms.cocBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The resolution scale.\n\t *\n\t * @type {Number}\n\t * @internal\n\t */\n\n\tset resolutionScale(value) {\n\n\t\tthis.uniforms.scale.value.x = value;\n\n\t}\n\n\t/**\n\t * The blur scale.\n\t *\n\t * @type {Number}\n\t */\n\n\tget scale() {\n\n\t\treturn this.uniforms.scale.value.y;\n\n\t}\n\n\tset scale(value) {\n\n\t\tthis.uniforms.scale.value.y = value;\n\n\t}\n\n\t/**\n\t * Returns the blur scale.\n\t *\n\t * @deprecated Use scale instead.\n\t * @return {Number} The scale.\n\t */\n\n\tgetScale(value) {\n\n\t\treturn this.scale;\n\n\t}\n\n\t/**\n\t * Sets the blur scale.\n\t *\n\t * @deprecated Use scale instead.\n\t * @param {Number} value - The scale.\n\t */\n\n\tsetScale(value) {\n\n\t\tthis.scale = value;\n\n\t}\n\n\t/**\n\t * Generates the blur kernel.\n\t *\n\t * @private\n\t */\n\n\tgenerateKernel() {\n\n\t\tconst GOLDEN_ANGLE = 2.39996323;\n\t\tconst points64 = new Float64Array(128);\n\t\tconst points16 = new Float64Array(32);\n\n\t\tlet i64 = 0, i16 = 0;\n\n\t\tfor(let i = 0, sqrt80 = Math.sqrt(80); i < 80; ++i) {\n\n\t\t\tconst theta = i * GOLDEN_ANGLE;\n\t\t\tconst r = Math.sqrt(i) / sqrt80;\n\t\t\tconst u = r * Math.cos(theta), v = r * Math.sin(theta);\n\n\t\t\tif(i % 5 === 0) {\n\n\t\t\t\tpoints16[i16++] = u;\n\t\t\t\tpoints16[i16++] = v;\n\n\t\t\t} else {\n\n\t\t\t\tpoints64[i64++] = u;\n\t\t\t\tpoints64[i64++] = v;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// The points are packed into vec4 instances to minimize the uniform count.\n\t\tthis.uniforms.kernel64.value = points64;\n\t\tthis.uniforms.kernel16.value = points16;\n\n\t}\n\n\t/**\n\t * Sets the texel size.\n\t *\n\t * @deprecated Use setSize() instead.\n\t * @param {Number} x - The texel width.\n\t * @param {Number} y - The texel height.\n\t */\n\n\tsetTexelSize(x, y) {\n\n\t\tthis.uniforms.texelSize.value.set(x, y);\n\n\t}\n\n\t/**\n\t * Sets the size of this object.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.uniforms.texelSize.value.set(1.0 / width, 1.0 / height);\n\n\t}\n\n}\n", "import { BasicDepthPacking, NoBlending, PerspectiveCamera, ShaderMaterial, Uniform } from \"three\";\nimport { orthographicDepthToViewZ, viewZToOrthographicDepth } from \"../utils\";\n\nimport fragmentShader from \"./glsl/circle-of-confusion.frag\";\nimport vertexShader from \"./glsl/common.vert\";\n\n/**\n * A Circle of Confusion shader material.\n */\n\nexport class CircleOfConfusionMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new CoC material.\n\t *\n\t * @param {Camera} camera - A camera.\n\t */\n\n\tconstructor(camera) {\n\n\t\tsuper({\n\t\t\tname: \"CircleOfConfusionMaterial\",\n\t\t\tdefines: {\n\t\t\t\tDEPTH_PACKING: \"0\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tdepthBuffer: new Uniform(null),\n\t\t\t\tfocusDistance: new Uniform(0.0),\n\t\t\t\tfocusRange: new Uniform(0.0),\n\t\t\t\tcameraNear: new Uniform(0.3),\n\t\t\t\tcameraFar: new Uniform(1000)\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\t// TODO Added for backward-compatibility.\n\t\tthis.uniforms.focalLength = this.uniforms.focusRange;\n\n\t\tthis.adoptCameraSettings(camera);\n\n\t}\n\n\t/**\n\t * The current near plane setting.\n\t *\n\t * @type {Number}\n\t * @private\n\t */\n\n\tget near() {\n\n\t\treturn this.uniforms.cameraNear.value;\n\n\t}\n\n\t/**\n\t * The current far plane setting.\n\t *\n\t * @type {Number}\n\t * @private\n\t */\n\n\tget far() {\n\n\t\treturn this.uniforms.cameraFar.value;\n\n\t}\n\n\t/**\n\t * The depth buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset depthBuffer(value) {\n\n\t\tthis.uniforms.depthBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The depth packing strategy.\n\t *\n\t * @type {DepthPackingStrategies}\n\t */\n\n\tset depthPacking(value) {\n\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the depth buffer.\n\t *\n\t * @deprecated Use depthBuffer and depthPacking instead.\n\t * @param {Texture} buffer - The depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing strategy.\n\t */\n\n\tsetDepthBuffer(buffer, depthPacking = BasicDepthPacking) {\n\n\t\tthis.depthBuffer = buffer;\n\t\tthis.depthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * The focus distance. Range: [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget focusDistance() {\n\n\t\treturn this.uniforms.focusDistance.value;\n\n\t}\n\n\tset focusDistance(value) {\n\n\t\tthis.uniforms.focusDistance.value = value;\n\n\t}\n\n\t/**\n\t * The focus distance in world units.\n\t *\n\t * @type {Number}\n\t */\n\n\tget worldFocusDistance() {\n\n\t\treturn -orthographicDepthToViewZ(this.focusDistance, this.near, this.far);\n\n\t}\n\n\tset worldFocusDistance(value) {\n\n\t\tthis.focusDistance = viewZToOrthographicDepth(-value, this.near, this.far);\n\n\t}\n\n\t/**\n\t * Returns the focus distance.\n\t *\n\t * @deprecated Use focusDistance instead.\n\t * @return {Number} The focus distance.\n\t */\n\n\tgetFocusDistance(value) {\n\n\t\tthis.uniforms.focusDistance.value = value;\n\n\t}\n\n\t/**\n\t * Sets the focus distance.\n\t *\n\t * @deprecated Use focusDistance instead.\n\t * @param {Number} value - The focus distance.\n\t */\n\n\tsetFocusDistance(value) {\n\n\t\tthis.uniforms.focusDistance.value = value;\n\n\t}\n\n\t/**\n\t * The focal length.\n\t *\n\t * @deprecated Renamed to focusRange.\n\t * @type {Number}\n\t */\n\n\tget focalLength() {\n\n\t\treturn this.focusRange;\n\n\t}\n\n\tset focalLength(value) {\n\n\t\tthis.focusRange = value;\n\n\t}\n\n\t/**\n\t * The focus range. Range: [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget focusRange() {\n\n\t\treturn this.uniforms.focusRange.value;\n\n\t}\n\n\tset focusRange(value) {\n\n\t\tthis.uniforms.focusRange.value = value;\n\n\t}\n\n\t/**\n\t * The focus range in world units.\n\t *\n\t * @type {Number}\n\t */\n\n\tget worldFocusRange() {\n\n\t\treturn -orthographicDepthToViewZ(this.focusRange, this.near, this.far);\n\n\t}\n\n\tset worldFocusRange(value) {\n\n\t\tthis.focusRange = viewZToOrthographicDepth(-value, this.near, this.far);\n\n\t}\n\n\t/**\n\t * Returns the focal length.\n\t *\n\t * @deprecated Use focusRange instead.\n\t * @return {Number} The focal length.\n\t */\n\n\tgetFocalLength(value) {\n\n\t\treturn this.focusRange;\n\n\t}\n\n\t/**\n\t * Sets the focal length.\n\t *\n\t * @deprecated Use focusRange instead.\n\t * @param {Number} value - The focal length.\n\t */\n\n\tsetFocalLength(value) {\n\n\t\tthis.focusRange = value;\n\n\t}\n\n\t/**\n\t * Adopts the settings of the given camera.\n\t *\n\t * @param {Camera} camera - A camera.\n\t */\n\n\tadoptCameraSettings(camera) {\n\n\t\tif(camera) {\n\n\t\t\tthis.uniforms.cameraNear.value = camera.near;\n\t\t\tthis.uniforms.cameraFar.value = camera.far;\n\n\t\t\tif(camera instanceof PerspectiveCamera) {\n\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\n\n\t\t\t} else {\n\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\n\n\t\t\t}\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n}\n", "import {\n\tLinearEncoding,\n\tREVISION,\n\tRGBAFormat,\n\tsRGBEncoding,\n\tUnsignedByteType\n} from \"three\";\n\n/**\n * Determines the texture inline decoding.\n *\n * @param {Texture} texture - A texture.\n * @param {Boolean} isWebGL2 - Whether the context is WebGL 2.\n * @return {String} The decoding.\n * @ignore\n */\n\nexport function getTextureDecoding(texture, isWebGL2) {\n\n\tlet decoding = \"texel\";\n\n\tif(texture !== null) {\n\n\t\t// Usage of SRGB8_ALPHA8 was introduced in three r133 and disabled temporarily in r135.\n\t\tconst revision = Number.parseInt(REVISION);\n\n\t\t// Disable inline decoding for sRGB textures in WebGL 2.\n\t\tconst sRGB8Alpha8 = (\n\t\t\tisWebGL2 &&\n\t\t\trevision >= 133 && revision !== 135 &&\n\t\t\ttexture.format === RGBAFormat &&\n\t\t\ttexture.type === UnsignedByteType &&\n\t\t\ttexture.encoding === sRGBEncoding\n\t\t);\n\n\t\tif(!sRGB8Alpha8) {\n\n\t\t\tswitch(texture.encoding) {\n\n\t\t\t\tcase sRGBEncoding:\n\t\t\t\t\tdecoding = \"sRGBToLinear(texel)\";\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase LinearEncoding:\n\t\t\t\t\tdecoding = \"texel\";\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(`Unsupported encoding: ${texture.encoding}`);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn decoding;\n\n}\n", "/**\n * Converts orthographic depth to view Z.\n *\n * @see https://github.com/mrdoob/three.js/blob/0de4e75ee65c3238957318b88ef91b6597e23c1e/src/renderers/shaders/ShaderChunk/packing.glsl.js#L42\n * @param {Number} depth - The linear clip Z.\n * @param {Number} near - The camera near plane.\n * @param {Number} far - The camera far plane.\n * @return {Number} The view Z.\n * @ignore\n */\n\nexport function orthographicDepthToViewZ(depth, near, far) {\n\n\treturn depth * (near - far) - near;\n\n}\n", "/**\n * Converts view Z to orthographic depth.\n *\n * @see https://github.com/mrdoob/three.js/blob/0de4e75ee65c3238957318b88ef91b6597e23c1e/src/renderers/shaders/ShaderChunk/packing.glsl.js#L39\n * @param {Number} viewZ - The view Z. Expected to be negative.\n * @param {Number} near - The camera near plane.\n * @param {Number} far - The camera far plane.\n * @return {Number} The depth.\n * @ignore\n */\n\nexport function viewZToOrthographicDepth(viewZ, near, far) {\n\n\treturn Math.min(Math.max((viewZ + near) / (near - far), 0.0), 1.0);\n\n}\n", "import { NoBlending, ShaderMaterial, Uniform, Vector2, Vector4 } from \"three\";\nimport { KernelSize } from \"../enums\";\n\nimport fragmentShader from \"./glsl/convolution.kawase.frag\";\nimport vertexShader from \"./glsl/convolution.kawase.vert\";\n\nconst kernelPresets = [\n\tnew Float32Array([0.0, 0.0]),\n\tnew Float32Array([0.0, 1.0, 1.0]),\n\tnew Float32Array([0.0, 1.0, 1.0, 2.0]),\n\tnew Float32Array([0.0, 1.0, 2.0, 2.0, 3.0]),\n\tnew Float32Array([0.0, 1.0, 2.0, 3.0, 4.0, 4.0, 5.0]),\n\tnew Float32Array([0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 7.0, 8.0, 9.0, 10.0])\n];\n\n/**\n * An optimized convolution shader material.\n *\n * References:\n *\n * Masaki Kawase, Bunkasha Games, GDC2003 Presentation: [Frame Buffer Postprocessing Effects in DOUBLE-S.T.E.A.L\n * (Wreckless)](http://genderi.org/frame-buffer-postprocessing-effects-in-double-s-t-e-a-l-wreckl.html)\n * Filip Strugar, Intel, 2014: [An investigation of fast real-time GPU-based image blur algorithms](\n * https://www.intel.com/content/www/us/en/developer/articles/technical/an-investigation-of-fast-real-time-gpu-based-image-blur-algorithms.html)\n *\n * Further modified according to Apple's [Best Practices for Shaders](https://goo.gl/lmRoM5).\n *\n * @todo Remove dithering code from fragment shader.\n * @implements {Resizable}\n */\n\nexport class KawaseBlurMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new convolution material.\n\t *\n\t * TODO Remove texelSize param.\n\t * @param {Vector4} [texelSize] - Deprecated.\n\t */\n\n\tconstructor(texelSize = new Vector4()) {\n\n\t\tsuper({\n\t\t\tname: \"KawaseBlurMaterial\",\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\ttexelSize: new Uniform(new Vector4()),\n\t\t\t\tscale: new Uniform(new Vector2(1.0, 1.0)),\n\t\t\t\tkernel: new Uniform(0.0)\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\tthis.setTexelSize(texelSize.x, texelSize.y);\n\n\t\t/**\n\t\t * The kernel size.\n\t\t *\n\t\t * @type {KernelSize}\n\t\t */\n\n\t\tthis.kernelSize = KernelSize.MEDIUM;\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the input buffer.\n\t *\n\t * @deprecated Use inputBuffer instead.\n\t * @param {Texture} value - The input buffer.\n\t */\n\n\tsetInputBuffer(value) {\n\n\t\tthis.inputBuffer = value;\n\n\t}\n\n\t/**\n\t * The kernel sequence for the current kernel size.\n\t *\n\t * @type {Float32Array}\n\t */\n\n\tget kernelSequence() {\n\n\t\treturn kernelPresets[this.kernelSize];\n\n\t}\n\n\t/**\n\t * The resolution scale.\n\t *\n\t * @type {Number}\n\t * @internal\n\t */\n\n\tset resolutionScale(value) {\n\n\t\tthis.uniforms.scale.value.x = value;\n\n\t}\n\n\t/**\n\t * The blur scale.\n\t *\n\t * @type {Number}\n\t */\n\n\tget scale() {\n\n\t\treturn this.uniforms.scale.value.y;\n\n\t}\n\n\tset scale(value) {\n\n\t\tthis.uniforms.scale.value.y = value;\n\n\t}\n\n\t/**\n\t * Returns the blur scale.\n\t *\n\t * @deprecated Use scale instead.\n\t * @return {Number} The scale.\n\t */\n\n\tgetScale() {\n\n\t\treturn this.uniforms.scale.value;\n\n\t}\n\n\t/**\n\t * Sets the blur scale.\n\t *\n\t * @deprecated Use scale instead.\n\t * @return {Number} value - The scale.\n\t */\n\n\tsetScale(value) {\n\n\t\tthis.uniforms.scale.value = value;\n\n\t}\n\n\t/**\n\t * Returns the kernel.\n\t *\n\t * @return {Float32Array} The kernel.\n\t * @deprecated Implementation detail, removed with no replacement.\n\t */\n\n\tgetKernel() {\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * The current kernel.\n\t *\n\t * @type {Number}\n\t */\n\n\tget kernel() {\n\n\t\treturn this.uniforms.kernel.value;\n\n\t}\n\n\tset kernel(value) {\n\n\t\tthis.uniforms.kernel.value = value;\n\n\t}\n\n\t/**\n\t * Sets the current kernel.\n\t *\n\t * @deprecated Use kernel instead.\n\t * @param {Number} value - The kernel.\n\t */\n\n\tsetKernel(value) {\n\n\t\tthis.kernel = value;\n\n\t}\n\n\t/**\n\t * Sets the texel size.\n\t *\n\t * @deprecated Use setSize() instead.\n\t * @param {Number} x - The texel width.\n\t * @param {Number} y - The texel height.\n\t */\n\n\tsetTexelSize(x, y) {\n\n\t\tthis.uniforms.texelSize.value.set(x, y, x * 0.5, y * 0.5);\n\n\t}\n\n\t/**\n\t * Sets the size of this object.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst x = 1.0 / width, y = 1.0 / height;\n\t\tthis.uniforms.texelSize.value.set(x, y, x * 0.5, y * 0.5);\n\n\t}\n\n}\n", "/**\n * A blend function enumeration.\n *\n * Important: Do not use `BlendFunction.SKIP` to disable effects. See\n * [Enabling and Disabling Effects](https://github.com/vanruesc/postprocessing/wiki/Enabling-and-Disabling-Effects)\n * for more information.\n *\n * Based on https://www.khronos.org/registry/OpenGL/extensions/NV/NV_blend_equation_advanced.txt\n *\n * @type {Object}\n * @property {Number} SKIP - Deprecated. Use DST instead. Warning: This blend function does NOT fully disable the effect.\n * @property {Number} SET - Deprecated. Use SRC instead.\n * @property {Number} ADD - Additive blending. Fast, but may produce washed out results.\n * @property {Number} ALPHA - Alpha blending. Blends based on the alpha value of the new color.\n * @property {Number} AVERAGE - Calculates the avarage of the new color and the base color.\n * @property {Number} COLOR - Converts the colors to HSL and blends based on color.\n * @property {Number} COLOR_BURN - Color burn.\n * @property {Number} COLOR_DODGE - Color dodge.\n * @property {Number} DARKEN - Prioritize darker colors.\n * @property {Number} DIFFERENCE - Color difference.\n * @property {Number} DIVIDE - Color division.\n * @property {Number} DST - Overwrites the new color with the base color. Ignores opacity.\n * @property {Number} EXCLUSION - Color exclusion.\n * @property {Number} HARD_LIGHT - Hard light.\n * @property {Number} HARD_MIX - Hard mix.\n * @property {Number} HUE - Converts the colors to HSL and blends based on hue.\n * @property {Number} INVERT - Overwrites the base color with the inverted new color.\n * @property {Number} INVERT_RGB - Multiplies the new color with the inverted base color.\n * @property {Number} LIGHTEN - Prioritize lighter colors.\n * @property {Number} LINEAR_BURN - Linear burn.\n * @property {Number} LINEAR_DODGE - Same as ADD but limits the result to 1.\n * @property {Number} LINEAR_LIGHT - Linear light.\n * @property {Number} LUMINOSITY - Converts the colors to HSL and blends based on luminosity.\n * @property {Number} MULTIPLY - Color multiplication.\n * @property {Number} NEGATION - Negates the base color using the new color.\n * @property {Number} NORMAL - Overwrites the base color with the new one.\n * @property {Number} OVERLAY - Color overlay.\n * @property {Number} PIN_LIGHT - Pin light.\n * @property {Number} REFLECT - Color reflection.\n * @property {Number} SCREEN - Screen blending. The two colors are effectively projected on a white screen simultaneously.\n * @property {Number} SRC - Overwrites the base color with the new one. Ignores opacity.\n * @property {Number} SATURATION - Converts the colors to HSL and blends based on saturation.\n * @property {Number} SOFT_LIGHT - Soft light.\n * @property {Number} SUBTRACT - Subtracts the new color from the base color.\n * @property {Number} VIVID_LIGHT - Vivid light.\n */\n\nexport const BlendFunction = {\n\tSKIP: 9,\n\tSET: 30,\n\tADD: 0,\n\tALPHA: 1,\n\tAVERAGE: 2,\n\tCOLOR: 3,\n\tCOLOR_BURN: 4,\n\tCOLOR_DODGE: 5,\n\tDARKEN: 6,\n\tDIFFERENCE: 7,\n\tDIVIDE: 8,\n\tDST: 9,\n\tEXCLUSION: 10,\n\tHARD_LIGHT: 11,\n\tHARD_MIX: 12,\n\tHUE: 13,\n\tINVERT: 14,\n\tINVERT_RGB: 15,\n\tLIGHTEN: 16,\n\tLINEAR_BURN: 17,\n\tLINEAR_DODGE: 18,\n\tLINEAR_LIGHT: 19,\n\tLUMINOSITY: 20,\n\tMULTIPLY: 21,\n\tNEGATION: 22,\n\tNORMAL: 23,\n\tOVERLAY: 24,\n\tPIN_LIGHT: 25,\n\tREFLECT: 26,\n\tSATURATION: 27,\n\tSCREEN: 28,\n\tSOFT_LIGHT: 29,\n\tSRC: 30,\n\tSUBTRACT: 31,\n\tVIVID_LIGHT: 32\n};\n", "/**\n * A color channel enumeration.\n *\n * @type {Object}\n * @property {Number} RED - Red.\n * @property {Number} GREEN - Green.\n * @property {Number} BLUE - Blue.\n * @property {Number} ALPHA - Alpha.\n */\n\nexport const ColorChannel = {\n\tRED: 0,\n\tGREEN: 1,\n\tBLUE: 2,\n\tALPHA: 3\n};\n", "/**\n * An enumeration of depth copy modes.\n *\n * @type {Object}\n * @property {Number} FULL - Copies the full depth texture every frame.\n * @property {Number} SINGLE - Copies a single texel from the depth texture on demand.\n */\n\nexport const DepthCopyMode = {\n\tFULL: 0,\n\tSINGLE: 1\n};\n", "/**\n * An enumeration of depth test strategies.\n *\n * @type {Object}\n * @property {Number} DEFAULT - Perform depth test only.\n * @property {Number} KEEP_MAX_DEPTH - Always keep max depth.\n * @property {Number} DISCARD_MAX_DEPTH - Always discard max depth.\n */\n\nexport const DepthTestStrategy = {\n\tDEFAULT: 0,\n\tKEEP_MAX_DEPTH: 1,\n\tDISCARD_MAX_DEPTH: 2\n};\n", "/**\n * An enumeration of edge detection modes.\n *\n * @type {Object}\n * @property {Number} DEPTH - Depth-based edge detection.\n * @property {Number} LUMA - Luminance-based edge detection.\n * @property {Number} COLOR - Chroma-based edge detection.\n */\n\nexport const EdgeDetectionMode = {\n\tDEPTH: 0,\n\tLUMA: 1,\n\tCOLOR: 2\n};\n", "/**\n * An enumeration of effect attributes.\n *\n * Attributes can be concatenated using the bitwise OR operator.\n *\n * @type {Object}\n * @property {Number} NONE - No attributes. Most effects don't need to specify any attributes.\n * @property {Number} DEPTH - Describes effects that require a depth texture.\n * @property {Number} CONVOLUTION - Describes effects that fetch additional samples from the input buffer. There cannot be more than one effect with this attribute per {@link EffectPass}.\n * @example const attributes = EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH;\n */\n\nexport const EffectAttribute = {\n\tNONE: 0,\n\tDEPTH: 1,\n\tCONVOLUTION: 2\n};\n", "\n/**\n * An enumeration of effect shader placeholders.\n *\n * @type {Object}\n * @property {String} FRAGMENT_HEAD - A placeholder for function and variable declarations in the fragment shader.\n * @property {String} FRAGMENT_MAIN_UV - A placeholder for UV transformations in the fragment shader.\n * @property {String} FRAGMENT_MAIN_IMAGE - A placeholder for color calculations in the fragment shader.\n * @property {String} VERTEX_HEAD - A placeholder for function and variable declarations in the vertex shader.\n * @property {String} VERTEX_MAIN_SUPPORT - A placeholder for supporting calculations in the vertex shader.\n */\n\nexport const EffectShaderSection = {\n\tFRAGMENT_HEAD: \"FRAGMENT_HEAD\",\n\tFRAGMENT_MAIN_UV: \"FRAGMENT_MAIN_UV\",\n\tFRAGMENT_MAIN_IMAGE: \"FRAGMENT_MAIN_IMAGE\",\n\tVERTEX_HEAD: \"VERTEX_HEAD\",\n\tVERTEX_MAIN_SUPPORT: \"VERTEX_MAIN_SUPPORT\"\n};\n", "/**\n * A glitch mode enumeration.\n *\n * @type {Object}\n * @property {Number} DISABLED - No glitches.\n * @property {Number} SPORADIC - Sporadic glitches.\n * @property {Number} CONSTANT_MILD - Constant mild glitches.\n * @property {Number} CONSTANT_WILD - Constant wild glitches.\n */\n\nexport const GlitchMode = {\n\tDISABLED: 0,\n\tSPORADIC: 1,\n\tCONSTANT_MILD: 2,\n\tCONSTANT_WILD: 3\n};\n", "/**\n * An enumeration of blur kernel sizes.\n *\n * @type {Object}\n * @property {Number} VERY_SMALL - A very small kernel that matches a 7x7 Gaussian blur kernel.\n * @property {Number} SMALL - A small kernel that matches a 25x25 Gaussian blur kernel.\n * @property {Number} MEDIUM - A medium sized kernel that matches a 63x63 Gaussian blur kernel.\n * @property {Number} LARGE - A large kernel that matches a 127x127 Gaussian blur kernel.\n * @property {Number} VERY_LARGE - A very large kernel that matches a 391x391 Gaussian blur kernel.\n * @property {Number} HUGE - A huge kernel that cannot be replicated with a single Gaussian blur pass.\n */\n\nexport const KernelSize = {\n\tVERY_SMALL: 0,\n\tSMALL: 1,\n\tMEDIUM: 2,\n\tLARGE: 3,\n\tVERY_LARGE: 4,\n\tHUGE: 5\n};\n", "/**\n * An enumeration of LUT worker operations.\n *\n * @type {Object}\n * @property {String} SCALE_UP - Tetrahedral upscale operation.\n */\n\nexport const LUTOperation = {\n\tSCALE_UP: \"lut.scaleup\"\n};\n", "/**\n * A mask function enumeration.\n *\n * @type {Object}\n * @property {Number} DISCARD - Discards elements when the respective mask value is zero.\n * @property {Number} MULTIPLY - Multiplies the input buffer with the mask texture.\n * @property {Number} MULTIPLY_RGB_SET_ALPHA - Multiplies the input RGB values with the mask and sets alpha to the mask value.\n */\n\nexport const MaskFunction = {\n\tDISCARD: 0,\n\tMULTIPLY: 1,\n\tMULTIPLY_RGB_SET_ALPHA: 2\n};\n", "/**\n * An enumeration of SMAA predication modes.\n *\n * @type {Object}\n * @property {Number} DISABLED - No predicated thresholding.\n * @property {Number} DEPTH - Depth-based predicated thresholding.\n * @property {Number} CUSTOM - Predicated thresholding using a custom buffer.\n */\n\nexport const PredicationMode = {\n\tDISABLED: 0,\n\tDEPTH: 1,\n\tCUSTOM: 2\n};\n", "/**\n * An enumeration of SMAA presets.\n *\n * @type {Object}\n * @property {Number} LOW - Results in around 60% of the maximum quality.\n * @property {Number} MEDIUM - Results in around 80% of the maximum quality.\n * @property {Number} HIGH - Results in around 95% of the maximum quality.\n * @property {Number} ULTRA - Results in around 99% of the maximum quality.\n */\n\nexport const SMAAPreset = {\n\tLOW: 0,\n\tMEDIUM: 1,\n\tHIGH: 2,\n\tULTRA: 3\n};\n", "/**\n * A tone mapping mode enumeration.\n *\n * @type {Object}\n * @property {Number} REINHARD - Simple Reinhard tone mapping.\n * @property {Number} REINHARD2 - Modified Reinhard tone mapping.\n * @property {Number} REINHARD2_ADAPTIVE - Simulates the optic nerve responding to the amount of light it is receiving.\n * @property {Number} OPTIMIZED_CINEON - Optimized filmic operator by Jim Hejl and Richard Burgess-Dawson.\n * @property {Number} ACES_FILMIC - ACES tone mapping with a scale of 1.0/0.6.\n */\n\nexport const ToneMappingMode = {\n\tREINHARD: 0,\n\tREINHARD2: 1,\n\tREINHARD2_ADAPTIVE: 2,\n\tOPTIMIZED_CINEON: 3,\n\tACES_FILMIC: 4\n};\n", "/**\n * An enumeration of Vignette techniques.\n *\n * @type {Object}\n * @property {Number} DEFAULT - Produces a dusty look.\n * @property {Number} ESKIL - Produces a burned look.\n */\n\nexport const VignetteTechnique = {\n\tDEFAULT: 0,\n\tESKIL: 1\n};\n", "/**\n * An enumeration of WebGL extensions.\n *\n * @type {Object}\n * @property {String} DERIVATIVES - Enables derivatives by adding the functions dFdx, dFdy and fwidth.\n * @property {String} FRAG_DEPTH - Enables gl_FragDepthEXT to set a depth value of a fragment from within the fragment shader.\n * @property {String} DRAW_BUFFERS - Enables multiple render targets (MRT) support.\n * @property {String} SHADER_TEXTURE_LOD - Enables explicit control of texture LOD.\n */\n\nexport const WebGLExtension = {\n\tDERIVATIVES: \"derivatives\",\n\tFRAG_DEPTH: \"fragDepth\",\n\tDRAW_BUFFERS: \"drawBuffers\",\n\tSHADER_TEXTURE_LOD: \"shaderTextureLOD\"\n};\n", "import { NoBlending, ShaderMaterial, Uniform } from \"three\";\n\nimport fragmentShader from \"./glsl/copy.frag\";\nimport vertexShader from \"./glsl/common.vert\";\n\n/**\n * A simple copy shader material.\n */\n\nexport class CopyMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new copy material.\n\t */\n\n\tconstructor() {\n\n\t\tsuper({\n\t\t\tname: \"CopyMaterial\",\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\topacity: new Uniform(1.0)\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the input buffer.\n\t *\n\t * @deprecated Use inputBuffer instead.\n\t * @param {Number} value - The buffer.\n\t */\n\n\tsetInputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Returns the opacity.\n\t *\n\t * @deprecated Use opacity instead.\n\t * @return {Number} The opacity.\n\t */\n\n\tgetOpacity(value) {\n\n\t\treturn this.uniforms.opacity.value;\n\n\t}\n\n\t/**\n\t * Sets the opacity.\n\t *\n\t * @deprecated Use opacity instead.\n\t * @param {Number} value - The opacity.\n\t */\n\n\tsetOpacity(value) {\n\n\t\tthis.uniforms.opacity.value = value;\n\n\t}\n\n}\n", "import { NoBlending, PerspectiveCamera, RGBADepthPacking, ShaderMaterial, Uniform } from \"three\";\n\nimport fragmentShader from \"./glsl/depth-comparison.frag\";\nimport vertexShader from \"./glsl/depth-comparison.vert\";\n\n/**\n * A depth comparison shader material.\n */\n\nexport class DepthComparisonMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new depth comparison material.\n\t *\n\t * @param {Texture} [depthTexture=null] - A depth texture.\n\t * @param {PerspectiveCamera} [camera] - A camera.\n\t */\n\n\tconstructor(depthTexture = null, camera) {\n\n\t\tsuper({\n\t\t\tname: \"DepthComparisonMaterial\",\n\t\t\tdefines: {\n\t\t\t\tDEPTH_PACKING: \"0\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tdepthBuffer: new Uniform(null),\n\t\t\t\tcameraNear: new Uniform(0.3),\n\t\t\t\tcameraFar: new Uniform(1000)\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\tthis.depthBuffer = depthTexture;\n\t\tthis.depthPacking = RGBADepthPacking;\n\t\tthis.adoptCameraSettings(camera);\n\n\t}\n\n\t/**\n\t * The depth buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset depthBuffer(value) {\n\n\t\tthis.uniforms.depthBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The depth packing strategy.\n\t *\n\t * @type {DepthPackingStrategies}\n\t */\n\n\tset depthPacking(value) {\n\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the depth buffer.\n\t *\n\t * @deprecated Use depthBuffer and depthPacking instead.\n\t * @param {Texture} buffer - The depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=RGBADepthPacking] - The depth packing strategy.\n\t */\n\n\tsetDepthBuffer(buffer, depthPacking = RGBADepthPacking) {\n\n\t\tthis.depthBuffer = buffer;\n\t\tthis.depthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * Adopts the settings of the given camera.\n\t *\n\t * @param {Camera} camera - A camera.\n\t */\n\n\tadoptCameraSettings(camera) {\n\n\t\tif(camera) {\n\n\t\t\tthis.uniforms.cameraNear.value = camera.near;\n\t\t\tthis.uniforms.cameraFar.value = camera.far;\n\n\t\t\tif(camera instanceof PerspectiveCamera) {\n\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\n\n\t\t\t} else {\n\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\n\n\t\t\t}\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n}\n", "import { BasicDepthPacking, NoBlending, ShaderMaterial, Uniform, Vector2 } from \"three\";\nimport { DepthCopyMode } from \"../enums\";\n\nimport fragmentShader from \"./glsl/depth-copy.frag\";\nimport vertexShader from \"./glsl/depth-copy.vert\";\n\n/**\n * A depth copy shader material.\n */\n\nexport class DepthCopyMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new depth copy material.\n\t */\n\n\tconstructor() {\n\n\t\tsuper({\n\t\t\tname: \"DepthCopyMaterial\",\n\t\t\tdefines: {\n\t\t\t\tINPUT_DEPTH_PACKING: \"0\",\n\t\t\t\tOUTPUT_DEPTH_PACKING: \"0\",\n\t\t\t\tDEPTH_COPY_MODE: \"0\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tdepthBuffer: new Uniform(null),\n\t\t\t\ttexelPosition: new Uniform(new Vector2())\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\t/**\n\t\t * The current depth copy mode.\n\t\t *\n\t\t * @type {DepthCopyMode}\n\t\t * @private\n\t\t */\n\n\t\tthis.depthCopyMode = DepthCopyMode.FULL;\n\n\t}\n\n\t/**\n\t * The input depth buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset depthBuffer(value) {\n\n\t\tthis.uniforms.depthBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The input depth packing strategy.\n\t *\n\t * @type {DepthPackingStrategies}\n\t */\n\n\tset inputDepthPacking(value) {\n\n\t\tthis.defines.INPUT_DEPTH_PACKING = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * The output depth packing strategy.\n\t *\n\t * @type {DepthPackingStrategies}\n\t */\n\n\tget outputDepthPacking() {\n\n\t\treturn Number(this.defines.OUTPUT_DEPTH_PACKING);\n\n\t}\n\n\tset outputDepthPacking(value) {\n\n\t\tthis.defines.OUTPUT_DEPTH_PACKING = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the input depth buffer.\n\t *\n\t * @deprecated Use depthBuffer and inputDepthPacking instead.\n\t * @param {Texture} buffer - The depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing strategy.\n\t */\n\n\tsetDepthBuffer(buffer, depthPacking = BasicDepthPacking) {\n\n\t\tthis.depthBuffer = buffer;\n\t\tthis.inputDepthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * Returns the current input depth packing strategy.\n\t *\n\t * @deprecated\n\t * @return {DepthPackingStrategies} The input depth packing strategy.\n\t */\n\n\tgetInputDepthPacking() {\n\n\t\treturn Number(this.defines.INPUT_DEPTH_PACKING);\n\n\t}\n\n\t/**\n\t * Sets the input depth packing strategy.\n\t *\n\t * @deprecated Use inputDepthPacking instead.\n\t * @param {DepthPackingStrategies} value - The new input depth packing strategy.\n\t */\n\n\tsetInputDepthPacking(value) {\n\n\t\tthis.defines.INPUT_DEPTH_PACKING = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the current output depth packing strategy.\n\t *\n\t * @deprecated Use outputDepthPacking instead.\n\t * @return {DepthPackingStrategies} The output depth packing strategy.\n\t */\n\n\tgetOutputDepthPacking() {\n\n\t\treturn Number(this.defines.OUTPUT_DEPTH_PACKING);\n\n\t}\n\n\t/**\n\t * Sets the output depth packing strategy.\n\t *\n\t * @deprecated Use outputDepthPacking instead.\n\t * @param {DepthPackingStrategies} value - The new output depth packing strategy.\n\t */\n\n\tsetOutputDepthPacking(value) {\n\n\t\tthis.defines.OUTPUT_DEPTH_PACKING = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * The screen space position used for single-texel copy operations.\n\t *\n\t * @type {Vector2}\n\t */\n\n\tget texelPosition() {\n\n\t\treturn this.uniforms.texelPosition.value;\n\n\t}\n\n\t/**\n\t * Returns the screen space position used for single-texel copy operations.\n\t *\n\t * @deprecated Use texelPosition instead.\n\t * @return {Vector2} The position.\n\t */\n\n\tgetTexelPosition() {\n\n\t\treturn this.uniforms.texelPosition.value;\n\n\t}\n\n\t/**\n\t * Sets the screen space position used for single-texel copy operations.\n\t *\n\t * @deprecated\n\t * @param {Vector2} value - The position.\n\t */\n\n\tsetTexelPosition(value) {\n\n\t\tthis.uniforms.texelPosition.value = value;\n\n\t}\n\n\t/**\n\t * The depth copy mode.\n\t *\n\t * @type {DepthCopyMode}\n\t */\n\n\tget mode() {\n\n\t\treturn this.depthCopyMode;\n\n\t}\n\n\tset mode(value) {\n\n\t\tthis.depthCopyMode = value;\n\t\tthis.defines.DEPTH_COPY_MODE = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the depth copy mode.\n\t *\n\t * @deprecated Use mode instead.\n\t * @return {DepthCopyMode} The depth copy mode.\n\t */\n\n\tgetMode() {\n\n\t\treturn this.mode;\n\n\t}\n\n\t/**\n\t * Sets the depth copy mode.\n\t *\n\t * @deprecated Use mode instead.\n\t * @param {DepthCopyMode} value - The new mode.\n\t */\n\n\tsetMode(value) {\n\n\t\tthis.mode = value;\n\n\t}\n\n}\n", "import { BasicDepthPacking, NoBlending, ShaderMaterial, Uniform, Vector2 } from \"three\";\n\nimport fragmentShader from \"./glsl/depth-downsampling.frag\";\nimport vertexShader from \"./glsl/depth-downsampling.vert\";\n\n/**\n * A depth downsampling shader material.\n *\n * Based on an article by Eleni Maria Stea:\n * https://eleni.mutantstargoat.com/hikiko/depth-aware-upsampling-6\n *\n * @implements {Resizable}\n */\n\nexport class DepthDownsamplingMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new depth downsampling material.\n\t */\n\n\tconstructor() {\n\n\t\tsuper({\n\t\t\tname: \"DepthDownsamplingMaterial\",\n\t\t\tdefines: {\n\t\t\t\tDEPTH_PACKING: \"0\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tdepthBuffer: new Uniform(null),\n\t\t\t\tnormalBuffer: new Uniform(null),\n\t\t\t\ttexelSize: new Uniform(new Vector2())\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t}\n\n\t/**\n\t * The depth buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset depthBuffer(value) {\n\n\t\tthis.uniforms.depthBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The depth packing strategy.\n\t *\n\t * @type {DepthPackingStrategies}\n\t */\n\n\tset depthPacking(value) {\n\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the depth buffer.\n\t *\n\t * @deprecated Use depthBuffer and depthPacking instead.\n\t * @param {Texture} buffer - The depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing strategy.\n\t */\n\n\tsetDepthBuffer(buffer, depthPacking = BasicDepthPacking) {\n\n\t\tthis.depthBuffer = buffer;\n\t\tthis.depthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * The normal buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset normalBuffer(value) {\n\n\t\tthis.uniforms.normalBuffer.value = value;\n\n\t\tif(value !== null) {\n\n\t\t\tthis.defines.DOWNSAMPLE_NORMALS = \"1\";\n\n\t\t} else {\n\n\t\t\tdelete this.defines.DOWNSAMPLE_NORMALS;\n\n\t\t}\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the normal buffer.\n\t *\n\t * @deprecated Use normalBuffer instead.\n\t * @param {Texture} value - The normal buffer.\n\t */\n\n\tsetNormalBuffer(value) {\n\n\t\tthis.normalBuffer = value;\n\n\t}\n\n\t/**\n\t * Sets the texel size.\n\t *\n\t * @deprecated Use setSize() instead.\n\t * @param {Number} x - The texel width.\n\t * @param {Number} y - The texel height.\n\t */\n\n\tsetTexelSize(x, y) {\n\n\t\tthis.uniforms.texelSize.value.set(x, y);\n\n\t}\n\n\t/**\n\t * Sets the size of this object.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.uniforms.texelSize.value.set(1.0 / width, 1.0 / height);\n\n\t}\n\n}\n", "import {\n\tAlwaysDepth,\n\tBasicDepthPacking,\n\tEqualDepth,\n\tGreaterDepth,\n\tGreaterEqualDepth,\n\tLessDepth,\n\tLessEqualDepth,\n\tNeverDepth,\n\tNoBlending,\n\tNotEqualDepth,\n\tPerspectiveCamera,\n\tShaderMaterial,\n\tUniform,\n\tVector2\n} from \"three\";\n\nimport { DepthTestStrategy } from \"../enums\";\n\nimport fragmentShader from \"./glsl/depth-mask.frag\";\nimport vertexShader from \"./glsl/common.vert\";\n\n/**\n * A depth mask shader material.\n *\n * This material masks a color buffer by comparing two depth textures.\n */\n\nexport class DepthMaskMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new depth mask material.\n\t */\n\n\tconstructor() {\n\n\t\tsuper({\n\t\t\tname: \"DepthMaskMaterial\",\n\t\t\tdefines: {\n\t\t\t\tDEPTH_EPSILON: \"0.0001\",\n\t\t\t\tDEPTH_PACKING_0: \"0\",\n\t\t\t\tDEPTH_PACKING_1: \"0\",\n\t\t\t\tDEPTH_TEST_STRATEGY: DepthTestStrategy.KEEP_MAX_DEPTH\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\tdepthBuffer0: new Uniform(null),\n\t\t\t\tdepthBuffer1: new Uniform(null),\n\t\t\t\tcameraNearFar: new Uniform(new Vector2(1, 1))\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\tthis.depthMode = LessDepth;\n\n\t}\n\n\t/**\n\t * The primary depth buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset depthBuffer0(value) {\n\n\t\tthis.uniforms.depthBuffer0.value = value;\n\n\t}\n\n\t/**\n\t * The primary depth packing strategy.\n\t *\n\t * @type {DepthPackingStrategies}\n\t */\n\n\tset depthPacking0(value) {\n\n\t\tthis.defines.DEPTH_PACKING_0 = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the base depth buffer.\n\t *\n\t * @deprecated Use depthBuffer0 and depthPacking0 instead.\n\t * @param {Texture} buffer - The depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing strategy.\n\t */\n\n\tsetDepthBuffer0(buffer, depthPacking = BasicDepthPacking) {\n\n\t\tthis.depthBuffer0 = buffer;\n\t\tthis.depthPacking0 = depthPacking;\n\n\t}\n\n\t/**\n\t * The secondary depth buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset depthBuffer1(value) {\n\n\t\tthis.uniforms.depthBuffer1.value = value;\n\n\t}\n\n\t/**\n\t * The secondary depth packing strategy.\n\t *\n\t * @type {DepthPackingStrategies}\n\t */\n\n\tset depthPacking1(value) {\n\n\t\tthis.defines.DEPTH_PACKING_1 = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the depth buffer that will be compared with the base depth buffer.\n\t *\n\t * @deprecated Use depthBuffer1 and depthPacking1 instead.\n\t * @param {Texture} buffer - The depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing strategy.\n\t */\n\n\tsetDepthBuffer1(buffer, depthPacking = BasicDepthPacking) {\n\n\t\tthis.depthBuffer1 = buffer;\n\t\tthis.depthPacking1 = depthPacking;\n\n\t}\n\n\t/**\n\t * The strategy for handling maximum depth.\n\t *\n\t * @type {DepthTestStrategy}\n\t */\n\n\tget maxDepthStrategy() {\n\n\t\treturn Number(this.defines.DEPTH_TEST_STRATEGY);\n\n\t}\n\n\tset maxDepthStrategy(value) {\n\n\t\tthis.defines.DEPTH_TEST_STRATEGY = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Indicates whether maximum depth values should be preserved.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use maxDepthStrategy instead.\n\t */\n\n\tget keepFar() {\n\n\t\treturn this.maxDepthStrategy;\n\n\t}\n\n\tset keepFar(value) {\n\n\t\tthis.maxDepthStrategy = value ? DepthTestStrategy.KEEP_MAX_DEPTH : DepthTestStrategy.DISCARD_MAX_DEPTH;\n\n\t}\n\n\t/**\n\t * Returns the strategy for dealing with maximum depth values.\n\t *\n\t * @deprecated Use maxDepthStrategy instead.\n\t * @return {DepthTestStrategy} The strategy.\n\t */\n\n\tgetMaxDepthStrategy() {\n\n\t\treturn this.maxDepthStrategy;\n\n\t}\n\n\t/**\n\t * Sets the strategy for dealing with maximum depth values.\n\t *\n\t * @deprecated Use maxDepthStrategy instead.\n\t * @param {DepthTestStrategy} value - The strategy.\n\t */\n\n\tsetMaxDepthStrategy(value) {\n\n\t\tthis.maxDepthStrategy = value;\n\n\t}\n\n\t/**\n\t * A small error threshold that is used for `EqualDepth` and `NotEqualDepth` tests. Default is `1e-5`.\n\t *\n\t * @type {Number}\n\t */\n\n\tget epsilon() {\n\n\t\treturn Number(this.defines.DEPTH_EPSILON);\n\n\t}\n\n\tset epsilon(value) {\n\n\t\tthis.defines.DEPTH_EPSILON = value.toFixed(16);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the current error threshold for depth comparisons. Default is `1e-5`.\n\t *\n\t * @deprecated Use epsilon instead.\n\t * @return {Number} The error threshold.\n\t */\n\n\tgetEpsilon() {\n\n\t\treturn this.epsilon;\n\n\t}\n\n\t/**\n\t * Sets the depth comparison error threshold.\n\t *\n\t * @deprecated Use epsilon instead.\n\t * @param {Number} value - The new error threshold.\n\t */\n\n\tsetEpsilon(value) {\n\n\t\tthis.epsilon = value;\n\n\t}\n\n\t/**\n\t * The depth mode.\n\t *\n\t * @see https://threejs.org/docs/#api/en/constants/Materials\n\t * @type {DepthModes}\n\t */\n\n\tget depthMode() {\n\n\t\treturn Number(this.defines.DEPTH_MODE);\n\n\t}\n\n\tset depthMode(value) {\n\n\t\t// If the depth test fails, the texel will be discarded.\n\t\tlet depthTest;\n\n\t\tswitch(value) {\n\n\t\t\tcase NeverDepth:\n\t\t\t\tdepthTest = \"false\";\n\t\t\t\tbreak;\n\n\t\t\tcase AlwaysDepth:\n\t\t\t\tdepthTest = \"true\";\n\t\t\t\tbreak;\n\n\t\t\tcase EqualDepth:\n\t\t\t\tdepthTest = \"abs(d1 - d0) <= DEPTH_EPSILON\";\n\t\t\t\tbreak;\n\n\t\t\tcase NotEqualDepth:\n\t\t\t\tdepthTest = \"abs(d1 - d0) > DEPTH_EPSILON\";\n\t\t\t\tbreak;\n\n\t\t\tcase LessDepth:\n\t\t\t\tdepthTest = \"d0 > d1\";\n\t\t\t\tbreak;\n\n\t\t\tcase LessEqualDepth:\n\t\t\t\tdepthTest = \"d0 >= d1\";\n\t\t\t\tbreak;\n\n\t\t\tcase GreaterEqualDepth:\n\t\t\t\tdepthTest = \"d0 <= d1\";\n\t\t\t\tbreak;\n\n\t\t\tcase GreaterDepth:\n\t\t\tdefault:\n\t\t\t\tdepthTest = \"d0 < d1\";\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tthis.defines.DEPTH_MODE = value.toFixed(0);\n\t\tthis.defines[\"depthTest(d0, d1)\"] = depthTest;\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the current depth mode.\n\t *\n\t * @deprecated Use depthMode instead.\n\t * @return {DepthModes} The depth mode. Default is `LessDepth`.\n\t */\n\n\tgetDepthMode() {\n\n\t\treturn this.depthMode;\n\n\t}\n\n\t/**\n\t * Sets the depth mode.\n\t *\n\t * @deprecated Use depthMode instead.\n\t * @param {DepthModes} mode - The depth mode.\n\t */\n\n\tsetDepthMode(mode) {\n\n\t\tthis.depthMode = mode;\n\n\t}\n\n\t/**\n\t * Adopts the settings of the given camera.\n\t *\n\t * @param {Camera} camera - A camera.\n\t */\n\n\tadoptCameraSettings(camera) {\n\n\t\tif(camera) {\n\n\t\t\tthis.uniforms.cameraNearFar.value.set(camera.near, camera.far);\n\n\t\t\tif(camera instanceof PerspectiveCamera) {\n\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\n\n\t\t\t} else {\n\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\n\n\t\t\t}\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n}\n", "import { NoBlending, ShaderMaterial, Uniform, Vector2 } from \"three\";\n\nimport fragmentShader from \"./glsl/convolution.downsampling.frag\";\nimport vertexShader from \"./glsl/common.vert\";\n\n/**\n * A downsampling material.\n *\n * Based on an article by Fabrice Piquet\n * https://www.froyok.fr/blog/2021-12-ue4-custom-bloom/\n *\n * @implements {Resizable}\n */\n\nexport class DownsamplingMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new downsampling material.\n\t */\n\n\tconstructor() {\n\n\t\tsuper({\n\t\t\tname: \"DownsamplingMaterial\",\n\t\t\tdefines: {\n\t\t\t\tSAMPLES: \"13\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\ttexelSize: new Uniform(new Vector2()),\n\t\t\t\tkernel: new Uniform(new Float32Array([\n\t\t\t\t\t// (1 / 4) * 0.5 = 0.125\n\t\t\t\t\t-1.0, 1.0, 0.125, 1.0, 1.0, 0.125,\n\t\t\t\t\t-1.0, -1.0, 0.125, 1.0, -1.0, 0.125,\n\t\t\t\t\t// (1 / 9) * 0.5 = 0.0555555\n\t\t\t\t\t-2.0, 2.0, 0.0555555, 0.0, 2.0, 0.0555555, 2.0, 2.0, 0.0555555,\n\t\t\t\t\t-2.0, 0.0, 0.0555555, 0.0, 0.0, 0.0555555, 2.0, 0.0, 0.0555555,\n\t\t\t\t\t-2.0, -2.0, 0.0555555, 0.0, -2.0, 0.0555555, 2.0, -2.0, 0.0555555\n\t\t\t\t]))\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the size of this object.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.uniforms.texelSize.value.set(1.0 / width, 1.0 / height);\n\n\t}\n\n}\n", "import { BasicDepthPacking, NoBlending, ShaderMaterial, Uniform, Vector2 } from \"three\";\nimport { EdgeDetectionMode } from \"../enums\";\n\nimport fragmentShader from \"./glsl/edge-detection.frag\";\nimport vertexShader from \"./glsl/edge-detection.vert\";\n\n/**\n * An edge detection material. Mainly used for SMAA.\n *\n * @implements {Resizable}\n */\n\nexport class EdgeDetectionMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new edge detection material.\n\t *\n\t * TODO Remove parameters.\n\t * @param {Vector2} [texelSize] - The screen texel size.\n\t * @param {EdgeDetectionMode} [mode=EdgeDetectionMode.COLOR] - The edge detection mode.\n\t */\n\n\tconstructor(texelSize = new Vector2(), mode = EdgeDetectionMode.COLOR) {\n\n\t\tsuper({\n\t\t\tname: \"EdgeDetectionMaterial\",\n\t\t\tdefines: {\n\t\t\t\tLOCAL_CONTRAST_ADAPTATION_FACTOR: \"2.0\",\n\t\t\t\tEDGE_THRESHOLD: \"0.1\",\n\t\t\t\tDEPTH_THRESHOLD: \"0.01\",\n\t\t\t\tPREDICATION_MODE: \"0\",\n\t\t\t\tPREDICATION_THRESHOLD: \"0.01\",\n\t\t\t\tPREDICATION_SCALE: \"2.0\",\n\t\t\t\tPREDICATION_STRENGTH: \"1.0\",\n\t\t\t\tDEPTH_PACKING: \"0\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\tdepthBuffer: new Uniform(null),\n\t\t\t\tpredicationBuffer: new Uniform(null),\n\t\t\t\ttexelSize: new Uniform(texelSize)\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\tthis.edgeDetectionMode = mode;\n\n\t}\n\n\t/**\n\t * The depth buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset depthBuffer(value) {\n\n\t\tthis.uniforms.depthBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The depth packing strategy.\n\t *\n\t * @type {DepthPackingStrategies}\n\t */\n\n\tset depthPacking(value) {\n\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the depth buffer.\n\t *\n\t * @deprecated Use depthBuffer and depthPacking instead.\n\t * @param {Texture} buffer - The depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing strategy.\n\t */\n\n\tsetDepthBuffer(buffer, depthPacking = BasicDepthPacking) {\n\n\t\tthis.depthBuffer = buffer;\n\t\tthis.depthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * The edge detection mode.\n\t *\n\t * @type {EdgeDetectionMode}\n\t */\n\n\tget edgeDetectionMode() {\n\n\t\treturn Number(this.defines.EDGE_DETECTION_MODE);\n\n\t}\n\n\tset edgeDetectionMode(value) {\n\n\t\tthis.defines.EDGE_DETECTION_MODE = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the edge detection mode.\n\t *\n\t * @deprecated Use edgeDetectionMode instead.\n\t * @return {EdgeDetectionMode} The mode.\n\t */\n\n\tgetEdgeDetectionMode() {\n\n\t\treturn this.edgeDetectionMode;\n\n\t}\n\n\t/**\n\t * Sets the edge detection mode.\n\t *\n\t * @deprecated Use edgeDetectionMode instead.\n\t * @param {EdgeDetectionMode} value - The edge detection mode.\n\t */\n\n\tsetEdgeDetectionMode(value) {\n\n\t\tthis.edgeDetectionMode = value;\n\n\t}\n\n\t/**\n\t * The local contrast adaptation factor. Has no effect if the edge detection mode is set to DEPTH. Default is 2.0.\n\t *\n\t * If a neighbor edge has _factor_ times bigger contrast than the current edge, the edge will be discarded.\n\t *\n\t * This allows to eliminate spurious crossing edges and is based on the fact that if there is too much contrast in a\n\t * direction, the perceptual contrast in the other neighbors will be hidden.\n\t *\n\t * @type {Number}\n\t */\n\n\tget localContrastAdaptationFactor() {\n\n\t\treturn Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR);\n\n\t}\n\n\tset localContrastAdaptationFactor(value) {\n\n\t\tthis.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR = value.toFixed(\"6\");\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the local contrast adaptation factor.\n\t *\n\t * @deprecated Use localContrastAdaptationFactor instead.\n\t * @return {Number} The factor.\n\t */\n\n\tgetLocalContrastAdaptationFactor() {\n\n\t\treturn this.localContrastAdaptationFactor;\n\n\t}\n\n\t/**\n\t * Sets the local contrast adaptation factor. Has no effect if the edge detection mode is set to DEPTH.\n\t *\n\t * @deprecated Use localContrastAdaptationFactor instead.\n\t * @param {Number} value - The local contrast adaptation factor. Default is 2.0.\n\t */\n\n\tsetLocalContrastAdaptationFactor(value) {\n\n\t\tthis.localContrastAdaptationFactor = value;\n\n\t}\n\n\t/**\n\t * The edge detection threshold. Range: [0.0, 0.5].\n\t *\n\t * A lower value results in more edges being detected at the expense of performance.\n\t *\n\t * For luma- and chroma-based edge detection, 0.1 is a reasonable value and allows to catch most visible edges. 0.05\n\t * is a rather overkill value that allows to catch 'em all. Darker scenes may require an even lower threshold.\n\t *\n\t * If depth-based edge detection is used, the threshold will depend on the scene depth.\n\t *\n\t * @type {Number}\n\t */\n\n\tget edgeDetectionThreshold() {\n\n\t\treturn Number(this.defines.EDGE_THRESHOLD);\n\n\t}\n\n\tset edgeDetectionThreshold(value) {\n\n\t\tthis.defines.EDGE_THRESHOLD = value.toFixed(\"6\");\n\t\tthis.defines.DEPTH_THRESHOLD = (value * 0.1).toFixed(\"6\");\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the edge detection threshold.\n\t *\n\t * @deprecated Use edgeDetectionThreshold instead.\n\t * @return {Number} The threshold.\n\t */\n\n\tgetEdgeDetectionThreshold() {\n\n\t\treturn this.edgeDetectionThreshold;\n\n\t}\n\n\t/**\n\t * Sets the edge detection threshold.\n\t *\n\t * @deprecated Use edgeDetectionThreshold instead.\n\t * @param {Number} value - The edge detection threshold. Range: [0.0, 0.5].\n\t */\n\n\tsetEdgeDetectionThreshold(value) {\n\n\t\tthis.edgeDetectionThreshold = value;\n\n\t}\n\n\t/**\n\t * The predication mode.\n\t *\n\t * Predicated thresholding allows to better preserve texture details and to improve edge detection using an additional\n\t * buffer such as a light accumulation or depth buffer.\n\t *\n\t * @type {PredicationMode}\n\t */\n\n\tget predicationMode() {\n\n\t\treturn Number(this.defines.PREDICATION_MODE);\n\n\t}\n\n\tset predicationMode(value) {\n\n\t\tthis.defines.PREDICATION_MODE = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the predication mode.\n\t *\n\t * @deprecated Use predicationMode instead.\n\t * @return {PredicationMode} The mode.\n\t */\n\n\tgetPredicationMode() {\n\n\t\treturn this.predicationMode;\n\n\t}\n\n\t/**\n\t * Sets the predication mode.\n\t *\n\t * @deprecated Use predicationMode instead.\n\t * @param {PredicationMode} value - The predication mode.\n\t */\n\n\tsetPredicationMode(value) {\n\n\t\tthis.predicationMode = value;\n\n\t}\n\n\t/**\n\t * The predication buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset predicationBuffer(value) {\n\n\t\tthis.uniforms.predicationBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets a custom predication buffer.\n\t *\n\t * @deprecated Use predicationBuffer instead.\n\t * @param {Texture} value - The predication buffer.\n\t */\n\n\tsetPredicationBuffer(value) {\n\n\t\tthis.uniforms.predicationBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The predication threshold.\n\t *\n\t * @type {Number}\n\t */\n\n\tget predicationThreshold() {\n\n\t\treturn Number(this.defines.PREDICATION_THRESHOLD);\n\n\t}\n\n\tset predicationThreshold(value) {\n\n\t\tthis.defines.PREDICATION_THRESHOLD = value.toFixed(\"6\");\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the predication threshold.\n\t *\n\t * @deprecated Use predicationThreshold instead.\n\t * @return {Number} The threshold.\n\t */\n\n\tgetPredicationThreshold() {\n\n\t\treturn this.predicationThreshold;\n\n\t}\n\n\t/**\n\t * Sets the predication threshold.\n\t *\n\t * @deprecated Use predicationThreshold instead.\n\t * @param {Number} value - The threshold.\n\t */\n\n\tsetPredicationThreshold(value) {\n\n\t\tthis.predicationThreshold = value;\n\n\t}\n\n\t/**\n\t * The predication scale. Range: [1.0, 5.0].\n\t *\n\t * Determines how much the edge detection threshold should be scaled when using predication.\n\t *\n\t * @type {Boolean|Texture|Number}\n\t */\n\n\tget predicationScale() {\n\n\t\treturn Number(this.defines.PREDICATION_SCALE);\n\n\t}\n\n\tset predicationScale(value) {\n\n\t\tthis.defines.PREDICATION_SCALE = value.toFixed(\"6\");\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the predication scale.\n\t *\n\t * @deprecated Use predicationScale instead.\n\t * @return {Number} The scale.\n\t */\n\n\tgetPredicationScale() {\n\n\t\treturn this.predicationScale;\n\n\t}\n\n\t/**\n\t * Sets the predication scale.\n\t *\n\t * @deprecated Use predicationScale instead.\n\t * @param {Number} value - The scale. Range: [1.0, 5.0].\n\t */\n\n\tsetPredicationScale(value) {\n\n\t\tthis.predicationScale = value;\n\n\t}\n\n\t/**\n\t * The predication strength. Range: [0.0, 1.0].\n\t *\n\t * Determines how much the edge detection threshold should be decreased locally when using predication.\n\t *\n\t * @type {Number}\n\t */\n\n\tget predicationStrength() {\n\n\t\treturn Number(this.defines.PREDICATION_STRENGTH);\n\n\t}\n\n\tset predicationStrength(value) {\n\n\t\tthis.defines.PREDICATION_STRENGTH = value.toFixed(\"6\");\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the predication strength.\n\t *\n\t * @deprecated Use predicationStrength instead.\n\t * @return {Number} The strength.\n\t */\n\n\tgetPredicationStrength() {\n\n\t\treturn this.predicationStrength;\n\n\t}\n\n\t/**\n\t * Sets the predication strength.\n\t *\n\t * @deprecated Use predicationStrength instead.\n\t * @param {Number} value - The strength. Range: [0.0, 1.0].\n\t */\n\n\tsetPredicationStrength(value) {\n\n\t\tthis.predicationStrength = value;\n\n\t}\n\n\t/**\n\t * Sets the size of this object.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.uniforms.texelSize.value.set(1.0 / width, 1.0 / height);\n\n\t}\n\n}\n", "import { BasicDepthPacking, NoBlending, PerspectiveCamera, REVISION, ShaderMaterial, Uniform, Vector2 } from \"three\";\nimport { EffectShaderSection as Section } from \"../enums\";\n\nimport fragmentTemplate from \"./glsl/effect.frag\";\nimport vertexTemplate from \"./glsl/effect.vert\";\n\n/**\n * An effect material for compound shaders. Supports dithering.\n *\n * @implements {Resizable}\n */\n\nexport class EffectMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new effect material.\n\t *\n\t * @param {Map<String, String>} [shaderParts] - Deprecated. Use setShaderData instead.\n\t * @param {Map<String, String>} [defines] - Deprecated. Use setShaderData instead.\n\t * @param {Map<String, Uniform>} [uniforms] - Deprecated. Use setShaderData instead.\n\t * @param {Camera} [camera] - A camera.\n\t * @param {Boolean} [dithering=false] - Deprecated.\n\t */\n\n\tconstructor(shaderParts, defines, uniforms, camera, dithering = false) {\n\n\t\tsuper({\n\t\t\tname: \"EffectMaterial\",\n\t\t\tdefines: {\n\t\t\t\tTHREE_REVISION: REVISION.replace(/\\D+/g, \"\"),\n\t\t\t\tDEPTH_PACKING: \"0\",\n\t\t\t\tENCODE_OUTPUT: \"1\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\tdepthBuffer: new Uniform(null),\n\t\t\t\tresolution: new Uniform(new Vector2()),\n\t\t\t\ttexelSize: new Uniform(new Vector2()),\n\t\t\t\tcameraNear: new Uniform(0.3),\n\t\t\t\tcameraFar: new Uniform(1000.0),\n\t\t\t\taspect: new Uniform(1.0),\n\t\t\t\ttime: new Uniform(0.0)\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tdithering\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\tif(shaderParts) {\n\n\t\t\tthis.setShaderParts(shaderParts);\n\n\t\t}\n\n\t\tif(defines) {\n\n\t\t\tthis.setDefines(defines);\n\n\t\t}\n\n\t\tif(uniforms) {\n\n\t\t\tthis.setUniforms(uniforms);\n\n\t\t}\n\n\t\tthis.adoptCameraSettings(camera);\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the input buffer.\n\t *\n\t * @deprecated Use inputBuffer instead.\n\t * @param {Texture} value - The input buffer.\n\t */\n\n\tsetInputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The depth buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget depthBuffer() {\n\n\t\treturn this.uniforms.depthBuffer.value;\n\n\t}\n\n\tset depthBuffer(value) {\n\n\t\tthis.uniforms.depthBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The depth packing strategy.\n\t *\n\t * @type {DepthPackingStrategies}\n\t */\n\n\tget depthPacking() {\n\n\t\treturn Number(this.defines.DEPTH_PACKING);\n\n\t}\n\n\tset depthPacking(value) {\n\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the depth buffer.\n\t *\n\t * @deprecated Use depthBuffer and depthPacking instead.\n\t * @param {Texture} buffer - The depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing strategy.\n\t */\n\n\tsetDepthBuffer(buffer, depthPacking = BasicDepthPacking) {\n\n\t\tthis.depthBuffer = buffer;\n\t\tthis.depthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * Sets the shader data.\n\t *\n\t * @param {EffectShaderData} data - The shader data.\n\t * @return {EffectMaterial} This material.\n\t */\n\n\tsetShaderData(data) {\n\n\t\tthis.setShaderParts(data.shaderParts);\n\t\tthis.setDefines(data.defines);\n\t\tthis.setUniforms(data.uniforms);\n\t\tthis.setExtensions(data.extensions);\n\n\t}\n\n\t/**\n\t * Sets the shader parts.\n\t *\n\t * @deprecated Use setShaderData instead.\n\t * @param {Map<String, String>} shaderParts - A collection of shader snippets. See {@link EffectShaderSection}.\n\t * @return {EffectMaterial} This material.\n\t */\n\n\tsetShaderParts(shaderParts) {\n\n\t\tthis.fragmentShader = fragmentTemplate\n\t\t\t.replace(Section.FRAGMENT_HEAD, shaderParts.get(Section.FRAGMENT_HEAD) ?? \"\")\n\t\t\t.replace(Section.FRAGMENT_MAIN_UV, shaderParts.get(Section.FRAGMENT_MAIN_UV) ?? \"\")\n\t\t\t.replace(Section.FRAGMENT_MAIN_IMAGE, shaderParts.get(Section.FRAGMENT_MAIN_IMAGE) ?? \"\");\n\n\t\tthis.vertexShader = vertexTemplate\n\t\t\t.replace(Section.VERTEX_HEAD, shaderParts.get(Section.VERTEX_HEAD) ?? \"\")\n\t\t\t.replace(Section.VERTEX_MAIN_SUPPORT, shaderParts.get(Section.VERTEX_MAIN_SUPPORT) ?? \"\");\n\n\t\tthis.needsUpdate = true;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the shader macros.\n\t *\n\t * @deprecated Use setShaderData instead.\n\t * @param {Map<String, String>} defines - A collection of preprocessor macro definitions.\n\t * @return {EffectMaterial} This material.\n\t */\n\n\tsetDefines(defines) {\n\n\t\tfor(const entry of defines.entries()) {\n\n\t\t\tthis.defines[entry[0]] = entry[1];\n\n\t\t}\n\n\t\tthis.needsUpdate = true;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the shader uniforms.\n\t *\n\t * @deprecated Use setShaderData instead.\n\t * @param {Map<String, Uniform>} uniforms - A collection of uniforms.\n\t * @return {EffectMaterial} This material.\n\t */\n\n\tsetUniforms(uniforms) {\n\n\t\tfor(const entry of uniforms.entries()) {\n\n\t\t\tthis.uniforms[entry[0]] = entry[1];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the required shader extensions.\n\t *\n\t * @deprecated Use setShaderData instead.\n\t * @param {Set<WebGLExtension>} extensions - A collection of extensions.\n\t * @return {EffectMaterial} This material.\n\t */\n\n\tsetExtensions(extensions) {\n\n\t\tthis.extensions = {};\n\n\t\tfor(const extension of extensions) {\n\n\t\t\tthis.extensions[extension] = true;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Indicates whether output encoding is enabled.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget encodeOutput() {\n\n\t\treturn (this.defines.ENCODE_OUTPUT !== undefined);\n\n\t}\n\n\tset encodeOutput(value) {\n\n\t\tif(this.encodeOutput !== value) {\n\n\t\t\tif(value) {\n\n\t\t\t\tthis.defines.ENCODE_OUTPUT = \"1\";\n\n\t\t\t} else {\n\n\t\t\t\tdelete this.defines.ENCODE_OUTPUT;\n\n\t\t\t}\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indicates whether output encoding is enabled.\n\t *\n\t * @deprecated Use encodeOutput instead.\n\t * @return {Boolean} Whether output encoding is enabled.\n\t */\n\n\tisOutputEncodingEnabled(value) {\n\n\t\treturn this.encodeOutput;\n\n\t}\n\n\t/**\n\t * Enables or disables output encoding.\n\t *\n\t * @deprecated Use encodeOutput instead.\n\t * @param {Boolean} value - Whether output encoding should be enabled.\n\t */\n\n\tsetOutputEncodingEnabled(value) {\n\n\t\tthis.encodeOutput = value;\n\n\t}\n\n\t/**\n\t * The time in seconds.\n\t *\n\t * @type {Number}\n\t */\n\n\tget time() {\n\n\t\treturn this.uniforms.time.value;\n\n\t}\n\n\tset time(value) {\n\n\t\tthis.uniforms.time.value = value;\n\n\t}\n\n\t/**\n\t * Sets the delta time.\n\t *\n\t * @deprecated Use time instead.\n\t * @param {Number} value - The delta time in seconds.\n\t */\n\n\tsetDeltaTime(value) {\n\n\t\tthis.uniforms.time.value += value;\n\n\t}\n\n\t/**\n\t * Adopts the settings of the given camera.\n\t *\n\t * @param {Camera} camera - A camera.\n\t */\n\n\tadoptCameraSettings(camera) {\n\n\t\tif(camera) {\n\n\t\t\tthis.uniforms.cameraNear.value = camera.near;\n\t\t\tthis.uniforms.cameraFar.value = camera.far;\n\n\t\t\tif(camera instanceof PerspectiveCamera) {\n\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\n\n\t\t\t} else {\n\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\n\n\t\t\t}\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets the resolution.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst uniforms = this.uniforms;\n\t\tuniforms.resolution.value.set(width, height);\n\t\tuniforms.texelSize.value.set(1.0 / width, 1.0 / height);\n\t\tuniforms.aspect.value = width / height;\n\n\t}\n\n\t/**\n\t * An enumeration of shader code placeholders.\n\t *\n\t * @deprecated Use EffectShaderSection instead.\n\t * @type {Object}\n\t */\n\n\tstatic get Section() {\n\n\t\treturn Section;\n\n\t}\n\n}\n", "import { NoBlending, ShaderMaterial, Uniform, Vector2 } from \"three\";\nimport { GaussKernel } from \"../core\";\n\nimport fragmentShader from \"./glsl/convolution.gaussian.frag\";\nimport vertexShader from \"./glsl/convolution.gaussian.vert\";\n\n/**\n * An optimized Gaussian convolution shader material.\n *\n * References:\n *\n * Filip Strugar, Intel, 2014: [An investigation of fast real-time GPU-based image blur algorithms](\n * https://www.intel.com/content/www/us/en/developer/articles/technical/an-investigation-of-fast-real-time-gpu-based-image-blur-algorithms.html)\n *\n * @implements {Resizable}\n */\n\nexport class GaussianBlurMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new convolution material.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {Number} [options.kernelSize=35] - The kernel size.\n\t */\n\n\tconstructor({ kernelSize = 35 } = {}) {\n\n\t\tsuper({\n\t\t\tname: \"GaussianBlurMaterial\",\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\ttexelSize: new Uniform(new Vector2()),\n\t\t\t\tdirection: new Uniform(new Vector2()),\n\t\t\t\tkernel: new Uniform(null),\n\t\t\t\tscale: new Uniform(new Vector2(1.0, 1.0))\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\t/**\n\t\t * Backing data for {@link kernelSize}.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis._kernelSize = 0;\n\t\tthis.kernelSize = kernelSize;\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The kernel size.\n\t *\n\t * @type {Number}\n\t */\n\n\tget kernelSize() {\n\n\t\treturn this._kernelSize;\n\n\t}\n\n\tset kernelSize(value) {\n\n\t\tthis._kernelSize = value;\n\t\tthis.generateKernel(value);\n\n\t}\n\n\t/**\n\t * The blur direction.\n\t *\n\t * @type {Vector2}\n\t */\n\n\tget direction() {\n\n\t\treturn this.uniforms.direction.value;\n\n\t}\n\n\t/**\n\t * The resolution scale.\n\t *\n\t * @type {Number}\n\t * @internal\n\t */\n\n\tset resolutionScale(value) {\n\n\t\tthis.uniforms.scale.value.x = value;\n\n\t}\n\n\t/**\n\t * The blur kernel scale. Values greater than 1.0 may introduce artifacts.\n\t *\n\t * @type {Number}\n\t */\n\n\tget scale() {\n\n\t\treturn this.uniforms.scale.value.y;\n\n\t}\n\n\tset scale(value) {\n\n\t\tthis.uniforms.scale.value.y = value;\n\n\t}\n\n\t/**\n\t * Generates the Gauss kernel.\n\t *\n\t * @param {KernelSize} kernelSize - The kernel size. Should be an odd number.\n\t * @private\n\t */\n\n\tgenerateKernel(kernelSize) {\n\n\t\tconst kernel = new GaussKernel(kernelSize);\n\t\tconst steps = kernel.linearSteps;\n\n\t\t// Store offsets and weights as vec2 instances to minimize the uniform count.\n\t\tconst kernelData = new Float64Array(steps * 2);\n\n\t\tfor(let i = 0, j = 0; i < steps; ++i) {\n\n\t\t\tkernelData[j++] = kernel.linearOffsets[i];\n\t\t\tkernelData[j++] = kernel.linearWeights[i];\n\n\t\t}\n\n\t\tthis.uniforms.kernel.value = kernelData;\n\t\tthis.defines.STEPS = steps.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the size of this object.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.uniforms.texelSize.value.set(1.0 / width, 1.0 / height);\n\n\t}\n\n}\n", "import { NoBlending, ShaderMaterial, Uniform } from \"three\";\n\nimport fragmentShader from \"./glsl/convolution.god-rays.frag\";\nimport vertexShader from \"./glsl/common.vert\";\n\n/**\n * A crepuscular rays shader material.\n *\n * References:\n *\n * Thibaut Despoulain, 2012: [(WebGL) Volumetric Light Approximation in Three.js](\n * http://bkcore.com/blog/3d/webgl-three-js-volumetric-light-godrays.html)\n * Nvidia, GPU Gems 3, 2008: [Chapter 13. Volumetric Light Scattering as a Post-Process](\n * https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch13.html)\n *\n * @todo Remove dithering code from fragment shader.\n */\n\nexport class GodRaysMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new god rays material.\n\t *\n\t * TODO Remove lightPosition param.\n\t * @param {Vector2} lightPosition - Deprecated.\n\t */\n\n\tconstructor(lightPosition) {\n\n\t\tsuper({\n\t\t\tname: \"GodRaysMaterial\",\n\t\t\tdefines: {\n\t\t\t\tSAMPLES_INT: \"60\",\n\t\t\t\tSAMPLES_FLOAT: \"60.0\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\tlightPosition: new Uniform(lightPosition),\n\t\t\t\tdensity: new Uniform(1.0),\n\t\t\t\tdecay: new Uniform(1.0),\n\t\t\t\tweight: new Uniform(1.0),\n\t\t\t\texposure: new Uniform(1.0),\n\t\t\t\tclampMax: new Uniform(1.0)\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the input buffer.\n\t *\n\t * @deprecated Use inputBuffer instead.\n\t * @param {Texture} value - The input buffer.\n\t */\n\n\tsetInputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The screen space position of the light source.\n\t *\n\t * @type {Vector2}\n\t */\n\n\tget lightPosition() {\n\n\t\treturn this.uniforms.lightPosition.value;\n\n\t}\n\n\t/**\n\t * Returns the screen space position of the light source.\n\t *\n\t * @deprecated Use lightPosition instead.\n\t * @return {Vector2} The position.\n\t */\n\n\tgetLightPosition() {\n\n\t\treturn this.uniforms.lightPosition.value;\n\n\t}\n\n\t/**\n\t * Sets the screen space position of the light source.\n\t *\n\t * @deprecated Use lightPosition instead.\n\t * @param {Vector2} value - The position.\n\t */\n\n\tsetLightPosition(value) {\n\n\t\tthis.uniforms.lightPosition.value = value;\n\n\t}\n\n\t/**\n\t * The density.\n\t *\n\t * @type {Number}\n\t */\n\n\tget density() {\n\n\t\treturn this.uniforms.density.value;\n\n\t}\n\n\tset density(value) {\n\n\t\tthis.uniforms.density.value = value;\n\n\t}\n\n\t/**\n\t * Returns the density.\n\t *\n\t * @deprecated Use density instead.\n\t * @return {Number} The density.\n\t */\n\n\tgetDensity() {\n\n\t\treturn this.uniforms.density.value;\n\n\t}\n\n\t/**\n\t * Sets the density.\n\t *\n\t * @deprecated Use density instead.\n\t * @param {Number} value - The density.\n\t */\n\n\tsetDensity(value) {\n\n\t\tthis.uniforms.density.value = value;\n\n\t}\n\n\t/**\n\t * The decay.\n\t *\n\t * @type {Number}\n\t */\n\n\tget decay() {\n\n\t\treturn this.uniforms.decay.value;\n\n\t}\n\n\tset decay(value) {\n\n\t\tthis.uniforms.decay.value = value;\n\n\t}\n\n\t/**\n\t * Returns the decay.\n\t *\n\t * @deprecated Use decay instead.\n\t * @return {Number} The decay.\n\t */\n\n\tgetDecay() {\n\n\t\treturn this.uniforms.decay.value;\n\n\t}\n\n\t/**\n\t * Sets the decay.\n\t *\n\t * @deprecated Use decay instead.\n\t * @param {Number} value - The decay.\n\t */\n\n\tsetDecay(value) {\n\n\t\tthis.uniforms.decay.value = value;\n\n\t}\n\n\t/**\n\t * The weight.\n\t *\n\t * @type {Number}\n\t */\n\n\tget weight() {\n\n\t\treturn this.uniforms.weight.value;\n\n\t}\n\n\tset weight(value) {\n\n\t\tthis.uniforms.weight.value = value;\n\n\t}\n\n\t/**\n\t * Returns the weight.\n\t *\n\t * @deprecated Use weight instead.\n\t * @return {Number} The weight.\n\t */\n\n\tgetWeight() {\n\n\t\treturn this.uniforms.weight.value;\n\n\t}\n\n\t/**\n\t * Sets the weight.\n\t *\n\t * @deprecated Use weight instead.\n\t * @param {Number} value - The weight.\n\t */\n\n\tsetWeight(value) {\n\n\t\tthis.uniforms.weight.value = value;\n\n\t}\n\n\t/**\n\t * The exposure.\n\t *\n\t * @type {Number}\n\t */\n\n\tget exposure() {\n\n\t\treturn this.uniforms.exposure.value;\n\n\t}\n\n\tset exposure(value) {\n\n\t\tthis.uniforms.exposure.value = value;\n\n\t}\n\n\t/**\n\t * Returns the exposure.\n\t *\n\t * @deprecated Use exposure instead.\n\t * @return {Number} The exposure.\n\t */\n\n\tgetExposure() {\n\n\t\treturn this.uniforms.exposure.value;\n\n\t}\n\n\t/**\n\t * Sets the exposure.\n\t *\n\t * @deprecated Use exposure instead.\n\t * @param {Number} value - The exposure.\n\t */\n\n\tsetExposure(value) {\n\n\t\tthis.uniforms.exposure.value = value;\n\n\t}\n\n\t/**\n\t * The maximum light intensity.\n\t *\n\t * @type {Number}\n\t */\n\n\tget maxIntensity() {\n\n\t\treturn this.uniforms.clampMax.value;\n\n\t}\n\n\tset maxIntensity(value) {\n\n\t\tthis.uniforms.clampMax.value = value;\n\n\t}\n\n\t/**\n\t * Returns the maximum light intensity.\n\t *\n\t * @deprecated Use maxIntensity instead.\n\t * @return {Number} The maximum light intensity.\n\t */\n\n\tgetMaxIntensity() {\n\n\t\treturn this.uniforms.clampMax.value;\n\n\t}\n\n\t/**\n\t * Sets the maximum light intensity.\n\t *\n\t * @deprecated Use maxIntensity instead.\n\t * @param {Number} value - The maximum light intensity.\n\t */\n\n\tsetMaxIntensity(value) {\n\n\t\tthis.uniforms.clampMax.value = value;\n\n\t}\n\n\t/**\n\t * The amount of samples per pixel.\n\t *\n\t * @type {Number}\n\t */\n\n\tget samples() {\n\n\t\treturn Number(this.defines.SAMPLES_INT);\n\n\t}\n\n\tset samples(value) {\n\n\t\tconst s = Math.floor(value);\n\t\tthis.defines.SAMPLES_INT = s.toFixed(0);\n\t\tthis.defines.SAMPLES_FLOAT = s.toFixed(1);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the amount of samples per pixel.\n\t *\n\t * @deprecated Use samples instead.\n\t * @return {Number} The sample count.\n\t */\n\n\tgetSamples() {\n\n\t\treturn this.samples;\n\n\t}\n\n\t/**\n\t * Sets the amount of samples per pixel.\n\t *\n\t * @deprecated Use samples instead.\n\t * @param {Number} value - The sample count.\n\t */\n\n\tsetSamples(value) {\n\n\t\tthis.samples = value;\n\n\t}\n\n}\n", "import { NoBlending, ShaderMaterial, Uniform } from \"three\";\n\nimport fragmentShader from \"./glsl/luminance.frag\";\nimport vertexShader from \"./glsl/common.vert\";\n\n/**\n * A luminance shader material.\n *\n * This shader produces a greyscale luminance map that describes the absolute amount of light emitted by a scene. It can\n * also be configured to output colors that are scaled with their respective luminance value. Additionally, a range may\n * be provided to mask out undesired texels.\n *\n * The alpha channel always contains the luminance value.\n *\n * On luminance coefficients:\n *  http://www.poynton.com/notes/colour_and_gamma/ColorFAQ.html#RTFToC9\n *\n * Coefficients for different color spaces:\n *  https://hsto.org/getpro/habr/post_images/2ab/69d/084/2ab69d084f9a597e032624bcd74d57a7.png\n *\n * Luminance range reference:\n *  https://cycling74.com/2007/05/23/your-first-shader/#.Vty9FfkrL4Z\n */\n\nexport class LuminanceMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new luminance material.\n\t *\n\t * @param {Boolean} [colorOutput=false] - Defines whether the shader should output colors scaled with their luminance value.\n\t * @param {Vector2} [luminanceRange] - If provided, the shader will mask out texels that aren't in the specified luminance range.\n\t */\n\n\tconstructor(colorOutput = false, luminanceRange = null) {\n\n\t\tsuper({\n\t\t\tname: \"LuminanceMaterial\",\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\tthreshold: new Uniform(0.0),\n\t\t\t\tsmoothing: new Uniform(1.0),\n\t\t\t\trange: new Uniform(null)\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\tthis.colorOutput = colorOutput;\n\t\tthis.luminanceRange = luminanceRange;\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the input buffer.\n\t *\n\t * @deprecated Use inputBuffer instead.\n\t * @param {Texture} value - The input buffer.\n\t */\n\n\tsetInputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The luminance threshold.\n\t *\n\t * @type {Number}\n\t */\n\n\tget threshold() {\n\n\t\treturn this.uniforms.threshold.value;\n\n\t}\n\n\tset threshold(value) {\n\n\t\tif(this.smoothing > 0 || value > 0) {\n\n\t\t\tthis.defines.THRESHOLD = \"1\";\n\n\t\t} else {\n\n\t\t\tdelete this.defines.THRESHOLD;\n\n\t\t}\n\n\t\tthis.uniforms.threshold.value = value;\n\n\t}\n\n\t/**\n\t * Returns the luminance threshold.\n\t *\n\t * @deprecated Use threshold instead.\n\t * @return {Number} The threshold.\n\t */\n\n\tgetThreshold() {\n\n\t\treturn this.threshold;\n\n\t}\n\n\t/**\n\t * Sets the luminance threshold.\n\t *\n\t * @deprecated Use threshold instead.\n\t * @param {Number} value - The threshold.\n\t */\n\n\tsetThreshold(value) {\n\n\t\tthis.threshold = value;\n\n\t}\n\n\t/**\n\t * The luminance threshold smoothing.\n\t *\n\t * @type {Number}\n\t */\n\n\tget smoothing() {\n\n\t\treturn this.uniforms.smoothing.value;\n\n\t}\n\n\tset smoothing(value) {\n\n\t\tif(this.threshold > 0 || value > 0) {\n\n\t\t\tthis.defines.THRESHOLD = \"1\";\n\n\t\t} else {\n\n\t\t\tdelete this.defines.THRESHOLD;\n\n\t\t}\n\n\t\tthis.uniforms.smoothing.value = value;\n\n\t}\n\n\t/**\n\t * Returns the luminance threshold smoothing factor.\n\t *\n\t * @deprecated Use smoothing instead.\n\t * @return {Number} The smoothing factor.\n\t */\n\n\tgetSmoothingFactor() {\n\n\t\treturn this.smoothing;\n\n\t}\n\n\t/**\n\t * Sets the luminance threshold smoothing factor.\n\t *\n\t * @deprecated Use smoothing instead.\n\t * @param {Number} value - The smoothing factor.\n\t */\n\n\tsetSmoothingFactor(value) {\n\n\t\tthis.smoothing = value;\n\n\t}\n\n\t/**\n\t * Indicates whether the luminance threshold is enabled.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Adjust the threshold or smoothing factor instead.\n\t */\n\n\tget useThreshold() {\n\n\t\treturn (this.threshold > 0 || this.smoothing > 0);\n\n\t}\n\n\tset useThreshold(value) {}\n\n\t/**\n\t * Indicates whether color output is enabled.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget colorOutput() {\n\n\t\treturn (this.defines.COLOR !== undefined);\n\n\t}\n\n\tset colorOutput(value) {\n\n\t\tif(value) {\n\n\t\t\tthis.defines.COLOR = \"1\";\n\n\t\t} else {\n\n\t\t\tdelete this.defines.COLOR;\n\n\t\t}\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Indicates whether color output is enabled.\n\t *\n\t * @deprecated Use colorOutput instead.\n\t * @return {Boolean} Whether color output is enabled.\n\t */\n\n\tisColorOutputEnabled(value) {\n\n\t\treturn this.colorOutput;\n\n\t}\n\n\t/**\n\t * Enables or disables color output.\n\t *\n\t * @deprecated Use colorOutput instead.\n\t * @param {Boolean} value - Whether color output should be enabled.\n\t */\n\n\tsetColorOutputEnabled(value) {\n\n\t\tthis.colorOutput = value;\n\n\t}\n\n\t/**\n\t * Indicates whether luminance masking is enabled.\n\t *\n\t * @type {Boolean}\n\t * @deprecated\n\t */\n\n\tget useRange() {\n\n\t\treturn (this.luminanceRange !== null);\n\n\t}\n\n\tset useRange(value) {\n\n\t\tthis.luminanceRange = null;\n\n\t}\n\n\t/**\n\t * The luminance range. Set to null to disable.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget luminanceRange() {\n\n\t\treturn this.uniforms.range.value;\n\n\t}\n\n\tset luminanceRange(value) {\n\n\t\tif(value !== null) {\n\n\t\t\tthis.defines.RANGE = \"1\";\n\n\t\t} else {\n\n\t\t\tdelete this.defines.RANGE;\n\n\t\t}\n\n\t\tthis.uniforms.range.value = value;\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the current luminance range.\n\t *\n\t * @deprecated Use luminanceRange instead.\n\t * @return {Vector2} The luminance range.\n\t */\n\n\tgetLuminanceRange() {\n\n\t\treturn this.luminanceRange;\n\n\t}\n\n\t/**\n\t * Sets a luminance range. Set to null to disable.\n\t *\n\t * @deprecated Use luminanceRange instead.\n\t * @param {Vector2} value - The luminance range.\n\t */\n\n\tsetLuminanceRange(value) {\n\n\t\tthis.luminanceRange = value;\n\n\t}\n\n}\n", "import { NoBlending, ShaderMaterial, Uniform, UnsignedByteType } from \"three\";\nimport { ColorChannel, MaskFunction } from \"../enums\";\n\nimport fragmentShader from \"./glsl/mask.frag\";\nimport vertexShader from \"./glsl/common.vert\";\n\n/**\n * A mask shader material.\n *\n * This material applies a mask texture to a buffer.\n */\n\nexport class MaskMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new mask material.\n\t *\n\t * @param {Texture} [maskTexture] - The mask texture.\n\t */\n\n\tconstructor(maskTexture = null) {\n\n\t\tsuper({\n\t\t\tname: \"MaskMaterial\",\n\t\t\tuniforms: {\n\t\t\t\tmaskTexture: new Uniform(maskTexture),\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\tstrength: new Uniform(1.0)\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\tthis.setColorChannel(ColorChannel.RED);\n\t\tthis.setMaskFunction(MaskFunction.DISCARD);\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the input buffer.\n\t *\n\t * @deprecated Use inputBuffer instead.\n\t * @param {Texture} value - The input buffer.\n\t */\n\n\tsetInputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The mask texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset maskTexture(value) {\n\n\t\tthis.uniforms.maskTexture.value = value;\n\t\tdelete this.defines.MASK_PRECISION_HIGH;\n\n\t\tif(value.type !== UnsignedByteType) {\n\n\t\t\tthis.defines.MASK_PRECISION_HIGH = \"1\";\n\n\t\t}\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the mask texture.\n\t *\n\t * @deprecated Use maskTexture instead.\n\t * @param {Texture} value - The texture.\n\t */\n\n\tsetMaskTexture(value) {\n\n\t\tthis.maskTexture = value;\n\n\t}\n\n\t/**\n\t * Sets the color channel to use for masking. Default is `ColorChannel.RED`.\n\t *\n\t * @type {ColorChannel}\n\t */\n\n\tset colorChannel(value) {\n\n\t\tthis.defines.COLOR_CHANNEL = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the color channel to use for masking. Default is `ColorChannel.RED`.\n\t *\n\t * @deprecated Use colorChannel instead.\n\t * @param {ColorChannel} value - The channel.\n\t */\n\n\tsetColorChannel(value) {\n\n\t\tthis.colorChannel = value;\n\n\t}\n\n\t/**\n\t * The masking technique. Default is `MaskFunction.DISCARD`.\n\t *\n\t * @type {MaskFunction}\n\t */\n\n\tset maskFunction(value) {\n\n\t\tthis.defines.MASK_FUNCTION = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the masking technique. Default is `MaskFunction.DISCARD`.\n\t *\n\t * @deprecated Use maskFunction instead.\n\t * @param {MaskFunction} value - The function.\n\t */\n\n\tsetMaskFunction(value) {\n\n\t\tthis.maskFunction = value;\n\n\t}\n\n\t/**\n\t * Indicates whether the masking is inverted.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget inverted() {\n\n\t\treturn (this.defines.INVERTED !== undefined);\n\n\t}\n\n\tset inverted(value) {\n\n\t\tif(this.inverted && !value) {\n\n\t\t\tdelete this.defines.INVERTED;\n\n\t\t} else if(value) {\n\n\t\t\tthis.defines.INVERTED = \"1\";\n\n\t\t}\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Indicates whether the masking is inverted.\n\t *\n\t * @deprecated Use inverted instead.\n\t * @return {Boolean} Whether the masking is inverted.\n\t */\n\n\tisInverted() {\n\n\t\treturn this.inverted;\n\n\t}\n\n\t/**\n\t * Determines whether the masking should be inverted.\n\t *\n\t * @deprecated Use inverted instead.\n\t * @param {Boolean} value - Whether the masking should be inverted.\n\t */\n\n\tsetInverted(value) {\n\n\t\tthis.inverted = value;\n\n\t}\n\n\t/**\n\t * The current mask strength.\n\t *\n\t * Individual mask values will be clamped to [0.0, 1.0]. Has no effect when the mask function is set to `DISCARD`.\n\t *\n\t * @type {Number}\n\t */\n\n\tget strength() {\n\n\t\treturn this.uniforms.strength.value;\n\n\t}\n\n\tset strength(value) {\n\n\t\tthis.uniforms.strength.value = value;\n\n\t}\n\n\t/**\n\t * Returns the current mask strength.\n\t *\n\t * @deprecated Use strength instead.\n\t * @return {Number} The mask strength.\n\t */\n\n\tgetStrength() {\n\n\t\treturn this.strength;\n\n\t}\n\n\t/**\n\t * Sets the mask strength.\n\t *\n\t * Has no effect when the mask function is set to `DISCARD`.\n\t *\n\t * @deprecated Use strength instead.\n\t * @param {Number} value - The mask strength.\n\t */\n\n\tsetStrength(value) {\n\n\t\tthis.strength = value;\n\n\t}\n\n}\n", "import { NoBlending, ShaderMaterial, Uniform, Vector2 } from \"three\";\n\nimport fragmentShader from \"./glsl/outline.frag\";\nimport vertexShader from \"./glsl/outline.vert\";\n\n/**\n * An outline shader material.\n *\n * @implements {Resizable}\n */\n\nexport class OutlineMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new outline material.\n\t *\n\t * TODO Remove texelSize param.\n\t * @param {Vector2} [texelSize] - The screen texel size.\n\t */\n\n\tconstructor(texelSize = new Vector2()) {\n\n\t\tsuper({\n\t\t\tname: \"OutlineMaterial\",\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\ttexelSize: new Uniform(new Vector2())\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\tthis.setTexelSize(texelSize.x, texelSize.y);\n\n\t\t// TODO Added for backward compatibility.\n\t\tthis.uniforms.maskTexture = this.uniforms.inputBuffer;\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the input buffer.\n\t *\n\t * @deprecated Use inputBuffer instead.\n\t * @param {Texture} value - The input buffer.\n\t */\n\n\tsetInputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the texel size.\n\t *\n\t * @deprecated Use setSize() instead.\n\t * @param {Number} x - The texel width.\n\t * @param {Number} y - The texel height.\n\t */\n\n\tsetTexelSize(x, y) {\n\n\t\tthis.uniforms.texelSize.value.set(x, y);\n\n\t}\n\n\t/**\n\t * Sets the size of this object.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.uniforms.texelSize.value.set(1.0 / width, 1.0 / height);\n\n\t}\n\n}\n", "import { NoBlending, ShaderMaterial, Uniform, Vector2 } from \"three\";\n\nimport fragmentShader from \"./glsl/smaa-weights.frag\";\nimport vertexShader from \"./glsl/smaa-weights.vert\";\n\n/**\n * Subpixel Morphological Antialiasing.\n *\n * This material computes weights for detected edges.\n *\n * @implements {Resizable}\n */\n\nexport class SMAAWeightsMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new SMAA weights material.\n\t *\n\t * @param {Vector2} [texelSize] - The absolute screen texel size.\n\t * @param {Vector2} [resolution] - The resolution.\n\t */\n\n\tconstructor(texelSize = new Vector2(), resolution = new Vector2()) {\n\n\t\tsuper({\n\t\t\tname: \"SMAAWeightsMaterial\",\n\t\t\tdefines: {\n\t\t\t\t// Configurable settings:\n\t\t\t\tMAX_SEARCH_STEPS_INT: \"16\",\n\t\t\t\tMAX_SEARCH_STEPS_FLOAT: \"16.0\",\n\t\t\t\tMAX_SEARCH_STEPS_DIAG_INT: \"8\",\n\t\t\t\tMAX_SEARCH_STEPS_DIAG_FLOAT: \"8.0\",\n\t\t\t\tCORNER_ROUNDING: \"25\",\n\t\t\t\tCORNER_ROUNDING_NORM: \"0.25\",\n\t\t\t\t// Non-configurable settings:\n\t\t\t\tAREATEX_MAX_DISTANCE: \"16.0\",\n\t\t\t\tAREATEX_MAX_DISTANCE_DIAG: \"20.0\",\n\t\t\t\tAREATEX_PIXEL_SIZE: \"(1.0 / vec2(160.0, 560.0))\",\n\t\t\t\tAREATEX_SUBTEX_SIZE: \"(1.0 / 7.0)\",\n\t\t\t\tSEARCHTEX_SIZE: \"vec2(66.0, 33.0)\",\n\t\t\t\tSEARCHTEX_PACKED_SIZE: \"vec2(64.0, 16.0)\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\tsearchTexture: new Uniform(null),\n\t\t\t\tareaTexture: new Uniform(null),\n\t\t\t\tresolution: new Uniform(resolution),\n\t\t\t\ttexelSize: new Uniform(texelSize)\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the input buffer.\n\t *\n\t * @deprecated Use inputBuffer instead.\n\t * @param {Texture} value - The input buffer.\n\t */\n\n\tsetInputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The search lookup texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget searchTexture() {\n\n\t\treturn this.uniforms.searchTexture.value;\n\n\t}\n\n\tset searchTexture(value) {\n\n\t\tthis.uniforms.searchTexture.value = value;\n\n\t}\n\n\t/**\n\t * The area lookup texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget areaTexture() {\n\n\t\treturn this.uniforms.areaTexture.value;\n\n\t}\n\n\tset areaTexture(value) {\n\n\t\tthis.uniforms.areaTexture.value = value;\n\n\t}\n\n\t/**\n\t * Sets the search and area lookup textures.\n\t *\n\t * @deprecated Use searchTexture and areaTexture instead.\n\t * @param {Texture} search - The search lookup texture.\n\t * @param {Texture} area - The area lookup texture.\n\t */\n\n\tsetLookupTextures(search, area) {\n\n\t\tthis.searchTexture = search;\n\t\tthis.areaTexture = area;\n\n\t}\n\n\t/**\n\t * The maximum amount of steps performed in the horizontal/vertical pattern searches, at each side of the pixel.\n\t * Range: [0, 112].\n\t *\n\t * In number of pixels, it's actually the double. So the maximum line length perfectly handled by, for example 16, is\n\t * 64 (perfectly means that longer lines won't look as good, but are still antialiased).\n\t *\n\t * @type {Number}\n\t */\n\n\tget orthogonalSearchSteps() {\n\n\t\treturn Number(this.defines.MAX_SEARCH_STEPS_INT);\n\n\t}\n\n\tset orthogonalSearchSteps(value) {\n\n\t\tconst s = Math.min(Math.max(value, 0), 112);\n\t\tthis.defines.MAX_SEARCH_STEPS_INT = s.toFixed(\"0\");\n\t\tthis.defines.MAX_SEARCH_STEPS_FLOAT = s.toFixed(\"1\");\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the maximum amount of steps performed in the horizontal/vertical pattern searches, at each side of the pixel.\n\t *\n\t * @deprecated Use orthogonalSearchSteps instead.\n\t * @param {Number} value - The search steps. Range: [0, 112].\n\t */\n\n\tsetOrthogonalSearchSteps(value) {\n\n\t\tthis.orthogonalSearchSteps = value;\n\n\t}\n\n\t/**\n\t * The maximum steps performed in the diagonal pattern searches, at each side of the pixel. This search\n\t * jumps one pixel at a time. Range: [0, 20].\n\t *\n\t * On high-end machines this search is cheap (between 0.8x and 0.9x slower for 16 steps), but it can have a\n\t * significant impact on older machines.\n\t *\n\t * @type {Number}\n\t */\n\n\tget diagonalSearchSteps() {\n\n\t\treturn Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT);\n\n\t}\n\n\tset diagonalSearchSteps(value) {\n\n\t\tconst s = Math.min(Math.max(value, 0), 20);\n\t\tthis.defines.MAX_SEARCH_STEPS_DIAG_INT = s.toFixed(\"0\");\n\t\tthis.defines.MAX_SEARCH_STEPS_DIAG_FLOAT = s.toFixed(\"1\");\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Specifies the maximum steps performed in the diagonal pattern searches, at each side of the pixel.\n\t *\n\t * @deprecated Use diagonalSearchSteps instead.\n\t * @param {Number} value - The search steps. Range: [0, 20].\n\t */\n\n\tsetDiagonalSearchSteps(value) {\n\n\t\tthis.diagonalSearchSteps = value;\n\n\t}\n\n\t/**\n\t * Indicates whether diagonal pattern detection is enabled.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget diagonalDetection() {\n\n\t\treturn (this.defines.DISABLE_DIAG_DETECTION === undefined);\n\n\t}\n\n\tset diagonalDetection(value) {\n\n\t\tif(value) {\n\n\t\t\tdelete this.defines.DISABLE_DIAG_DETECTION;\n\n\t\t} else {\n\n\t\t\tthis.defines.DISABLE_DIAG_DETECTION = \"1\";\n\n\t\t}\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Indicates whether diagonal pattern detection is enabled.\n\t *\n\t * @deprecated Use diagonalDetection instead.\n\t * @return {Boolean} Whether diagonal pattern detection is enabled.\n\t */\n\n\tisDiagonalDetectionEnabled() {\n\n\t\treturn this.diagonalDetection;\n\n\t}\n\n\t/**\n\t * Enables or disables diagonal pattern detection.\n\t *\n\t * @deprecated Use diagonalDetection instead.\n\t * @param {Boolean} value - Whether diagonal pattern detection should be enabled.\n\t */\n\n\tsetDiagonalDetectionEnabled(value) {\n\n\t\tthis.diagonalDetection = value;\n\n\t}\n\n\t/**\n\t * Specifies how much sharp corners will be rounded. Range: [0, 100].\n\t *\n\t * @type {Number}\n\t */\n\n\tget cornerRounding() {\n\n\t\treturn Number(this.defines.CORNER_ROUNDING);\n\n\t}\n\n\tset cornerRounding(value) {\n\n\t\tconst r = Math.min(Math.max(value, 0), 100);\n\t\tthis.defines.CORNER_ROUNDING = r.toFixed(\"4\");\n\t\tthis.defines.CORNER_ROUNDING_NORM = (r / 100.0).toFixed(\"4\");\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Specifies how much sharp corners will be rounded.\n\t *\n\t * @deprecated Use cornerRounding instead.\n\t * @param {Number} value - The corner rounding amount. Range: [0, 100].\n\t */\n\n\tsetCornerRounding(value) {\n\n\t\tthis.cornerRounding = value;\n\n\t}\n\n\t/**\n\t * Indicates whether corner detection is enabled.\n\t *\n\t * @type {Number}\n\t */\n\n\tget cornerDetection() {\n\n\t\treturn (this.defines.DISABLE_CORNER_DETECTION === undefined);\n\n\t}\n\n\tset cornerDetection(value) {\n\n\t\tif(value) {\n\n\t\t\tdelete this.defines.DISABLE_CORNER_DETECTION;\n\n\t\t} else {\n\n\t\t\tthis.defines.DISABLE_CORNER_DETECTION = \"1\";\n\n\t\t}\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Indicates whether corner rounding is enabled.\n\t *\n\t * @deprecated Use cornerDetection instead.\n\t * @return {Boolean} Whether corner rounding is enabled.\n\t */\n\n\tisCornerRoundingEnabled() {\n\n\t\treturn this.cornerDetection;\n\n\t}\n\n\t/**\n\t * Enables or disables corner rounding.\n\t *\n\t * @deprecated Use cornerDetection instead.\n\t * @param {Boolean} value - Whether corner rounding should be enabled.\n\t */\n\n\tsetCornerRoundingEnabled(value) {\n\n\t\tthis.cornerDetection = value;\n\n\t}\n\n\t/**\n\t * Sets the size of this object.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst uniforms = this.uniforms;\n\t\tuniforms.texelSize.value.set(1.0 / width, 1.0 / height);\n\t\tuniforms.resolution.value.set(width, height);\n\n\t}\n\n}\n", "import { BasicDepthPacking, Matrix4, NoBlending, PerspectiveCamera, ShaderMaterial, Uniform, Vector2 } from \"three\";\nimport { orthographicDepthToViewZ, viewZToOrthographicDepth } from \"../utils\";\n\nimport fragmentShader from \"./glsl/ssao.frag\";\nimport vertexShader from \"./glsl/ssao.vert\";\n\n/**\n * A Screen Space Ambient Occlusion (SSAO) shader material.\n *\n * @implements {Resizable}\n */\n\nexport class SSAOMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new SSAO material.\n\t *\n\t * @param {Camera} camera - A camera.\n\t */\n\n\tconstructor(camera) {\n\n\t\tsuper({\n\t\t\tname: \"SSAOMaterial\",\n\t\t\tdefines: {\n\t\t\t\tSAMPLES_INT: \"0\",\n\t\t\t\tSAMPLES_FLOAT: \"0.0\",\n\t\t\t\tSPIRAL_TURNS: \"0.0\",\n\t\t\t\tRADIUS: \"1.0\",\n\t\t\t\tRADIUS_SQ: \"1.0\",\n\t\t\t\tDISTANCE_SCALING: \"1\",\n\t\t\t\tDEPTH_PACKING: \"0\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tdepthBuffer: new Uniform(null),\n\t\t\t\tnormalBuffer: new Uniform(null),\n\t\t\t\tnormalDepthBuffer: new Uniform(null),\n\t\t\t\tnoiseTexture: new Uniform(null),\n\t\t\t\tinverseProjectionMatrix: new Uniform(new Matrix4()),\n\t\t\t\tprojectionMatrix: new Uniform(new Matrix4()),\n\t\t\t\ttexelSize: new Uniform(new Vector2()),\n\t\t\t\tcameraNearFar: new Uniform(new Vector2()),\n\t\t\t\tdistanceCutoff: new Uniform(new Vector2()),\n\t\t\t\tproximityCutoff: new Uniform(new Vector2()),\n\t\t\t\tnoiseScale: new Uniform(new Vector2()),\n\t\t\t\tminRadiusScale: new Uniform(0.33),\n\t\t\t\tintensity: new Uniform(1.0),\n\t\t\t\tfade: new Uniform(0.01),\n\t\t\t\tbias: new Uniform(0.0)\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t\tthis.adoptCameraSettings(camera);\n\n\t\t/**\n\t\t * The resolution.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @private\n\t\t */\n\n\t\tthis.resolution = new Vector2();\n\n\t\t/**\n\t\t * The relative sampling radius.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.r = 1.0;\n\n\t}\n\n\t/**\n\t * The current near plane setting.\n\t *\n\t * @type {Number}\n\t * @private\n\t */\n\n\tget near() {\n\n\t\treturn this.uniforms.cameraNearFar.value.x;\n\n\t}\n\n\t/**\n\t * The current far plane setting.\n\t *\n\t * @type {Number}\n\t * @private\n\t */\n\n\tget far() {\n\n\t\treturn this.uniforms.cameraNearFar.value.y;\n\n\t}\n\n\t/**\n\t * The combined normal-depth buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset normalDepthBuffer(value) {\n\n\t\tthis.uniforms.normalDepthBuffer.value = value;\n\n\t\tif(value !== null) {\n\n\t\t\tthis.defines.NORMAL_DEPTH = \"1\";\n\n\t\t} else {\n\n\t\t\tdelete this.defines.NORMAL_DEPTH;\n\n\t\t}\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the combined normal-depth buffer.\n\t *\n\t * @deprecated Use normalDepthBuffer instead.\n\t * @param {Number} value - The buffer.\n\t */\n\n\tsetNormalDepthBuffer(value) {\n\n\t\tthis.normalDepthBuffer = value;\n\n\t}\n\n\t/**\n\t * The normal buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset normalBuffer(value) {\n\n\t\tthis.uniforms.normalBuffer.value = value;\n\n\t}\n\n\t/**\n\t * Sets the normal buffer.\n\t *\n\t * @deprecated Use normalBuffer instead.\n\t * @param {Number} value - The buffer.\n\t */\n\n\tsetNormalBuffer(value) {\n\n\t\tthis.uniforms.normalBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The depth buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset depthBuffer(value) {\n\n\t\tthis.uniforms.depthBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The depth packing strategy.\n\t *\n\t * @type {DepthPackingStrategies}\n\t */\n\n\tset depthPacking(value) {\n\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the depth buffer.\n\t *\n\t * @deprecated Use depthBuffer and depthPacking instead.\n\t * @param {Texture} buffer - The depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing strategy.\n\t */\n\n\tsetDepthBuffer(buffer, depthPacking = BasicDepthPacking) {\n\n\t\tthis.depthBuffer = buffer;\n\t\tthis.depthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * The noise texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset noiseTexture(value) {\n\n\t\tthis.uniforms.noiseTexture.value = value;\n\n\t}\n\n\t/**\n\t * Sets the noise texture.\n\t *\n\t * @deprecated Use noiseTexture instead.\n\t * @param {Number} value - The texture.\n\t */\n\n\tsetNoiseTexture(value) {\n\n\t\tthis.uniforms.noiseTexture.value = value;\n\n\t}\n\n\t/**\n\t * The sample count.\n\t *\n\t * @type {Number}\n\t */\n\n\tget samples() {\n\n\t\treturn Number(this.defines.SAMPLES_INT);\n\n\t}\n\n\tset samples(value) {\n\n\t\tthis.defines.SAMPLES_INT = value.toFixed(0);\n\t\tthis.defines.SAMPLES_FLOAT = value.toFixed(1);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the amount of occlusion samples per pixel.\n\t *\n\t * @deprecated Use samples instead.\n\t * @return {Number} The sample count.\n\t */\n\n\tgetSamples() {\n\n\t\treturn this.samples;\n\n\t}\n\n\t/**\n\t * Sets the amount of occlusion samples per pixel.\n\t *\n\t * @deprecated Use samples instead.\n\t * @param {Number} value - The sample count.\n\t */\n\n\tsetSamples(value) {\n\n\t\tthis.samples = value;\n\n\t}\n\n\t/**\n\t * The sampling spiral ring count.\n\t *\n\t * @type {Number}\n\t */\n\n\tget rings() {\n\n\t\treturn Number(this.defines.SPIRAL_TURNS);\n\n\t}\n\n\tset rings(value) {\n\n\t\tthis.defines.SPIRAL_TURNS = value.toFixed(1);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Returns the amount of spiral turns in the occlusion sampling pattern.\n\t *\n\t * @deprecated Use rings instead.\n\t * @return {Number} The radius.\n\t */\n\n\tgetRings() {\n\n\t\treturn this.rings;\n\n\t}\n\n\t/**\n\t * Sets the amount of spiral turns in the occlusion sampling pattern.\n\t *\n\t * @deprecated Use rings instead.\n\t * @param {Number} value - The radius.\n\t */\n\n\tsetRings(value) {\n\n\t\tthis.rings = value;\n\n\t}\n\n\t/**\n\t * The intensity.\n\t *\n\t * @type {Number}\n\t */\n\n\tget intensity() {\n\n\t\treturn this.uniforms.intensity.value;\n\n\t}\n\n\tset intensity(value) {\n\n\t\tthis.uniforms.intensity.value = value;\n\n\t}\n\n\t/**\n\t * Returns the intensity.\n\t *\n\t * @deprecated Use intensity instead.\n\t * @return {Number} The intensity.\n\t */\n\n\tgetIntensity() {\n\n\t\treturn this.uniforms.intensity.value;\n\n\t}\n\n\t/**\n\t * Sets the intensity.\n\t *\n\t * @deprecated Use intensity instead.\n\t * @param {Number} value - The intensity.\n\t */\n\n\tsetIntensity(value) {\n\n\t\tthis.uniforms.intensity.value = value;\n\n\t}\n\n\t/**\n\t * The depth fade factor.\n\t *\n\t * @type {Number}\n\t */\n\n\tget fade() {\n\n\t\treturn this.uniforms.fade.value;\n\n\t}\n\n\tset fade(value) {\n\n\t\tthis.uniforms.fade.value = value;\n\n\t}\n\n\t/**\n\t * Returns the depth fade factor.\n\t *\n\t * @deprecated Use fade instead.\n\t * @return {Number} The fade factor.\n\t */\n\n\tgetFade() {\n\n\t\treturn this.uniforms.fade.value;\n\n\t}\n\n\t/**\n\t * Sets the depth fade factor.\n\t *\n\t * @deprecated Use fade instead.\n\t * @param {Number} value - The fade factor.\n\t */\n\n\tsetFade(value) {\n\n\t\tthis.uniforms.fade.value = value;\n\n\t}\n\n\t/**\n\t * The depth bias. Range: [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget bias() {\n\n\t\treturn this.uniforms.bias.value;\n\n\t}\n\n\tset bias(value) {\n\n\t\tthis.uniforms.bias.value = value;\n\n\t}\n\n\t/**\n\t * Returns the depth bias.\n\t *\n\t * @deprecated Use bias instead.\n\t * @return {Number} The bias.\n\t */\n\n\tgetBias() {\n\n\t\treturn this.uniforms.bias.value;\n\n\t}\n\n\t/**\n\t * Sets the depth bias.\n\t *\n\t * @deprecated Use bias instead.\n\t * @param {Number} value - The bias.\n\t */\n\n\tsetBias(value) {\n\n\t\tthis.uniforms.bias.value = value;\n\n\t}\n\n\t/**\n\t * The minimum radius scale for distance scaling. Range: [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget minRadiusScale() {\n\n\t\treturn this.uniforms.minRadiusScale.value;\n\n\t}\n\n\tset minRadiusScale(value) {\n\n\t\tthis.uniforms.minRadiusScale.value = value;\n\n\t}\n\n\t/**\n\t * Returns the minimum radius scale for distance scaling.\n\t *\n\t * @deprecated Use minRadiusScale instead.\n\t * @return {Number} The minimum radius scale.\n\t */\n\n\tgetMinRadiusScale() {\n\n\t\treturn this.uniforms.minRadiusScale.value;\n\n\t}\n\n\t/**\n\t * Sets the minimum radius scale for distance scaling.\n\t *\n\t * @deprecated Use minRadiusScale instead.\n\t * @param {Number} value - The minimum radius scale.\n\t */\n\n\tsetMinRadiusScale(value) {\n\n\t\tthis.uniforms.minRadiusScale.value = value;\n\n\t}\n\n\t/**\n\t * Updates the absolute radius.\n\t *\n\t * @private\n\t */\n\n\tupdateRadius() {\n\n\t\tconst radius = this.r * this.resolution.height;\n\t\tthis.defines.RADIUS = radius.toFixed(11);\n\t\tthis.defines.RADIUS_SQ = (radius * radius).toFixed(11);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * The occlusion sampling radius. Range: [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget radius() {\n\n\t\treturn this.r;\n\n\t}\n\n\tset radius(value) {\n\n\t\tthis.r = Math.min(Math.max(value, 1e-6), 1.0);\n\t\tthis.updateRadius();\n\n\t}\n\n\t/**\n\t * Returns the occlusion sampling radius.\n\t *\n\t * @deprecated Use radius instead.\n\t * @return {Number} The radius.\n\t */\n\n\tgetRadius() {\n\n\t\treturn this.radius;\n\n\t}\n\n\t/**\n\t * Sets the occlusion sampling radius.\n\t *\n\t * @deprecated Use radius instead.\n\t * @param {Number} value - The radius. Range [1e-6, 1.0].\n\t */\n\n\tsetRadius(value) {\n\n\t\tthis.radius = value;\n\n\t}\n\n\t/**\n\t * Indicates whether distance-based radius scaling is enabled.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget distanceScaling() {\n\n\t\treturn (this.defines.DISTANCE_SCALING !== undefined);\n\n\t}\n\n\tset distanceScaling(value) {\n\n\t\tif(this.isDistanceScalingEnabled() !== value) {\n\n\t\t\tif(value) {\n\n\t\t\t\tthis.defines.DISTANCE_SCALING = \"1\";\n\n\t\t\t} else {\n\n\t\t\t\tdelete this.defines.DISTANCE_SCALING;\n\n\t\t\t}\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indicates whether distance-based radius scaling is enabled.\n\t *\n\t * @deprecated Use distanceScaling instead.\n\t * @return {Boolean} Whether distance scaling is enabled.\n\t */\n\n\tisDistanceScalingEnabled() {\n\n\t\treturn this.distanceScaling;\n\n\t}\n\n\t/**\n\t * Enables or disables distance-based radius scaling.\n\t *\n\t * @deprecated Use distanceScaling instead.\n\t * @param {Boolean} value - Whether distance scaling should be enabled.\n\t */\n\n\tsetDistanceScalingEnabled(value) {\n\n\t\tthis.distanceScaling = value;\n\n\t}\n\n\t/**\n\t * The occlusion distance threshold. Range: [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget distanceThreshold() {\n\n\t\treturn this.uniforms.distanceCutoff.value.x;\n\n\t}\n\n\tset distanceThreshold(value) {\n\n\t\tthis.uniforms.distanceCutoff.value.set(\n\t\t\tMath.min(Math.max(value, 0.0), 1.0),\n\t\t\tMath.min(Math.max(value + this.distanceFalloff, 0.0), 1.0)\n\t\t);\n\n\t}\n\n\t/**\n\t * The occlusion distance threshold in world units.\n\t *\n\t * @type {Number}\n\t */\n\n\tget worldDistanceThreshold() {\n\n\t\treturn -orthographicDepthToViewZ(this.distanceThreshold, this.near, this.far);\n\n\t}\n\n\tset worldDistanceThreshold(value) {\n\n\t\tthis.distanceThreshold = viewZToOrthographicDepth(-value, this.near, this.far);\n\n\t}\n\n\t/**\n\t * The occlusion distance falloff. Range: [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget distanceFalloff() {\n\n\t\treturn this.uniforms.distanceCutoff.value.y - this.distanceThreshold;\n\n\t}\n\n\tset distanceFalloff(value) {\n\n\t\tthis.uniforms.distanceCutoff.value.y = Math.min(Math.max(this.distanceThreshold + value, 0.0), 1.0);\n\n\t}\n\n\t/**\n\t * The occlusion distance falloff in world units.\n\t *\n\t * @type {Number}\n\t */\n\n\tget worldDistanceFalloff() {\n\n\t\treturn -orthographicDepthToViewZ(this.distanceFalloff, this.near, this.far);\n\n\t}\n\n\tset worldDistanceFalloff(value) {\n\n\t\tthis.distanceFalloff = viewZToOrthographicDepth(-value, this.near, this.far);\n\n\t}\n\n\t/**\n\t * Sets the occlusion distance cutoff.\n\t *\n\t * @deprecated Use distanceThreshold and distanceFalloff instead.\n\t * @param {Number} threshold - The distance threshold. Range [0.0, 1.0].\n\t * @param {Number} falloff - The falloff. Range [0.0, 1.0].\n\t */\n\n\tsetDistanceCutoff(threshold, falloff) {\n\n\t\tthis.uniforms.distanceCutoff.value.set(\n\t\t\tMath.min(Math.max(threshold, 0.0), 1.0),\n\t\t\tMath.min(Math.max(threshold + falloff, 0.0), 1.0)\n\t\t);\n\n\t}\n\n\t/**\n\t * The occlusion proximity threshold. Range: [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget proximityThreshold() {\n\n\t\treturn this.uniforms.proximityCutoff.value.x;\n\n\t}\n\n\tset proximityThreshold(value) {\n\n\t\tthis.uniforms.proximityCutoff.value.set(\n\t\t\tMath.min(Math.max(value, 0.0), 1.0),\n\t\t\tMath.min(Math.max(value + this.proximityFalloff, 0.0), 1.0)\n\t\t);\n\n\t}\n\n\t/**\n\t * The occlusion proximity threshold in world units.\n\t *\n\t * @type {Number}\n\t */\n\n\tget worldProximityThreshold() {\n\n\t\treturn -orthographicDepthToViewZ(this.proximityThreshold, this.near, this.far);\n\n\t}\n\n\tset worldProximityThreshold(value) {\n\n\t\tthis.proximityThreshold = viewZToOrthographicDepth(-value, this.near, this.far);\n\n\t}\n\n\t/**\n\t * The occlusion proximity falloff. Range: [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget proximityFalloff() {\n\n\t\treturn this.uniforms.proximityCutoff.value.y - this.proximityThreshold;\n\n\t}\n\n\tset proximityFalloff(value) {\n\n\t\tthis.uniforms.proximityCutoff.value.y = Math.min(Math.max(this.proximityThreshold + value, 0.0), 1.0);\n\n\t}\n\n\t/**\n\t * The occlusion proximity falloff in world units.\n\t *\n\t * @type {Number}\n\t */\n\n\tget worldProximityFalloff() {\n\n\t\treturn -orthographicDepthToViewZ(this.proximityFalloff, this.near, this.far);\n\n\t}\n\n\tset worldProximityFalloff(value) {\n\n\t\tthis.proximityFalloff = viewZToOrthographicDepth(-value, this.near, this.far);\n\n\t}\n\n\t/**\n\t * Sets the occlusion proximity cutoff.\n\t *\n\t * @deprecated Use proximityThreshold and proximityFalloff instead.\n\t * @param {Number} threshold - The range threshold. Range [0.0, 1.0].\n\t * @param {Number} falloff - The falloff. Range [0.0, 1.0].\n\t */\n\n\tsetProximityCutoff(threshold, falloff) {\n\n\t\tthis.uniforms.proximityCutoff.value.set(\n\t\t\tMath.min(Math.max(threshold, 0.0), 1.0),\n\t\t\tMath.min(Math.max(threshold + falloff, 0.0), 1.0)\n\t\t);\n\n\t}\n\n\t/**\n\t * Sets the texel size.\n\t *\n\t * @deprecated Use setSize() instead.\n\t * @param {Number} x - The texel width.\n\t * @param {Number} y - The texel height.\n\t */\n\n\tsetTexelSize(x, y) {\n\n\t\tthis.uniforms.texelSize.value.set(x, y);\n\n\t}\n\n\t/**\n\t * Adopts the settings of the given camera.\n\t *\n\t * @param {Camera} camera - A camera.\n\t */\n\n\tadoptCameraSettings(camera) {\n\n\t\tif(camera) {\n\n\t\t\tthis.uniforms.cameraNearFar.value.set(camera.near, camera.far);\n\t\t\tthis.uniforms.projectionMatrix.value.copy(camera.projectionMatrix);\n\t\t\tthis.uniforms.inverseProjectionMatrix.value.copy(camera.projectionMatrix).invert();\n\n\t\t\tif(camera instanceof PerspectiveCamera) {\n\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\n\n\t\t\t} else {\n\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\n\n\t\t\t}\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets the size of this object.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst uniforms = this.uniforms;\n\t\tconst noiseTexture = uniforms.noiseTexture.value;\n\n\t\tif(noiseTexture !== null) {\n\n\t\t\tuniforms.noiseScale.value.set(\n\t\t\t\twidth / noiseTexture.image.width,\n\t\t\t\theight / noiseTexture.image.height\n\t\t\t);\n\n\t\t}\n\n\t\tuniforms.texelSize.value.set(1.0 / width, 1.0 / height);\n\t\tthis.resolution.set(width, height);\n\t\tthis.updateRadius();\n\n\t}\n\n}\n", "import { NoBlending, ShaderMaterial, Uniform, Vector2 } from \"three\";\n\nimport fragmentShader from \"./glsl/convolution.upsampling.frag\";\nimport vertexShader from \"./glsl/common.vert\";\n\n/**\n * An upsampling material.\n *\n * Based on an article by Fabrice Piquet\n * https://www.froyok.fr/blog/2021-12-ue4-custom-bloom/\n *\n * @implements {Resizable}\n */\n\nexport class UpsamplingMaterial extends ShaderMaterial {\n\n\t/**\n\t * Constructs a new upsampling material.\n\t */\n\n\tconstructor() {\n\n\t\tsuper({\n\t\t\tname: \"UpsamplingMaterial\",\n\t\t\tdefines: {\n\t\t\t\tSAMPLES: \"9\"\n\t\t\t},\n\t\t\tuniforms: {\n\t\t\t\tinputBuffer: new Uniform(null),\n\t\t\t\tsupportBuffer: new Uniform(null),\n\t\t\t\ttexelSize: new Uniform(new Vector2()),\n\t\t\t\tradius: new Uniform(0.85),\n\t\t\t\tkernel: new Uniform(new Float32Array([\n\t\t\t\t\t-1.0, 1.0, 0.0625, 0.0, 1.0, 0.125, 1.0, 1.0, 0.0625,\n\t\t\t\t\t-1.0, 0.0, 0.125, 0.0, 0.0, 0.25, 1.0, 0.0, 0.125,\n\t\t\t\t\t-1.0, -1.0, 0.0625, 0.0, -1.0, 0.125, 1.0, -1.0, 0.0625\n\t\t\t\t]))\n\t\t\t},\n\t\t\tblending: NoBlending,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t\tfragmentShader,\n\t\t\tvertexShader\n\t\t});\n\n\t\t/** @ignore */\n\t\tthis.toneMapped = false;\n\n\t}\n\n\t/**\n\t * The input buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset inputBuffer(value) {\n\n\t\tthis.uniforms.inputBuffer.value = value;\n\n\t}\n\n\t/**\n\t * A support buffer.\n\t *\n\t * @type {Texture}\n\t */\n\n\tset supportBuffer(value) {\n\n\t\tthis.uniforms.supportBuffer.value = value;\n\n\t}\n\n\t/**\n\t * The blur radius.\n\t *\n\t * @type {Number}\n\t */\n\n\tget radius() {\n\n\t\treturn this.uniforms.radius.value;\n\n\t}\n\n\tset radius(value) {\n\n\t\tthis.uniforms.radius.value = value;\n\n\t}\n\n\t/**\n\t * Sets the size of this object.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.uniforms.texelSize.value.set(1.0 / width, 1.0 / height);\n\n\t}\n\n}\n", "import { LinearFilter, sRGBEncoding, UnsignedByteType, WebGLRenderTarget } from \"three\";\nimport { CopyMaterial } from \"../materials\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A pass that copies the contents of an input buffer to another render target.\n */\n\nexport class CopyPass extends Pass {\n\n\t/**\n\t * Constructs a new save pass.\n\t *\n\t * @param {WebGLRenderTarget} [renderTarget] - A render target.\n\t * @param {Boolean} [autoResize=true] - Whether the render target size should be updated automatically.\n\t */\n\n\tconstructor(renderTarget, autoResize = true) {\n\n\t\tsuper(\"CopyPass\");\n\n\t\tthis.fullscreenMaterial = new CopyMaterial();\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * The render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTarget = renderTarget;\n\n\t\tif(renderTarget === undefined) {\n\n\t\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\n\t\t\t\tminFilter: LinearFilter,\n\t\t\t\tmagFilter: LinearFilter,\n\t\t\t\tstencilBuffer: false,\n\t\t\t\tdepthBuffer: false\n\t\t\t});\n\n\t\t\tthis.renderTarget.texture.name = \"CopyPass.Target\";\n\n\t\t}\n\n\t\t/**\n\t\t * Enables or disables auto resizing of the render target.\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\n\t\tthis.autoResize = autoResize;\n\n\t}\n\n\t/**\n\t * Enables or disables auto resizing of the render target.\n\t *\n\t * @deprecated Use autoResize instead.\n\t * @type {Boolean}\n\t */\n\n\tget resize() {\n\n\t\treturn this.autoResize;\n\n\t}\n\n\tset resize(value) {\n\n\t\tthis.autoResize = value;\n\n\t}\n\n\t/**\n\t * The output texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget texture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * Returns the output texture.\n\t *\n\t * @deprecated Use texture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetTexture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * Enables or disables auto resizing of the render target.\n\t *\n\t * @deprecated Use autoResize instead.\n\t * @param {Boolean} value - Whether the render target size should be updated automatically.\n\t */\n\n\tsetAutoResizeEnabled(value) {\n\n\t\tthis.autoResize = value;\n\n\t}\n\n\t/**\n\t * Saves the input buffer.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tthis.fullscreenMaterial.inputBuffer = inputBuffer.texture;\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n\t\trenderer.render(this.scene, this.camera);\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tif(this.autoResize) {\n\n\t\t\tthis.renderTarget.setSize(width, height);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - A renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tif(frameBufferType !== undefined) {\n\n\t\t\tthis.renderTarget.texture.type = frameBufferType;\n\n\t\t\tif(frameBufferType !== UnsignedByteType) {\n\n\t\t\t\tthis.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n\n\t\t\t} else if(renderer.outputEncoding === sRGBEncoding) {\n\n\t\t\t\tthis.renderTarget.texture.encoding = sRGBEncoding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n", "import { BasicDepthPacking, BufferAttribute, BufferGeometry, Camera, Mesh, Scene } from \"three\";\n\nconst dummyCamera = new Camera();\nlet geometry = null;\n\n/**\n * Returns a shared fullscreen triangle.\n *\n * The screen size is 2x2 units (NDC). A triangle needs to be 4x4 units to fill the screen.\n *\n * @private\n * @return {BufferGeometry} The fullscreen geometry.\n */\n\nfunction getFullscreenTriangle() {\n\n\tif(geometry === null) {\n\n\t\tconst vertices = new Float32Array([-1, -1, 0, 3, -1, 0, -1, 3, 0]);\n\t\tconst uvs = new Float32Array([0, 0, 2, 0, 0, 2]);\n\t\tgeometry = new BufferGeometry();\n\n\t\t// Added for backward compatibility (setAttribute was added in three r110).\n\t\tif(geometry.setAttribute !== undefined) {\n\n\t\t\tgeometry.setAttribute(\"position\", new BufferAttribute(vertices, 3));\n\t\t\tgeometry.setAttribute(\"uv\", new BufferAttribute(uvs, 2));\n\n\t\t} else {\n\n\t\t\tgeometry.addAttribute(\"position\", new BufferAttribute(vertices, 3));\n\t\t\tgeometry.addAttribute(\"uv\", new BufferAttribute(uvs, 2));\n\n\t\t}\n\n\t}\n\n\treturn geometry;\n\n}\n\n/**\n * An abstract pass.\n *\n * Fullscreen passes use a shared fullscreen triangle:\n * https://michaldrobot.com/2014/04/01/gcn-execution-patterns-in-full-screen-passes/\n *\n * @implements {Initializable}\n * @implements {Resizable}\n * @implements {Disposable}\n */\n\nexport class Pass {\n\n\t/**\n\t * Constructs a new pass.\n\t *\n\t * @param {String} [name] - The name of this pass. Does not have to be unique.\n\t * @param {Scene} [scene] - The scene to render. The default scene contains a single mesh that fills the screen.\n\t * @param {Camera} [camera] - A camera. Fullscreen effect passes don't require a camera.\n\t */\n\n\tconstructor(name = \"Pass\", scene = new Scene(), camera = dummyCamera) {\n\n\t\t/**\n\t\t * The name of this pass.\n\t\t *\n\t\t * @type {String}\n\t\t */\n\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * The renderer.\n\t\t *\n\t\t * @deprecated\n\t\t * @type {WebGLRenderer}\n\t\t * @protected\n\t\t */\n\n\t\tthis.renderer = null;\n\n\t\t/**\n\t\t * The scene to render.\n\t\t *\n\t\t * @type {Scene}\n\t\t * @protected\n\t\t */\n\n\t\tthis.scene = scene;\n\n\t\t/**\n\t\t * The camera.\n\t\t *\n\t\t * @type {Camera}\n\t\t * @protected\n\t\t */\n\n\t\tthis.camera = camera;\n\n\t\t/**\n\t\t * A mesh that fills the screen.\n\t\t *\n\t\t * @type {Mesh}\n\t\t * @private\n\t\t */\n\n\t\tthis.screen = null;\n\n\t\t/**\n\t\t * Indicates whether this pass should render to texture.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\n\t\tthis.rtt = true;\n\n\t\t/**\n\t\t * Only relevant for subclassing.\n\t\t *\n\t\t * Indicates whether the {@link EffectComposer} should swap the frame buffers after this pass has finished\n\t\t * rendering. Set this to `false` if this pass doesn't render to the output buffer or the screen. Otherwise, the\n\t\t * contents of the input buffer will be lost.\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\n\t\tthis.needsSwap = true;\n\n\t\t/**\n\t\t * Only relevant for subclassing.\n\t\t *\n\t\t * Indicates whether the {@link EffectComposer} should prepare a depth texture for this pass.\n\t\t * Set this to `true` if this pass relies on depth information from a preceding {@link RenderPass}.\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\n\t\tthis.needsDepthTexture = false;\n\n\t\t/**\n\t\t * Indicates whether this pass is enabled.\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\n\t\tthis.enabled = true;\n\n\t}\n\n\t/**\n\t * Indicates whether this pass should render to screen.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget renderToScreen() {\n\n\t\treturn !this.rtt;\n\n\t}\n\n\t/**\n\t * Sets the render to screen flag.\n\t *\n\t * If this flag is changed, the fullscreen material will be updated as well.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tset renderToScreen(value) {\n\n\t\tif(this.rtt === value) {\n\n\t\t\tconst material = this.getFullscreenMaterial();\n\n\t\t\tif(material !== null) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tthis.rtt = !value;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets the renderer\n\t *\n\t * @deprecated\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t */\n\n\tsetRenderer(renderer) {\n\n\t\tthis.renderer = renderer;\n\n\t}\n\n\t/**\n\t * Indicates whether this pass is enabled.\n\t *\n\t * @deprecated Use enabled instead.\n\t * @return {Boolean} Whether this pass is enabled.\n\t */\n\n\tisEnabled() {\n\n\t\treturn this.enabled;\n\n\t}\n\n\t/**\n\t * Enables or disables this pass.\n\t *\n\t * @deprecated Use enabled instead.\n\t * @param {Boolean} value - Whether the pass should be enabled.\n\t */\n\n\tsetEnabled(value) {\n\n\t\tthis.enabled = value;\n\n\t}\n\n\t/**\n\t * The fullscreen material.\n\t *\n\t * @type {Material}\n\t */\n\n\tget fullscreenMaterial() {\n\n\t\treturn (this.screen !== null) ? this.screen.material : null;\n\n\t}\n\n\tset fullscreenMaterial(value) {\n\n\t\tlet screen = this.screen;\n\n\t\tif(screen !== null) {\n\n\t\t\tscreen.material = value;\n\n\t\t} else {\n\n\t\t\tscreen = new Mesh(getFullscreenTriangle(), value);\n\t\t\tscreen.frustumCulled = false;\n\n\t\t\tif(this.scene === null) {\n\n\t\t\t\tthis.scene = new Scene();\n\n\t\t\t}\n\n\t\t\tthis.scene.add(screen);\n\t\t\tthis.screen = screen;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the current fullscreen material.\n\t *\n\t * @deprecated Use fullscreenMaterial instead.\n\t * @return {Material} The current fullscreen material, or null if there is none.\n\t */\n\n\tgetFullscreenMaterial() {\n\n\t\treturn this.fullscreenMaterial;\n\n\t}\n\n\t/**\n\t * Sets the fullscreen material.\n\t *\n\t * @deprecated Use fullscreenMaterial instead.\n\t * @protected\n\t * @param {Material} value - A fullscreen material.\n\t */\n\n\tsetFullscreenMaterial(value) {\n\n\t\tthis.fullscreenMaterial = value;\n\n\t}\n\n\t/**\n\t * Returns the current depth texture.\n\t *\n\t * @return {Texture} The current depth texture, or null if there is none.\n\t */\n\n\tgetDepthTexture() {\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Sets the depth texture.\n\t *\n\t * This method will be called automatically by the {@link EffectComposer}.\n\t * You may override this method if your pass relies on the depth information of a preceding {@link RenderPass}.\n\t *\n\t * @param {Texture} depthTexture - A depth texture.\n\t * @param {DepthPackingStrategy} [depthPacking=BasicDepthPacking] - The depth packing.\n\t */\n\n\tsetDepthTexture(depthTexture, depthPacking = BasicDepthPacking) {}\n\n\t/**\n\t * Renders this pass.\n\t *\n\t * This is an abstract method that must be overridden.\n\t *\n\t * @abstract\n\t * @throws {Error} An error is thrown if the method is not overridden.\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tthrow new Error(\"Render method not implemented!\");\n\n\t}\n\n\t/**\n\t * Sets the size.\n\t *\n\t * You may override this method if you want to be informed about the size of the backbuffer/canvas.\n\t * This method is called before {@link initialize} and every time the size of the {@link EffectComposer} changes.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * This method is called when this pass is added to an {@link EffectComposer}.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {}\n\n\t/**\n\t * Performs a shallow search for disposable properties and deletes them.\n\t *\n\t * The {@link EffectComposer} calls this method when it is being destroyed. You can use it independently to free\n\t * memory when you're certain that you don't need this pass anymore.\n\t */\n\n\tdispose() {\n\n\t\tfor(const key of Object.keys(this)) {\n\n\t\t\tconst property = this[key];\n\n\t\t\tif(property !== null && typeof property.dispose === \"function\") {\n\n\t\t\t\tif(property instanceof Scene || property === this.renderer) {\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t/** @ignore */\n\t\t\t\tthis[key].dispose();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n", "import { Pass } from \"./Pass\";\n\n/**\n * A pass that disables the stencil test.\n */\n\nexport class ClearMaskPass extends Pass {\n\n\t/**\n\t * Constructs a new clear mask pass.\n\t */\n\n\tconstructor() {\n\n\t\tsuper(\"ClearMaskPass\", null, null);\n\t\tthis.needsSwap = false;\n\n\t}\n\n\t/**\n\t * Disables the global stencil test.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst stencil = renderer.state.buffers.stencil;\n\t\tstencil.setLocked(false);\n\t\tstencil.setTest(false);\n\n\t}\n\n}\n", "import { Color } from \"three\";\nimport { Pass } from \"./Pass\";\n\nconst color = new Color();\n\n/**\n * A pass that clears the input buffer or the screen.\n */\n\nexport class ClearPass extends Pass {\n\n\t/**\n\t * Constructs a new clear pass.\n\t *\n\t * @param {Boolean} [color=true] - Determines whether the color buffer should be cleared.\n\t * @param {Boolean} [depth=true] - Determines whether the depth buffer should be cleared.\n\t * @param {Boolean} [stencil=false] - Determines whether the stencil buffer should be cleared.\n\t */\n\n\tconstructor(color = true, depth = true, stencil = false) {\n\n\t\tsuper(\"ClearPass\", null, null);\n\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * Indicates whether the color buffer should be cleared.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @deprecated Use setClearFlags() instead.\n\t\t */\n\n\t\tthis.color = color;\n\n\t\t/**\n\t\t * Indicates whether the depth buffer should be cleared.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @deprecated Use setClearFlags() instead.\n\t\t */\n\n\t\tthis.depth = depth;\n\n\t\t/**\n\t\t * Indicates whether the stencil buffer should be cleared.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @deprecated Use setClearFlags() instead.\n\t\t */\n\n\t\tthis.stencil = stencil;\n\n\t\t/**\n\t\t * An override clear color. Default is null.\n\t\t *\n\t\t * @type {Color}\n\t\t */\n\n\t\tthis.overrideClearColor = null;\n\n\t\t/**\n\t\t * An override clear alpha. Default is -1.\n\t\t *\n\t\t * @type {Number}\n\t\t */\n\n\t\tthis.overrideClearAlpha = -1;\n\n\t}\n\n\t/**\n\t * Sets the clear flags.\n\t *\n\t * @param {Boolean} color - Whether the color buffer should be cleared.\n\t * @param {Boolean} depth - Whether the depth buffer should be cleared.\n\t * @param {Boolean} stencil - Whether the stencil buffer should be cleared.\n\t */\n\n\tsetClearFlags(color, depth, stencil) {\n\n\t\tthis.color = color;\n\t\tthis.depth = depth;\n\t\tthis.stencil = stencil;\n\n\t}\n\n\t/**\n\t * Returns the override clear color. Default is null.\n\t *\n\t * @deprecated Use overrideClearColor instead.\n\t * @return {Color} The clear color.\n\t */\n\n\tgetOverrideClearColor() {\n\n\t\treturn this.overrideClearColor;\n\n\t}\n\n\t/**\n\t * Sets the override clear color.\n\t *\n\t * @deprecated Use overrideClearColor instead.\n\t * @param {Color} value - The clear color.\n\t */\n\n\tsetOverrideClearColor(value) {\n\n\t\tthis.overrideClearColor = value;\n\n\t}\n\n\t/**\n\t * Returns the override clear alpha. Default is -1.\n\t *\n\t * @deprecated Use overrideClearAlpha instead.\n\t * @return {Number} The clear alpha.\n\t */\n\n\tgetOverrideClearAlpha() {\n\n\t\treturn this.overrideClearAlpha;\n\n\t}\n\n\t/**\n\t * Sets the override clear alpha.\n\t *\n\t * @deprecated Use overrideClearAlpha instead.\n\t * @param {Number} value - The clear alpha.\n\t */\n\n\tsetOverrideClearAlpha(value) {\n\n\t\tthis.overrideClearAlpha = value;\n\n\t}\n\n\t/**\n\t * Clears the input buffer or the screen.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst overrideClearColor = this.overrideClearColor;\n\t\tconst overrideClearAlpha = this.overrideClearAlpha;\n\t\tconst clearAlpha = renderer.getClearAlpha();\n\n\t\tconst hasOverrideClearColor = (overrideClearColor !== null);\n\t\tconst hasOverrideClearAlpha = (overrideClearAlpha >= 0);\n\n\t\tif(hasOverrideClearColor) {\n\n\t\t\t/* TODO Remove extra copy operation and raise peer dependency version:\n\t\t\trenderer.getClearColor() expects a target since three r124. */\n\t\t\tcolor.copy(renderer.getClearColor(color));\n\t\t\trenderer.setClearColor(overrideClearColor, hasOverrideClearAlpha ? overrideClearAlpha : clearAlpha);\n\n\t\t} else if(hasOverrideClearAlpha) {\n\n\t\t\trenderer.setClearAlpha(overrideClearAlpha);\n\n\t\t}\n\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : inputBuffer);\n\t\trenderer.clear(this.color, this.depth, this.stencil);\n\n\t\tif(hasOverrideClearColor) {\n\n\t\t\trenderer.setClearColor(color, clearAlpha);\n\n\t\t} else if(hasOverrideClearAlpha) {\n\n\t\t\trenderer.setClearAlpha(clearAlpha);\n\n\t\t}\n\n\t}\n\n}\n", "import { Color, MeshDepthMaterial, NearestFilter, RGBADepthPacking, WebGLRenderTarget } from \"three\";\nimport { Resolution } from \"../core/Resolution\";\nimport { Pass } from \"./Pass\";\nimport { RenderPass } from \"./RenderPass\";\n\n/**\n * A pass that renders depth into an RGBA buffer.\n */\n\nexport class DepthPass extends Pass {\n\n\t/**\n\t * Constructs a new depth pass.\n\t *\n\t * @param {Scene} scene - The scene to render.\n\t * @param {Camera} camera - The camera to use to render the scene.\n\t * @param {Object} [options] - The options.\n\t * @param {WebGLRenderTarget} [options.renderTarget] - A custom render target.\n\t * @param {Number} [options.resolutionScale=1.0] - The resolution scale.\n\t * @param {Number} [options.resolutionX=Resolution.AUTO_SIZE] - The horizontal resolution.\n\t * @param {Number} [options.resolutionY=Resolution.AUTO_SIZE] - The vertical resolution.\n\t * @param {Number} [options.width=Resolution.AUTO_SIZE] - Deprecated. Use resolutionX instead.\n\t * @param {Number} [options.height=Resolution.AUTO_SIZE] - Deprecated. Use resolutionY instead.\n\t */\n\n\tconstructor(scene, camera, {\n\t\trenderTarget,\n\t\tresolutionScale = 1.0,\n\t\twidth = Resolution.AUTO_SIZE,\n\t\theight = Resolution.AUTO_SIZE,\n\t\tresolutionX = width,\n\t\tresolutionY = height\n\t} = {}) {\n\n\t\tsuper(\"DepthPass\");\n\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * A render pass.\n\t\t *\n\t\t * @type {RenderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderPass = new RenderPass(scene, camera, new MeshDepthMaterial({\n\t\t\tdepthPacking: RGBADepthPacking\n\t\t}));\n\n\t\tconst renderPass = this.renderPass;\n\t\trenderPass.skipShadowMapUpdate = true;\n\t\trenderPass.ignoreBackground = true;\n\n\t\tconst clearPass = renderPass.getClearPass();\n\t\tclearPass.overrideClearColor = new Color(0xffffff);\n\t\tclearPass.overrideClearAlpha = 1;\n\n\t\t/**\n\t\t * A render target that contains the scene depth.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.renderTarget = renderTarget;\n\n\t\tif(this.renderTarget === undefined) {\n\n\t\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\n\t\t\t\tminFilter: NearestFilter,\n\t\t\t\tmagFilter: NearestFilter\n\t\t\t});\n\n\t\t\tthis.renderTarget.texture.name = \"DepthPass.Target\";\n\n\t\t}\n\n\t\t/**\n\t\t * The resolution.\n\t\t *\n\t\t * @type {Resolution}\n\t\t */\n\n\t\tconst resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n\t\tresolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n\n\t}\n\n\t/**\n\t * The depth texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget texture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * Returns the depth texture.\n\t *\n\t * @deprecated Use texture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetTexture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * Returns the resolution settings.\n\t *\n\t * @deprecated Use resolution instead.\n\t * @return {Resolution} The resolution.\n\t */\n\n\tgetResolution() {\n\n\t\treturn this.resolution;\n\n\t}\n\n\t/**\n\t * Returns the current resolution scale.\n\t *\n\t * @return {Number} The resolution scale.\n\t * @deprecated Use resolution instead.\n\t */\n\n\tgetResolutionScale() {\n\n\t\treturn this.resolution.scale;\n\n\t}\n\n\t/**\n\t * Sets the resolution scale.\n\t *\n\t * @param {Number} scale - The new resolution scale.\n\t * @deprecated Use resolution instead.\n\t */\n\n\tsetResolutionScale(scale) {\n\n\t\tthis.resolution.scale = scale;\n\n\t}\n\n\t/**\n\t * Renders the scene depth.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst renderTarget = this.renderToScreen ? null : this.renderTarget;\n\t\tthis.renderPass.render(renderer, renderTarget);\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.setBaseSize(width, height);\n\t\tthis.renderTarget.setSize(resolution.width, resolution.height);\n\n\t}\n\n}\n", "import { EventDispatcher, Vector2 } from \"three\";\n\nconst AUTO_SIZE = -1;\n\n/**\n * A resolution.\n */\n\nexport class Resolution extends EventDispatcher {\n\n\t/**\n\t * Constructs a new resolution.\n\t *\n\t * TODO Remove resizable param.\n\t * @param {Resizable} resizeable - A resizable object.\n\t * @param {Number} [width=Resolution.AUTO_SIZE] - The preferred width.\n\t * @param {Number} [height=Resolution.AUTO_SIZE] - The preferred height.\n\t * @param {Number} [scale=1.0] - A resolution scale.\n\t */\n\n\tconstructor(resizable, width = AUTO_SIZE, height = AUTO_SIZE, scale = 1.0) {\n\n\t\tsuper();\n\n\t\t/**\n\t\t * A resizable object.\n\t\t *\n\t\t * @type {Resizable}\n\t\t * @deprecated Use an event listener for \"change\" events instead.\n\t\t */\n\n\t\tthis.resizable = resizable;\n\n\t\t/**\n\t\t * The base resolution.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @private\n\t\t */\n\n\t\tthis.base = new Vector2(1, 1);\n\n\t\t/**\n\t\t * The preferred resolution.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @private\n\t\t */\n\n\t\tthis.preferred = new Vector2(width, height);\n\n\t\t/**\n\t\t * The preferred resolution.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @deprecated Added for backward-compatibility.\n\t\t */\n\n\t\tthis.target = this.preferred;\n\n\t\t/**\n\t\t * A resolution scale.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.s = scale;\n\n\t}\n\n\t/**\n\t * The effective width.\n\t *\n\t * If the preferred width and height are set to {@link Resizer.AUTO_SIZE}, the base width will be returned.\n\t *\n\t * @type {Number}\n\t */\n\n\tget width() {\n\n\t\tconst { base, preferred, scale } = this;\n\n\t\tlet result;\n\n\t\tif(preferred.width !== AUTO_SIZE) {\n\n\t\t\tresult = preferred.width;\n\n\t\t} else if(preferred.height !== AUTO_SIZE) {\n\n\t\t\tresult = Math.round(preferred.height * (base.width / Math.max(base.height, 1)));\n\n\t\t} else {\n\n\t\t\tresult = Math.round(base.width * scale);\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tset width(value) {\n\n\t\tthis.preferredWidth = value;\n\n\t}\n\n\t/**\n\t * The effective height.\n\t *\n\t * If the preferred width and height are set to {@link Resizer.AUTO_SIZE}, the base height will be returned.\n\t *\n\t * @type {Number}\n\t */\n\n\tget height() {\n\n\t\tconst { base, preferred, scale } = this;\n\n\t\tlet result;\n\n\t\tif(preferred.height !== AUTO_SIZE) {\n\n\t\t\tresult = preferred.height;\n\n\t\t} else if(preferred.width !== AUTO_SIZE) {\n\n\t\t\tresult = Math.round(preferred.width / Math.max(base.width / Math.max(base.height, 1), 1));\n\n\t\t} else {\n\n\t\t\tresult = Math.round(base.height * scale);\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tset height(value) {\n\n\t\tthis.preferredHeight = value;\n\n\t}\n\n\t/**\n\t * Returns the effective width.\n\t *\n\t * If the preferred width and height are set to {@link Resizer.AUTO_SIZE}, the base width will be returned.\n\t *\n\t * @deprecated Use width instead.\n\t * @return {Number} The effective width.\n\t */\n\n\tgetWidth() {\n\n\t\treturn this.width;\n\n\t}\n\n\t/**\n\t * Returns the effective height.\n\t *\n\t * If the preferred width and height are set to {@link Resizer.AUTO_SIZE}, the base height will be returned.\n\t *\n\t * @deprecated Use height instead.\n\t * @return {Number} The effective height.\n\t */\n\n\tgetHeight() {\n\n\t\treturn this.height;\n\n\t}\n\n\t/**\n\t * The resolution scale.\n\t *\n\t * @type {Number}\n\t */\n\n\tget scale() {\n\n\t\treturn this.s;\n\n\t}\n\n\tset scale(value) {\n\n\t\tif(this.s !== value) {\n\n\t\t\tthis.s = value;\n\t\t\tthis.preferred.setScalar(AUTO_SIZE);\n\t\t\tthis.dispatchEvent({ type: \"change\" });\n\t\t\tthis.resizable.setSize(this.base.width, this.base.height);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the current resolution scale.\n\t *\n\t * @deprecated Use scale instead.\n\t * @return {Number} The scale.\n\t */\n\n\tgetScale() {\n\n\t\treturn this.scale;\n\n\t}\n\n\t/**\n\t * Sets the resolution scale.\n\t *\n\t * Also sets the preferred resolution to {@link Resizer.AUTO_SIZE}.\n\t *\n\t * @deprecated Use scale instead.\n\t * @param {Number} value - The scale.\n\t */\n\n\tsetScale(value) {\n\n\t\tthis.scale = value;\n\n\t}\n\n\t/**\n\t * The base width.\n\t *\n\t * @type {Number}\n\t */\n\n\tget baseWidth() {\n\n\t\treturn this.base.width;\n\n\t}\n\n\tset baseWidth(value) {\n\n\t\tif(this.base.width !== value) {\n\n\t\t\tthis.base.width = value;\n\t\t\tthis.dispatchEvent({ type: \"change\" });\n\t\t\tthis.resizable.setSize(this.base.width, this.base.height);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the base width.\n\t *\n\t * @deprecated Use baseWidth instead.\n\t * @return {Number} The base width.\n\t */\n\n\tgetBaseWidth() {\n\n\t\treturn this.base.width;\n\n\t}\n\n\t/**\n\t * Sets the base width.\n\t *\n\t * @deprecated Use baseWidth instead.\n\t * @param {Number} value - The width.\n\t */\n\n\tsetBaseWidth(value) {\n\n\t\tif(this.base.width !== value) {\n\n\t\t\tthis.base.width = value;\n\t\t\tthis.dispatchEvent({ type: \"change\" });\n\t\t\tthis.resizable.setSize(this.base.width, this.base.height);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * The base height.\n\t *\n\t * @type {Number}\n\t */\n\n\tget baseHeight() {\n\n\t\treturn this.base.height;\n\n\t}\n\n\tset baseHeight(value) {\n\n\t\tif(this.base.height !== value) {\n\n\t\t\tthis.base.height = value;\n\t\t\tthis.dispatchEvent({ type: \"change\" });\n\t\t\tthis.resizable.setSize(this.base.width, this.base.height);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the base height.\n\t *\n\t * @deprecated Use baseHeight instead.\n\t * @return {Number} The base height.\n\t */\n\n\tgetBaseHeight() {\n\n\t\treturn this.baseHeight;\n\n\t}\n\n\t/**\n\t * Sets the base height.\n\t *\n\t * @deprecated Use baseHeight instead.\n\t * @param {Number} value - The height.\n\t */\n\n\tsetBaseHeight(value) {\n\n\t\tthis.baseHeight = value;\n\n\t}\n\n\t/**\n\t * Sets the base size.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetBaseSize(width, height) {\n\n\t\tif(this.base.width !== width || this.base.height !== height) {\n\n\t\t\tthis.base.set(width, height);\n\t\t\tthis.dispatchEvent({ type: \"change\" });\n\t\t\tthis.resizable.setSize(this.base.width, this.base.height);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * The preferred width.\n\t *\n\t * @type {Number}\n\t */\n\n\tget preferredWidth() {\n\n\t\treturn this.preferred.width;\n\n\t}\n\n\tset preferredWidth(value) {\n\n\t\tif(this.preferred.width !== value) {\n\n\t\t\tthis.preferred.width = value;\n\t\t\tthis.dispatchEvent({ type: \"change\" });\n\t\t\tthis.resizable.setSize(this.base.width, this.base.height);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the preferred width.\n\t *\n\t * @deprecated Use preferredWidth instead.\n\t * @return {Number} The preferred width.\n\t */\n\n\tgetPreferredWidth() {\n\n\t\treturn this.preferredWidth;\n\n\t}\n\n\t/**\n\t * Sets the preferred width.\n\t *\n\t * Use {@link Resizer.AUTO_SIZE} to automatically calculate the width based on the height and aspect ratio.\n\t *\n\t * @deprecated Use preferredWidth instead.\n\t * @param {Number} value - The width.\n\t */\n\n\tsetPreferredWidth(value) {\n\n\t\tthis.preferredWidth = value;\n\n\t}\n\n\t/**\n\t * The preferred height.\n\t *\n\t * @type {Number}\n\t */\n\n\tget preferredHeight() {\n\n\t\treturn this.preferred.height;\n\n\t}\n\n\tset preferredHeight(value) {\n\n\t\tif(this.preferred.height !== value) {\n\n\t\t\tthis.preferred.height = value;\n\t\t\tthis.dispatchEvent({ type: \"change\" });\n\t\t\tthis.resizable.setSize(this.base.width, this.base.height);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the preferred height.\n\t *\n\t * @deprecated Use preferredHeight instead.\n\t * @return {Number} The preferred height.\n\t */\n\n\tgetPreferredHeight() {\n\n\t\treturn this.preferredHeight;\n\n\t}\n\n\t/**\n\t * Sets the preferred height.\n\t *\n\t * Use {@link Resizer.AUTO_SIZE} to automatically calculate the height based on the width and aspect ratio.\n\t *\n\t * @deprecated Use preferredHeight instead.\n\t * @param {Number} value - The height.\n\t */\n\n\tsetPreferredHeight(value) {\n\n\t\tthis.preferredHeight = value;\n\n\t}\n\n\t/**\n\t * Sets the preferred size.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetPreferredSize(width, height) {\n\n\t\tif(this.preferred.width !== width || this.preferred.height !== height) {\n\n\t\t\tthis.preferred.set(width, height);\n\t\t\tthis.dispatchEvent({ type: \"change\" });\n\t\t\tthis.resizable.setSize(this.base.width, this.base.height);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Copies the given resolution.\n\t *\n\t * @param {Resolution} resolution - The resolution.\n\t */\n\n\tcopy(resolution) {\n\n\t\tthis.s = resolution.scale;\n\t\tthis.base.set(resolution.getBaseWidth(), resolution.getBaseHeight());\n\t\tthis.preferred.set(resolution.getPreferredWidth(), resolution.getPreferredHeight());\n\t\tthis.dispatchEvent({ type: \"change\" });\n\t\tthis.resizable.setSize(this.base.width, this.base.height);\n\n\t}\n\n\t/**\n\t * An auto sizing constant.\n\t *\n\t * Can be used to automatically calculate the width or height based on the original aspect ratio.\n\t *\n\t * @type {Number}\n\t */\n\n\tstatic get AUTO_SIZE() {\n\n\t\treturn AUTO_SIZE;\n\n\t}\n\n}\n", "import { BackSide, DoubleSide, FrontSide } from \"three\";\n\n/**\n * A flag that indicates whether the override material workaround is enabled.\n *\n * @type {Boolean}\n * @private\n */\n\nlet workaroundEnabled = false;\n\n/**\n * An override material manager.\n *\n * Includes a workaround that fixes override materials for skinned meshes and instancing. Doesn't fix uniforms such as\n * normal maps and displacement maps. Using the workaround may have a negative impact on performance if the scene\n * contains a lot of meshes.\n *\n * @implements {Disposable}\n */\n\nexport class OverrideMaterialManager {\n\n\t/**\n\t * Constructs a new override material manager.\n\t *\n\t * @param {Material} [material=null] - An override material.\n\t */\n\n\tconstructor(material = null) {\n\n\t\t/**\n\t\t * Keeps track of original materials.\n\t\t *\n\t\t * @type {Map<Object3D, Material>}\n\t\t * @private\n\t\t */\n\n\t\tthis.originalMaterials = new Map();\n\n\t\t/**\n\t\t * The main override material.\n\t\t *\n\t\t * @type {Material}\n\t\t * @private\n\t\t */\n\n\t\tthis.material = null;\n\n\t\t/**\n\t\t * Override materials for meshes with front side triangles.\n\t\t *\n\t\t * @type {Material[]}\n\t\t * @private\n\t\t */\n\n\t\tthis.materials = null;\n\n\t\t/**\n\t\t * Override materials for meshes with back side triangles.\n\t\t *\n\t\t * @type {Material[]}\n\t\t * @private\n\t\t */\n\n\t\tthis.materialsBackSide = null;\n\n\t\t/**\n\t\t * Override materials for meshes with double sided triangles.\n\t\t *\n\t\t * @type {Material[]}\n\t\t * @private\n\t\t */\n\n\t\tthis.materialsDoubleSide = null;\n\n\t\t/**\n\t\t * Override materials for flat shaded meshes with front side triangles.\n\t\t *\n\t\t * @type {Material[]}\n\t\t * @private\n\t\t */\n\n\t\tthis.materialsFlatShaded = null;\n\n\t\t/**\n\t\t * Override materials for flat shaded meshes with back side triangles.\n\t\t *\n\t\t * @type {Material[]}\n\t\t * @private\n\t\t */\n\n\t\tthis.materialsFlatShadedBackSide = null;\n\n\t\t/**\n\t\t * Override materials for flat shaded meshes with double sided triangles.\n\t\t *\n\t\t * @type {Material[]}\n\t\t * @private\n\t\t */\n\n\t\tthis.materialsFlatShadedDoubleSide = null;\n\n\t\tthis.setMaterial(material);\n\n\t\t/**\n\t\t * The current mesh count.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.meshCount = 0;\n\n\t\t/**\n\t\t * Assigns an appropriate override material to a given mesh.\n\t\t *\n\t\t * @param {Object3D} node - A scene node.\n\t\t * @private\n\t\t */\n\n\t\tthis.replaceMaterial = (node) => {\n\n\t\t\tif(node.isMesh) {\n\n\t\t\t\tlet materials;\n\n\t\t\t\tif(node.material.flatShading) {\n\n\t\t\t\t\tswitch(node.material.side) {\n\n\t\t\t\t\t\tcase DoubleSide:\n\t\t\t\t\t\t\tmaterials = this.materialsFlatShadedDoubleSide;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase BackSide:\n\t\t\t\t\t\t\tmaterials = this.materialsFlatShadedBackSide;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmaterials = this.materialsFlatShaded;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch(node.material.side) {\n\n\t\t\t\t\t\tcase DoubleSide:\n\t\t\t\t\t\t\tmaterials = this.materialsDoubleSide;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase BackSide:\n\t\t\t\t\t\t\tmaterials = this.materialsBackSide;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmaterials = this.materials;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis.originalMaterials.set(node, node.material);\n\n\t\t\t\tif(node.isSkinnedMesh) {\n\n\t\t\t\t\tnode.material = materials[2];\n\n\t\t\t\t} else if(node.isInstancedMesh) {\n\n\t\t\t\t\tnode.material = materials[1];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode.material = materials[0];\n\n\t\t\t\t}\n\n\t\t\t\t++this.meshCount;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/**\n\t * Sets the override material.\n\t *\n\t * @param {Material} material - The material.\n\t */\n\n\tsetMaterial(material) {\n\n\t\tthis.disposeMaterials();\n\t\tthis.material = material;\n\n\t\tif(material !== null) {\n\n\t\t\t// Create materials for simple, instanced and skinned meshes.\n\t\t\tconst materials = this.materials = [\n\t\t\t\tmaterial.clone(),\n\t\t\t\tmaterial.clone(),\n\t\t\t\tmaterial.clone()\n\t\t\t];\n\n\t\t\t// FrontSide\n\t\t\tfor(const m of materials) {\n\n\t\t\t\tm.uniforms = Object.assign({}, material.uniforms);\n\t\t\t\tm.side = FrontSide;\n\n\t\t\t}\n\n\t\t\tmaterials[2].skinning = true;\n\n\t\t\t// BackSide\n\t\t\tthis.materialsBackSide = materials.map((m) => {\n\n\t\t\t\tconst c = m.clone();\n\t\t\t\tc.uniforms = Object.assign({}, material.uniforms);\n\t\t\t\tc.side = BackSide;\n\t\t\t\treturn c;\n\n\t\t\t});\n\n\t\t\t// DoubleSide\n\t\t\tthis.materialsDoubleSide = materials.map((m) => {\n\n\t\t\t\tconst c = m.clone();\n\t\t\t\tc.uniforms = Object.assign({}, material.uniforms);\n\t\t\t\tc.side = DoubleSide;\n\t\t\t\treturn c;\n\n\t\t\t});\n\n\t\t\t// FrontSide & flatShading\n\t\t\tthis.materialsFlatShaded = materials.map((m) => {\n\n\t\t\t\tconst c = m.clone();\n\t\t\t\tc.uniforms = Object.assign({}, material.uniforms);\n\t\t\t\tc.flatShading = true;\n\t\t\t\treturn c;\n\n\t\t\t});\n\n\t\t\t// BackSide & flatShading\n\t\t\tthis.materialsFlatShadedBackSide = materials.map((m) => {\n\n\t\t\t\tconst c = m.clone();\n\t\t\t\tc.uniforms = Object.assign({}, material.uniforms);\n\t\t\t\tc.flatShading = true;\n\t\t\t\tc.side = BackSide;\n\t\t\t\treturn c;\n\n\t\t\t});\n\n\t\t\t// DoubleSide & flatShading\n\t\t\tthis.materialsFlatShadedDoubleSide = materials.map((m) => {\n\n\t\t\t\tconst c = m.clone();\n\t\t\t\tc.uniforms = Object.assign({}, material.uniforms);\n\t\t\t\tc.flatShading = true;\n\t\t\t\tc.side = DoubleSide;\n\t\t\t\treturn c;\n\n\t\t\t});\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Renders the scene with the override material.\n\t *\n\t * @private\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Scene} scene - A scene.\n\t * @param {Camera} camera - A camera.\n\t */\n\n\trender(renderer, scene, camera) {\n\n\t\t// Ignore shadows.\n\t\tconst shadowMapEnabled = renderer.shadowMap.enabled;\n\t\trenderer.shadowMap.enabled = false;\n\n\t\tif(workaroundEnabled) {\n\n\t\t\tconst originalMaterials = this.originalMaterials;\n\n\t\t\tthis.meshCount = 0;\n\t\t\tscene.traverse(this.replaceMaterial);\n\t\t\trenderer.render(scene, camera);\n\n\t\t\tfor(const entry of originalMaterials) {\n\n\t\t\t\tentry[0].material = entry[1];\n\n\t\t\t}\n\n\t\t\tif(this.meshCount !== originalMaterials.size) {\n\n\t\t\t\toriginalMaterials.clear();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst overrideMaterial = scene.overrideMaterial;\n\t\t\tscene.overrideMaterial = this.material;\n\t\t\trenderer.render(scene, camera);\n\t\t\tscene.overrideMaterial = overrideMaterial;\n\n\t\t}\n\n\t\trenderer.shadowMap.enabled = shadowMapEnabled;\n\n\t}\n\n\t/**\n\t * Deletes cloned override materials.\n\t *\n\t * @private\n\t */\n\n\tdisposeMaterials() {\n\n\t\tif(this.material !== null) {\n\n\t\t\tconst materials = this.materials\n\t\t\t\t.concat(this.materialsBackSide)\n\t\t\t\t.concat(this.materialsDoubleSide)\n\t\t\t\t.concat(this.materialsFlatShaded)\n\t\t\t\t.concat(this.materialsFlatShadedBackSide)\n\t\t\t\t.concat(this.materialsFlatShadedDoubleSide);\n\n\t\t\tfor(const m of materials) {\n\n\t\t\t\tm.dispose();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs cleanup tasks.\n\t */\n\n\tdispose() {\n\n\t\tthis.originalMaterials.clear();\n\t\tthis.disposeMaterials();\n\n\t}\n\n\t/**\n\t * Indicates whether the override material workaround is enabled.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tstatic get workaroundEnabled() {\n\n\t\treturn workaroundEnabled;\n\n\t}\n\n\t/**\n\t * Enables or disables the override material workaround globally.\n\t *\n\t * This only affects post processing passes and effects.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tstatic set workaroundEnabled(value) {\n\n\t\tworkaroundEnabled = value;\n\n\t}\n\n}\n", "import { OverrideMaterialManager } from \"../core/OverrideMaterialManager\";\nimport { ClearPass } from \"./ClearPass\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A pass that renders a given scene into the input buffer or to screen.\n *\n * This pass uses a {@link ClearPass} to clear the target buffer.\n */\n\nexport class RenderPass extends Pass {\n\n\t/**\n\t * Constructs a new render pass.\n\t *\n\t * @param {Scene} scene - The scene to render.\n\t * @param {Camera} camera - The camera to use to render the scene.\n\t * @param {Material} [overrideMaterial=null] - An override material.\n\t */\n\n\tconstructor(scene, camera, overrideMaterial = null) {\n\n\t\tsuper(\"RenderPass\", scene, camera);\n\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * A clear pass.\n\t\t *\n\t\t * @type {ClearPass}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.clearPass = new ClearPass();\n\n\t\t/**\n\t\t * An override material manager.\n\t\t *\n\t\t * @type {OverrideMaterialManager}\n\t\t * @private\n\t\t */\n\n\t\tthis.overrideMaterialManager = (overrideMaterial === null) ? null : new OverrideMaterialManager(overrideMaterial);\n\n\t\t/**\n\t\t * Indicates whether the scene background should be ignored.\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\n\t\tthis.ignoreBackground = false;\n\n\t\t/**\n\t\t * Indicates whether the shadow map auto update should be skipped.\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\n\t\tthis.skipShadowMapUpdate = false;\n\n\t\t/**\n\t\t * A selection of objects to render.\n\t\t *\n\t\t * @type {Selection}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.selection = null;\n\n\t}\n\n\tget renderToScreen() {\n\n\t\treturn super.renderToScreen;\n\n\t}\n\n\tset renderToScreen(value) {\n\n\t\tsuper.renderToScreen = value;\n\t\tthis.clearPass.renderToScreen = value;\n\n\t}\n\n\t/**\n\t * The current override material.\n\t *\n\t * @type {Material}\n\t */\n\n\tget overrideMaterial() {\n\n\t\tconst manager = this.overrideMaterialManager;\n\t\treturn (manager !== null) ? manager.material : null;\n\n\t}\n\n\tset overrideMaterial(value) {\n\n\t\tconst manager = this.overrideMaterialManager;\n\n\t\tif(value !== null) {\n\n\t\t\tif(manager !== null) {\n\n\t\t\t\tmanager.setMaterial(value);\n\n\t\t\t} else {\n\n\t\t\t\tthis.overrideMaterialManager = new OverrideMaterialManager(value);\n\n\t\t\t}\n\n\t\t} else if(manager !== null) {\n\n\t\t\tmanager.dispose();\n\t\t\tthis.overrideMaterialManager = null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the current override material.\n\t *\n\t * @deprecated Use overrideMaterial instead.\n\t * @return {Material} The material.\n\t */\n\n\tgetOverrideMaterial() {\n\n\t\treturn this.overrideMaterial;\n\n\t}\n\n\t/**\n\t * Sets the override material.\n\t *\n\t * @deprecated Use overrideMaterial instead.\n\t * @return {Material} value - The material.\n\t */\n\n\tsetOverrideMaterial(value) {\n\n\t\tthis.overrideMaterial = value;\n\n\t}\n\n\t/**\n\t * Indicates whether the target buffer should be cleared before rendering.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use clearPass.enabled instead.\n\t */\n\n\tget clear() {\n\n\t\treturn this.clearPass.enabled;\n\n\t}\n\n\tset clear(value) {\n\n\t\tthis.clearPass.enabled = value;\n\n\t}\n\n\t/**\n\t * Returns the selection. Default is `null` (no restriction).\n\t *\n\t * @deprecated Use selection instead.\n\t * @return {Selection} The selection.\n\t */\n\n\tgetSelection() {\n\n\t\treturn this.selection;\n\n\t}\n\n\t/**\n\t * Sets the selection. Set to `null` to disable.\n\t *\n\t * @deprecated Use selection instead.\n\t * @param {Selection} value - The selection.\n\t */\n\n\tsetSelection(value) {\n\n\t\tthis.selection = value;\n\n\t}\n\n\t/**\n\t * Indicates whether the scene background is disabled.\n\t *\n\t * @deprecated Use ignoreBackground instead.\n\t * @return {Boolean} Whether the scene background is disabled.\n\t */\n\n\tisBackgroundDisabled() {\n\n\t\treturn this.ignoreBackground;\n\n\t}\n\n\t/**\n\t * Enables or disables the scene background.\n\t *\n\t * @deprecated Use ignoreBackground instead.\n\t * @param {Boolean} value - Whether the scene background should be disabled.\n\t */\n\n\tsetBackgroundDisabled(value) {\n\n\t\tthis.ignoreBackground = value;\n\n\t}\n\n\t/**\n\t * Indicates whether the shadow map auto update is disabled.\n\t *\n\t * @deprecated Use skipShadowMapUpdate instead.\n\t * @return {Boolean} Whether the shadow map update is disabled.\n\t */\n\n\tisShadowMapDisabled() {\n\n\t\treturn this.skipShadowMapUpdate;\n\n\t}\n\n\t/**\n\t * Enables or disables the shadow map auto update.\n\t *\n\t * @deprecated Use skipShadowMapUpdate instead.\n\t * @param {Boolean} value - Whether the shadow map auto update should be disabled.\n\t */\n\n\tsetShadowMapDisabled(value) {\n\n\t\tthis.skipShadowMapUpdate = value;\n\n\t}\n\n\t/**\n\t * Returns the clear pass.\n\t *\n\t * @deprecated Use clearPass.enabled instead.\n\t * @return {ClearPass} The clear pass.\n\t */\n\n\tgetClearPass() {\n\n\t\treturn this.clearPass;\n\n\t}\n\n\t/**\n\t * Renders the scene.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst scene = this.scene;\n\t\tconst camera = this.camera;\n\t\tconst selection = this.selection;\n\t\tconst mask = camera.layers.mask;\n\t\tconst background = scene.background;\n\t\tconst shadowMapAutoUpdate = renderer.shadowMap.autoUpdate;\n\t\tconst renderTarget = this.renderToScreen ? null : inputBuffer;\n\n\t\tif(selection !== null) {\n\n\t\t\tcamera.layers.set(selection.getLayer());\n\n\t\t}\n\n\t\tif(this.skipShadowMapUpdate) {\n\n\t\t\trenderer.shadowMap.autoUpdate = false;\n\n\t\t}\n\n\t\tif(this.ignoreBackground || this.clearPass.overrideClearColor !== null) {\n\n\t\t\tscene.background = null;\n\n\t\t}\n\n\t\tif(this.clearPass.enabled) {\n\n\t\t\tthis.clearPass.render(renderer, inputBuffer);\n\n\t\t}\n\n\t\trenderer.setRenderTarget(renderTarget);\n\n\t\tif(this.overrideMaterialManager !== null) {\n\n\t\t\tthis.overrideMaterialManager.render(renderer, scene, camera);\n\n\t\t} else {\n\n\t\t\trenderer.render(scene, camera);\n\n\t\t}\n\n\t\t// Restore original values.\n\t\tcamera.layers.mask = mask;\n\t\tscene.background = background;\n\t\trenderer.shadowMap.autoUpdate = shadowMapAutoUpdate;\n\n\t}\n\n}\n", "import { BasicDepthPacking, FloatType, NearestFilter, WebGLRenderTarget } from \"three\";\nimport { Resolution } from \"../core/Resolution\";\nimport { DepthDownsamplingMaterial } from \"../materials\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A pass that downsamples the scene depth by picking the most representative depth in 2x2 texel neighborhoods. If a\n * normal buffer is provided, the corresponding normals will be stored as well.\n *\n * This pass requires WebGL 2.\n */\n\nexport class DepthDownsamplingPass extends Pass {\n\n\t/**\n\t * Constructs a new depth downsampling pass.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {Texture} [options.normalBuffer=null] - A texture that contains view space normals. See {@link NormalPass}.\n\t * @param {Number} [options.resolutionScale=0.5] - The resolution scale.\n\t * @param {Number} [options.resolutionX=Resolution.AUTO_SIZE] - The horizontal resolution.\n\t * @param {Number} [options.resolutionY=Resolution.AUTO_SIZE] - The vertical resolution.\n\t * @param {Number} [options.width=Resolution.AUTO_SIZE] - Deprecated. Use resolutionX instead.\n\t * @param {Number} [options.height=Resolution.AUTO_SIZE] - Deprecated. Use resolutionY instead.\n\t */\n\n\tconstructor({\n\t\tnormalBuffer = null,\n\t\tresolutionScale = 0.5,\n\t\twidth = Resolution.AUTO_SIZE,\n\t\theight = Resolution.AUTO_SIZE,\n\t\tresolutionX = width,\n\t\tresolutionY = height\n\t} = {}) {\n\n\t\tsuper(\"DepthDownsamplingPass\");\n\n\t\tconst material = new DepthDownsamplingMaterial();\n\t\tmaterial.normalBuffer = normalBuffer;\n\t\tthis.fullscreenMaterial = material;\n\t\tthis.needsDepthTexture = true;\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * A render target that contains the downsampled normals and depth.\n\t\t *\n\t\t * Normals are stored as RGB and depth as alpha.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\n\t\t\tminFilter: NearestFilter,\n\t\t\tmagFilter: NearestFilter,\n\t\t\tdepthBuffer: false,\n\t\t\ttype: FloatType\n\t\t});\n\n\t\tthis.renderTarget.texture.name = \"DepthDownsamplingPass.Target\";\n\t\tthis.renderTarget.texture.generateMipmaps = false;\n\n\t\t/**\n\t\t * The resolution.\n\t\t *\n\t\t * @type {Resolution}\n\t\t * @readonly\n\t\t */\n\n\t\tconst resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n\t\tresolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n\n\t}\n\n\t/**\n\t * The normal(RGB) + depth(A) texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget texture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * Returns the normal(RGB) + depth(A) texture.\n\t *\n\t * @deprecated Use texture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetTexture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * Returns the resolution settings.\n\t *\n\t * @deprecated Use resolution instead.\n\t * @return {Resolution} The resolution.\n\t */\n\n\tgetResolution() {\n\n\t\treturn this.resolution;\n\n\t}\n\n\t/**\n\t * Sets the depth texture.\n\t *\n\t * @param {Texture} depthTexture - A depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing strategy.\n\t */\n\n\tsetDepthTexture(depthTexture, depthPacking = BasicDepthPacking) {\n\n\t\tthis.fullscreenMaterial.depthBuffer = depthTexture;\n\t\tthis.fullscreenMaterial.depthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * Downsamples depth and scene normals.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n\t\trenderer.render(this.scene, this.camera);\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\t// Use the full resolution to calculate the depth/normal buffer texel size.\n\t\tthis.fullscreenMaterial.setSize(width, height);\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.setBaseSize(width, height);\n\t\tthis.renderTarget.setSize(resolution.width, resolution.height);\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tif(!renderer.capabilities.isWebGL2) {\n\n\t\t\tthrow new Error(\"The DepthDownsamplingPass requires WebGL 2\");\n\n\t\t}\n\n\t}\n\n}\n", "import { FloatType, RGBADepthPacking } from \"three\";\nimport { DepthCopyMode } from \"../enums\";\nimport { DepthCopyPass } from \"./DepthCopyPass\";\n\nconst unpackFactors = new Float32Array([\n\t(255 / 256) / (256 ** 3),\n\t(255 / 256) / (256 ** 2),\n\t(255 / 256) / 256,\n\t(255 / 256)\n]);\n\n/**\n * Unpacks RGBA-encoded depth.\n *\n * @private\n * @param {Uint8Array} packedDepth - The packed depth.\n * @return {Number} The unpacked depth.\n */\n\nfunction unpackRGBAToDepth(packedDepth) {\n\n\treturn (\n\t\tpackedDepth[0] * unpackFactors[0] +\n\t\tpackedDepth[1] * unpackFactors[1] +\n\t\tpackedDepth[2] * unpackFactors[2] +\n\t\tpackedDepth[3] * unpackFactors[3]\n\t) / 255;\n\n}\n\n/**\n * A depth picking pass.\n */\n\nexport class DepthPickingPass extends DepthCopyPass {\n\n\t/**\n\t * Constructs a new depth picking pass.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {DepthPackingStrategies} [options.depthPacking=RGBADepthPacking] - The depth packing.\n\t * @param {Number} [options.mode=DepthCopyMode.SINGLE] - The depth copy mode.\n\t */\n\n\tconstructor({ depthPacking = RGBADepthPacking, mode = DepthCopyMode.SINGLE } = {}) {\n\n\t\tsuper({ depthPacking });\n\n\t\tthis.name = \"DepthPickingPass\";\n\t\tthis.fullscreenMaterial.mode = mode;\n\n\t\t/**\n\t\t * An RGBA pixel buffer.\n\t\t *\n\t\t * @type {TypedArray}\n\t\t * @private\n\t\t */\n\n\t\tthis.pixelBuffer = (depthPacking === RGBADepthPacking) ? new Uint8Array(4) : new Float32Array(4);\n\n\t\t/**\n\t\t * A callback for picking results.\n\t\t *\n\t\t * @type {Function}\n\t\t * @private\n\t\t */\n\n\t\tthis.callback = null;\n\n\t}\n\n\t/**\n\t * Reads depth at a specific screen position.\n\t *\n\t * Only one depth value can be picked per frame. Calling this method multiple times per frame will overwrite the\n\t * picking coordinates. Unresolved promises will be abandoned.\n\t *\n\t * @example\n\t * const ndc = new Vector3();\n\t * const clientRect = myViewport.getBoundingClientRect();\n\t * const clientX = pointerEvent.clientX - clientRect.left;\n\t * const clientY = pointerEvent.clientY - clientRect.top;\n\t * ndc.x = (clientX / myViewport.clientWidth) * 2.0 - 1.0;\n\t * ndc.y = -(clientY / myViewport.clientHeight) * 2.0 + 1.0;\n\t * const depth = await depthPickingPass.readDepth(ndc);\n\t * ndc.z = depth * 2.0 - 1.0;\n\t *\n\t * const worldPosition = ndc.unproject(camera);\n\t *\n\t * @param {Vector2|Vector3} ndc - Normalized device coordinates. Only X and Y are relevant.\n\t * @return {Promise<Number>} A promise that returns the depth on the next frame.\n\t */\n\n\treadDepth(ndc) {\n\n\t\tthis.fullscreenMaterial.texelPosition.set(ndc.x * 0.5 + 0.5, ndc.y * 0.5 + 0.5);\n\n\t\treturn new Promise((resolve) => {\n\n\t\t\tthis.callback = resolve;\n\n\t\t});\n\n\t}\n\n\t/**\n\t * Copies depth and resolves depth picking promises.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst material = this.fullscreenMaterial;\n\t\tconst mode = material.mode;\n\n\t\tif(mode === DepthCopyMode.FULL) {\n\n\t\t\t// Always copy the full depth texture.\n\t\t\tsuper.render(renderer);\n\n\t\t}\n\n\t\tif(this.callback !== null) {\n\n\t\t\tconst renderTarget = this.renderTarget;\n\t\t\tconst pixelBuffer = this.pixelBuffer;\n\t\t\tconst packed = (renderTarget.texture.type !== FloatType);\n\n\t\t\tlet x = 0, y = 0;\n\n\t\t\tif(mode === DepthCopyMode.SINGLE) {\n\n\t\t\t\t// Copy a specific depth value.\n\t\t\t\tsuper.render(renderer);\n\n\t\t\t} else {\n\n\t\t\t\tconst texelPosition = material.texelPosition;\n\t\t\t\tx = Math.round(texelPosition.x * renderTarget.width);\n\t\t\t\ty = Math.round(texelPosition.y * renderTarget.height);\n\n\t\t\t}\n\n\t\t\trenderer.readRenderTargetPixels(renderTarget, x, y, 1, 1, pixelBuffer);\n\t\t\tthis.callback(packed ? unpackRGBAToDepth(pixelBuffer) : pixelBuffer[0]);\n\t\t\tthis.callback = null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tif(this.fullscreenMaterial.mode === DepthCopyMode.FULL) {\n\n\t\t\tsuper.setSize(width, height);\n\n\t\t}\n\n\t}\n\n}\n", "import {\n\tBasicDepthPacking,\n\tFloatType,\n\tNearestFilter,\n\tRGBADepthPacking,\n\tUnsignedByteType,\n\tWebGLRenderTarget\n} from \"three\";\n\nimport { DepthCopyMaterial } from \"../materials\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A pass that copies depth into a render target.\n */\n\nexport class DepthCopyPass extends Pass {\n\n\t/**\n\t * Constructs a new depth save pass.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {DepthPackingStrategies} [options.depthPacking=RGBADepthPacking] - The output depth packing.\n\t */\n\n\tconstructor({ depthPacking = RGBADepthPacking } = {}) {\n\n\t\tsuper(\"DepthCopyPass\");\n\n\t\tconst material = new DepthCopyMaterial();\n\t\tmaterial.outputDepthPacking = depthPacking;\n\t\tthis.fullscreenMaterial = material;\n\t\tthis.needsDepthTexture = true;\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * The render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\n\t\t\ttype: (depthPacking === RGBADepthPacking) ? UnsignedByteType : FloatType,\n\t\t\tminFilter: NearestFilter,\n\t\t\tmagFilter: NearestFilter,\n\t\t\tdepthBuffer: false\n\t\t});\n\n\t\tthis.renderTarget.texture.name = \"DepthCopyPass.Target\";\n\n\t}\n\n\t/**\n\t * The output depth texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget texture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * Returns the output depth texture.\n\t *\n\t * @deprecated Use texture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetTexture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * The output depth packing.\n\t *\n\t * @type {DepthPackingStrategies}\n\t */\n\n\tget depthPacking() {\n\n\t\treturn this.fullscreenMaterial.outputDepthPacking;\n\n\t}\n\n\t/**\n\t * Returns the output depth packing.\n\t *\n\t * @deprecated Use depthPacking instead.\n\t * @return {DepthPackingStrategies} The depth packing.\n\t */\n\n\tgetDepthPacking() {\n\n\t\treturn this.fullscreenMaterial.outputDepthPacking;\n\n\t}\n\n\t/**\n\t * Sets the depth texture.\n\t *\n\t * @param {Texture} depthTexture - A depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing.\n\t */\n\n\tsetDepthTexture(depthTexture, depthPacking = BasicDepthPacking) {\n\n\t\tthis.fullscreenMaterial.depthBuffer = depthTexture;\n\t\tthis.fullscreenMaterial.inputDepthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * Copies depth from a depth texture.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n\t\trenderer.render(this.scene, this.camera);\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.renderTarget.setSize(width, height);\n\n\t}\n\n}\n", "import { BasicDepthPacking, UnsignedByteType, sRGBEncoding } from \"three\";\nimport { EffectShaderData } from \"../core\";\nimport { BlendFunction, EffectAttribute, EffectShaderSection as Section } from \"../enums\";\nimport { EffectMaterial } from \"../materials\";\nimport { Pass } from \"./Pass\";\n\n/**\n * Prefixes substrings within the given strings.\n *\n * @private\n * @param {String} prefix - A prefix.\n * @param {Iterable<String>} substrings - The substrings.\n * @param {Map<String, String>} strings - A collection of named strings.\n */\n\nfunction prefixSubstrings(prefix, substrings, strings) {\n\n\tfor(const substring of substrings) {\n\n\t\t// Prefix the substring and build a RegExp that searches for the unprefixed version.\n\t\tconst prefixed = \"$1\" + prefix + substring.charAt(0).toUpperCase() + substring.slice(1);\n\t\tconst regExp = new RegExp(\"([^\\\\.])(\\\\b\" + substring + \"\\\\b)\", \"g\");\n\n\t\tfor(const entry of strings.entries()) {\n\n\t\t\tif(entry[1] !== null) {\n\n\t\t\t\t// Replace all occurances of the substring with the prefixed version.\n\t\t\t\tstrings.set(entry[0], entry[1].replace(regExp, prefixed));\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Integrates the given effect.\n *\n * @private\n * @param {String} prefix - A prefix.\n * @param {Effect} effect - The effect.\n * @param {EffectShaderData} data - Cumulative shader data.\n */\n\nfunction integrateEffect(prefix, effect, data) {\n\n\tlet fragmentShader = effect.getFragmentShader();\n\tlet vertexShader = effect.getVertexShader();\n\n\tconst mainImageExists = (fragmentShader !== undefined && /mainImage/.test(fragmentShader));\n\tconst mainUvExists = (fragmentShader !== undefined && /mainUv/.test(fragmentShader));\n\n\tdata.attributes |= effect.getAttributes();\n\n\tif(fragmentShader === undefined) {\n\n\t\tthrow new Error(`Missing fragment shader (${effect.name})`);\n\n\t} else if(mainUvExists && (data.attributes & EffectAttribute.CONVOLUTION) !== 0) {\n\n\t\tthrow new Error(`Effects that transform UVs are incompatible with convolution effects (${effect.name})`);\n\n\t} else if(!mainImageExists && !mainUvExists) {\n\n\t\tthrow new Error(`Could not find mainImage or mainUv function (${effect.name})`);\n\n\t} else {\n\n\t\tconst functionRegExp = /\\w+\\s+(\\w+)\\([\\w\\s,]*\\)\\s*{/g;\n\n\t\tconst shaderParts = data.shaderParts;\n\t\tlet fragmentHead = shaderParts.get(Section.FRAGMENT_HEAD) ?? \"\";\n\t\tlet fragmentMainUv = shaderParts.get(Section.FRAGMENT_MAIN_UV) ?? \"\";\n\t\tlet fragmentMainImage = shaderParts.get(Section.FRAGMENT_MAIN_IMAGE) ?? \"\";\n\t\tlet vertexHead = shaderParts.get(Section.VERTEX_HEAD) ?? \"\";\n\t\tlet vertexMainSupport = shaderParts.get(Section.VERTEX_MAIN_SUPPORT) ?? \"\";\n\n\t\tconst varyings = new Set();\n\t\tconst names = new Set();\n\n\t\tif(mainUvExists) {\n\n\t\t\tfragmentMainUv += `\\t${prefix}MainUv(UV);\\n`;\n\t\t\tdata.uvTransformation = true;\n\n\t\t}\n\n\t\tif(vertexShader !== null && /mainSupport/.test(vertexShader)) {\n\n\t\t\t// Build the mainSupport call (with optional uv parameter).\n\t\t\tconst needsUv = /mainSupport *\\([\\w\\s]*?uv\\s*?\\)/.test(vertexShader);\n\t\t\tvertexMainSupport += `\\t${prefix}MainSupport(`;\n\t\t\tvertexMainSupport += needsUv ? \"vUv);\\n\" : \");\\n\";\n\n\t\t\t// Collect names of varyings and functions.\n\t\t\tfor(const m of vertexShader.matchAll(/(?:varying\\s+\\w+\\s+(\\w*))/g)) {\n\n\t\t\t\tdata.varyings.add(m[1]);\n\t\t\t\tvaryings.add(m[1]);\n\t\t\t\tnames.add(m[1]);\n\n\t\t\t}\n\n\t\t\tfor(const m of vertexShader.matchAll(functionRegExp)) {\n\n\t\t\t\tnames.add(m[1]);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor(const m of fragmentShader.matchAll(functionRegExp)) {\n\n\t\t\tnames.add(m[1]);\n\n\t\t}\n\n\t\tfor(const d of effect.defines.keys()) {\n\n\t\t\t// Ignore parameters of function-like macros.\n\t\t\tnames.add(d.replace(/\\([\\w\\s,]*\\)/g, \"\"));\n\n\t\t}\n\n\t\tfor(const u of effect.uniforms.keys()) {\n\n\t\t\tnames.add(u);\n\n\t\t}\n\n\t\t// Remove potential false positives.\n\t\tnames.delete(\"while\");\n\t\tnames.delete(\"for\");\n\t\tnames.delete(\"if\");\n\n\t\t// Store prefixed uniforms and macros.\n\t\teffect.uniforms.forEach((val, key) => data.uniforms.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), val));\n\t\teffect.defines.forEach((val, key) => data.defines.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), val));\n\n\t\t// Prefix varyings, functions, uniforms and macro values.\n\t\tconst shaders = new Map([[\"fragment\", fragmentShader], [\"vertex\", vertexShader]]);\n\t\tprefixSubstrings(prefix, names, data.defines);\n\t\tprefixSubstrings(prefix, names, shaders);\n\t\tfragmentShader = shaders.get(\"fragment\");\n\t\tvertexShader = shaders.get(\"vertex\");\n\n\t\t// Collect unique blend modes.\n\t\tconst blendMode = effect.blendMode;\n\t\tdata.blendModes.set(blendMode.blendFunction, blendMode);\n\n\t\tif(mainImageExists) {\n\n\t\t\tif(effect.inputColorSpace !== null && effect.inputColorSpace !== data.colorSpace) {\n\n\t\t\t\tfragmentMainImage += (effect.inputColorSpace === sRGBEncoding) ?\n\t\t\t\t\t\"color0 = LinearTosRGB(color0);\\n\\t\" :\n\t\t\t\t\t\"color0 = sRGBToLinear(color0);\\n\\t\";\n\n\t\t\t}\n\n\t\t\tif(effect.outputColorSpace !== null) {\n\n\t\t\t\tdata.colorSpace = effect.outputColorSpace;\n\n\t\t\t} else if(effect.inputColorSpace !== null) {\n\n\t\t\t\tdata.colorSpace = effect.inputColorSpace;\n\n\t\t\t}\n\n\t\t\tconst depthParamRegExp = /MainImage *\\([\\w\\s,]*?depth[\\w\\s,]*?\\)/;\n\t\t\tfragmentMainImage += `${prefix}MainImage(color0, UV, `;\n\n\t\t\t// Check if the effect reads depth in the fragment shader.\n\t\t\tif((data.attributes & EffectAttribute.DEPTH) !== 0 && depthParamRegExp.test(fragmentShader)) {\n\n\t\t\t\tfragmentMainImage += \"depth, \";\n\t\t\t\tdata.readDepth = true;\n\n\t\t\t}\n\n\t\t\tfragmentMainImage += \"color1);\\n\\t\";\n\n\t\t\t// Include the blend opacity uniform of this effect.\n\t\t\tconst blendOpacity = prefix + \"BlendOpacity\";\n\t\t\tdata.uniforms.set(blendOpacity, blendMode.opacity);\n\n\t\t\t// Blend the result of this effect with the input color (color0 = dst, color1 = src).\n\t\t\tfragmentMainImage += `color0 = blend${blendMode.blendFunction}(color0, color1, ${blendOpacity});\\n\\n\\t`;\n\t\t\tfragmentHead += `uniform float ${blendOpacity};\\n\\n`;\n\n\t\t}\n\n\t\t// Include the modified code in the final shader.\n\t\tfragmentHead += fragmentShader + \"\\n\";\n\n\t\tif(vertexShader !== null) {\n\n\t\t\tvertexHead += vertexShader + \"\\n\";\n\n\t\t}\n\n\t\tshaderParts.set(Section.FRAGMENT_HEAD, fragmentHead);\n\t\tshaderParts.set(Section.FRAGMENT_MAIN_UV, fragmentMainUv);\n\t\tshaderParts.set(Section.FRAGMENT_MAIN_IMAGE, fragmentMainImage);\n\t\tshaderParts.set(Section.VERTEX_HEAD, vertexHead);\n\t\tshaderParts.set(Section.VERTEX_MAIN_SUPPORT, vertexMainSupport);\n\n\t\tif(effect.extensions !== null) {\n\n\t\t\t// Collect required WebGL extensions.\n\t\t\tfor(const extension of effect.extensions) {\n\n\t\t\t\tdata.extensions.add(extension);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * An effect pass.\n *\n * Use this pass to combine {@link Effect} instances.\n *\n * @implements {EventListener}\n */\n\nexport class EffectPass extends Pass {\n\n\t/**\n\t * Constructs a new effect pass.\n\t *\n\t * @param {Camera} camera - The main camera.\n\t * @param {...Effect} effects - The effects that will be rendered by this pass.\n\t */\n\n\tconstructor(camera, ...effects) {\n\n\t\tsuper(\"EffectPass\");\n\n\t\tthis.fullscreenMaterial = new EffectMaterial(null, null, null, camera);\n\n\t\t/**\n\t\t * An event listener that forwards events to {@link handleEvent}.\n\t\t *\n\t\t * @type {EventListener}\n\t\t * @private\n\t\t */\n\n\t\tthis.listener = (event) => this.handleEvent(event);\n\n\t\t/**\n\t\t * The effects.\n\t\t *\n\t\t * Use `updateMaterial` or `recompile` after changing the effects and consider calling `dispose` to free resources\n\t\t * of unused effects.\n\t\t *\n\t\t * @type {Effect[]}\n\t\t * @private\n\t\t */\n\n\t\tthis.effects = [];\n\t\tthis.setEffects(effects);\n\n\t\t/**\n\t\t * Indicates whether this pass should skip rendering.\n\t\t *\n\t\t * Effects will still be updated, even if this flag is true.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\n\t\tthis.skipRendering = false;\n\n\t\t/**\n\t\t * A time offset.\n\t\t *\n\t\t * Elapsed time will start at this value.\n\t\t *\n\t\t * @type {Number}\n\t\t * @deprecated\n\t\t */\n\n\t\tthis.minTime = 1.0;\n\n\t\t/**\n\t\t * The maximum time.\n\t\t *\n\t\t * If the elapsed time exceeds this value, it will be reset.\n\t\t *\n\t\t * @type {Number}\n\t\t * @deprecated\n\t\t */\n\n\t\tthis.maxTime = Number.POSITIVE_INFINITY;\n\n\t}\n\n\t/**\n\t * Indicates whether this pass encodes its output when rendering to screen.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use fullscreenMaterial.encodeOutput instead.\n\t */\n\n\tget encodeOutput() {\n\n\t\treturn this.fullscreenMaterial.encodeOutput;\n\n\t}\n\n\tset encodeOutput(value) {\n\n\t\tthis.fullscreenMaterial.encodeOutput = value;\n\n\t}\n\n\t/**\n\t * Indicates whether dithering is enabled.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget dithering() {\n\n\t\treturn this.fullscreenMaterial.dithering;\n\n\t}\n\n\tset dithering(value) {\n\n\t\tconst material = this.fullscreenMaterial;\n\t\tmaterial.dithering = value;\n\t\tmaterial.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Sets the effects.\n\t *\n\t * @param {Effect[]} effects - The effects.\n\t * @protected\n\t */\n\n\tsetEffects(effects) {\n\n\t\tfor(const effect of this.effects) {\n\n\t\t\teffect.removeEventListener(\"change\", this.listener);\n\n\t\t}\n\n\t\tthis.effects = effects.sort((a, b) => (b.attributes - a.attributes));\n\n\t\tfor(const effect of this.effects) {\n\n\t\t\teffect.addEventListener(\"change\", this.listener);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the compound shader material.\n\t *\n\t * @protected\n\t */\n\n\tupdateMaterial() {\n\n\t\tconst data = new EffectShaderData();\n\t\tlet id = 0;\n\n\t\tfor(const effect of this.effects) {\n\n\t\t\tif(effect.blendMode.blendFunction === BlendFunction.DST) {\n\n\t\t\t\t// Check if this effect relies on depth and continue.\n\t\t\t\tdata.attributes |= (effect.getAttributes() & EffectAttribute.DEPTH);\n\n\t\t\t} else if((data.attributes & effect.getAttributes() & EffectAttribute.CONVOLUTION) !== 0) {\n\n\t\t\t\tthrow new Error(`Convolution effects cannot be merged (${effect.name})`);\n\n\t\t\t} else {\n\n\t\t\t\tintegrateEffect(\"e\" + id++, effect, data);\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet fragmentHead = data.shaderParts.get(Section.FRAGMENT_HEAD);\n\t\tlet fragmentMainImage = data.shaderParts.get(Section.FRAGMENT_MAIN_IMAGE);\n\t\tlet fragmentMainUv = data.shaderParts.get(Section.FRAGMENT_MAIN_UV);\n\n\t\t// Integrate the relevant blend functions.\n\t\tconst blendRegExp = /\\bblend\\b/g;\n\n\t\tfor(const blendMode of data.blendModes.values()) {\n\n\t\t\tfragmentHead += blendMode.getShaderCode().replace(blendRegExp, `blend${blendMode.blendFunction}`) + \"\\n\";\n\n\t\t}\n\n\t\t// Check if any effect relies on depth.\n\t\tif((data.attributes & EffectAttribute.DEPTH) !== 0) {\n\n\t\t\t// Check if depth should be read.\n\t\t\tif(data.readDepth) {\n\n\t\t\t\tfragmentMainImage = \"float depth = readDepth(UV);\\n\\n\\t\" + fragmentMainImage;\n\n\t\t\t}\n\n\t\t\t// Only request a depth texture if none has been provided yet.\n\t\t\tthis.needsDepthTexture = (this.getDepthTexture() === null);\n\n\t\t} else {\n\n\t\t\tthis.needsDepthTexture = false;\n\n\t\t}\n\n\t\tif(data.colorSpace === sRGBEncoding) {\n\n\t\t\t// Convert back to linear.\n\t\t\tfragmentMainImage += \"color0 = sRGBToLinear(color0);\\n\\t\";\n\n\t\t}\n\n\t\t// Check if any effect transforms UVs in the fragment shader.\n\t\tif(data.uvTransformation) {\n\n\t\t\tfragmentMainUv = \"vec2 transformedUv = vUv;\\n\" + fragmentMainUv;\n\t\t\tdata.defines.set(\"UV\", \"transformedUv\");\n\n\t\t} else {\n\n\t\t\tdata.defines.set(\"UV\", \"vUv\");\n\n\t\t}\n\n\t\tdata.shaderParts.set(Section.FRAGMENT_HEAD, fragmentHead);\n\t\tdata.shaderParts.set(Section.FRAGMENT_MAIN_IMAGE, fragmentMainImage);\n\t\tdata.shaderParts.set(Section.FRAGMENT_MAIN_UV, fragmentMainUv);\n\n\t\t// Ensure that leading preprocessor directives start on a new line.\n\t\tdata.shaderParts.forEach((value, key, map) => map.set(key, value?.trim().replace(/^#/, \"\\n#\")));\n\n\t\tthis.skipRendering = (id === 0);\n\t\tthis.needsSwap = !this.skipRendering;\n\t\tthis.fullscreenMaterial.setShaderData(data);\n\n\t}\n\n\t/**\n\t * Rebuilds the shader material.\n\t */\n\n\trecompile() {\n\n\t\tthis.updateMaterial();\n\n\t}\n\n\t/**\n\t * Returns the current depth texture.\n\t *\n\t * @return {Texture} The current depth texture, or null if there is none.\n\t */\n\n\tgetDepthTexture() {\n\n\t\treturn this.fullscreenMaterial.depthBuffer;\n\n\t}\n\n\t/**\n\t * Sets the depth texture.\n\t *\n\t * @param {Texture} depthTexture - A depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing.\n\t */\n\n\tsetDepthTexture(depthTexture, depthPacking = BasicDepthPacking) {\n\n\t\tthis.fullscreenMaterial.depthBuffer = depthTexture;\n\t\tthis.fullscreenMaterial.depthPacking = depthPacking;\n\n\t\tfor(const effect of this.effects) {\n\n\t\t\teffect.setDepthTexture(depthTexture, depthPacking);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Renders the effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tfor(const effect of this.effects) {\n\n\t\t\teffect.update(renderer, inputBuffer, deltaTime);\n\n\t\t}\n\n\t\tif(!this.skipRendering || this.renderToScreen) {\n\n\t\t\tconst material = this.fullscreenMaterial;\n\t\t\tmaterial.inputBuffer = inputBuffer.texture;\n\t\t\tmaterial.time += deltaTime;\n\n\t\t\trenderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n\t\t\trenderer.render(this.scene, this.camera);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.fullscreenMaterial.setSize(width, height);\n\n\t\tfor(const effect of this.effects) {\n\n\t\t\teffect.setSize(width, height);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tthis.renderer = renderer;\n\n\t\t// Initialize effects before building the shader.\n\t\tfor(const effect of this.effects) {\n\n\t\t\teffect.initialize(renderer, alpha, frameBufferType);\n\n\t\t}\n\n\t\t// Initialize the fullscreen material.\n\t\tthis.updateMaterial();\n\n\t\tif(frameBufferType !== undefined && frameBufferType !== UnsignedByteType) {\n\n\t\t\tthis.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Deletes disposable objects.\n\t */\n\n\tdispose() {\n\n\t\tsuper.dispose();\n\n\t\tfor(const effect of this.effects) {\n\n\t\t\teffect.removeEventListener(\"change\", this.listener);\n\t\t\teffect.dispose();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Handles events.\n\t *\n\t * @param {Event} event - An event.\n\t */\n\n\thandleEvent(event) {\n\n\t\tswitch(event.type) {\n\n\t\t\tcase \"change\":\n\t\t\t\tthis.recompile();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n", "import { sRGBEncoding, UnsignedByteType, WebGLRenderTarget } from \"three\";\nimport { CopyMaterial, GaussianBlurMaterial } from \"../materials\";\nimport { Resolution } from \"../core\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A Gaussian blur pass.\n */\n\nexport class GaussianBlurPass extends Pass {\n\n\t/**\n\t * Constructs a new Gaussian blur pass.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {Number} [options.kernelSize=35] - The kernel size. Should be an odd number in the range [3, 1020].\n\t * @param {Number} [options.iterations=1] - The amount of times the blur should be applied.\n\t * @param {Number} [options.resolutionScale=1.0] - The resolution scale.\n\t * @param {Number} [options.resolutionX=Resolution.AUTO_SIZE] - The horizontal resolution.\n\t * @param {Number} [options.resolutionY=Resolution.AUTO_SIZE] - The vertical resolution.\n\t */\n\n\tconstructor({\n\t\tkernelSize = 35,\n\t\titerations = 1,\n\t\tresolutionScale = 1.0,\n\t\tresolutionX = Resolution.AUTO_SIZE,\n\t\tresolutionY = Resolution.AUTO_SIZE\n\t} = {}) {\n\n\t\tsuper(\"GaussianBlurPass\");\n\n\t\t/**\n\t\t * A render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetA = new WebGLRenderTarget(1, 1, { depthBuffer: false });\n\t\tthis.renderTargetA.texture.name = \"Blur.Target.A\";\n\n\t\t/**\n\t\t * A render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetB = this.renderTargetA.clone();\n\t\tthis.renderTargetB.texture.name = \"Blur.Target.B\";\n\n\t\t/**\n\t\t * The blur material.\n\t\t *\n\t\t * @type {GaussianBlurMaterial}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.blurMaterial = new GaussianBlurMaterial({ kernelSize });\n\n\t\t/**\n\t\t * A copy material.\n\t\t *\n\t\t * @type {CopyMaterial}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.copyMaterial = new CopyMaterial();\n\t\tthis.copyMaterial.inputBuffer = this.renderTargetB.texture;\n\n\t\t/**\n\t\t * The render resolution.\n\t\t *\n\t\t * @type {Resolution}\n\t\t * @readonly\n\t\t */\n\n\t\tconst resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n\t\tresolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n\n\t\t/**\n\t\t * The amount of blur iterations.\n\t\t *\n\t\t * @type {Number}\n\t\t */\n\n\t\tthis.iterations = iterations;\n\n\t}\n\n\t/**\n\t * Renders the blur.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst scene = this.scene;\n\t\tconst camera = this.camera;\n\t\tconst renderTargetA = this.renderTargetA;\n\t\tconst renderTargetB = this.renderTargetB;\n\t\tconst blurMaterial = this.blurMaterial;\n\t\tthis.fullscreenMaterial = blurMaterial;\n\n\t\tlet previousBuffer = inputBuffer;\n\n\t\tfor(let i = 0, l = Math.max(this.iterations, 1); i < l; ++i) {\n\n\t\t\t// Blur direction: Horizontal\n\t\t\tblurMaterial.direction.set(1.0, 0.0);\n\t\t\tblurMaterial.inputBuffer = previousBuffer.texture;\n\t\t\trenderer.setRenderTarget(renderTargetA);\n\t\t\trenderer.render(scene, camera);\n\n\t\t\t// Blur direction: Vertical\n\t\t\tblurMaterial.direction.set(0.0, 1.0);\n\t\t\tblurMaterial.inputBuffer = renderTargetA.texture;\n\t\t\trenderer.setRenderTarget(renderTargetB);\n\t\t\trenderer.render(scene, camera);\n\n\t\t\t// Use renderTargetB as input for further blur iterations.\n\t\t\tpreviousBuffer = renderTargetB;\n\n\t\t}\n\n\t\t// Copy the result to the output buffer.\n\t\tthis.fullscreenMaterial = this.copyMaterial;\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n\t\trenderer.render(scene, camera);\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.setBaseSize(width, height);\n\t\tconst w = resolution.width, h = resolution.height;\n\n\t\tthis.renderTargetA.setSize(w, h);\n\t\tthis.renderTargetB.setSize(w, h);\n\t\tthis.blurMaterial.setSize(w, h);\n\t\tthis.blurMaterial.resolutionScale = resolution.scale;\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tif(frameBufferType !== undefined) {\n\n\t\t\tthis.renderTargetA.texture.type = frameBufferType;\n\t\t\tthis.renderTargetB.texture.type = frameBufferType;\n\n\t\t\tif(frameBufferType !== UnsignedByteType) {\n\n\t\t\t\tthis.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n\n\t\t\t} else if(renderer.outputEncoding === sRGBEncoding) {\n\n\t\t\t\tthis.renderTargetA.texture.encoding = sRGBEncoding;\n\t\t\t\tthis.renderTargetB.texture.encoding = sRGBEncoding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n", "import { sRGBEncoding, UnsignedByteType, WebGLRenderTarget } from \"three\";\nimport { CopyMaterial, KawaseBlurMaterial } from \"../materials\";\nimport { Resolution } from \"../core\";\nimport { KernelSize } from \"../enums\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A Kawase blur pass.\n *\n * Provides better performance compared to {@link GaussianBlurPass} at larger kernel sizes.\n */\n\nexport class KawaseBlurPass extends Pass {\n\n\t/**\n\t * Constructs a new Kawase blur pass.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {KernelSize} [options.kernelSize=KernelSize.MEDIUM] - The blur kernel size.\n\t * @param {Number} [options.resolutionScale=0.5] - The resolution scale.\n\t * @param {Number} [options.resolutionX=Resolution.AUTO_SIZE] - The horizontal resolution.\n\t * @param {Number} [options.resolutionY=Resolution.AUTO_SIZE] - The vertical resolution.\n\t * @param {Number} [options.width=Resolution.AUTO_SIZE] - Deprecated. Use resolutionX instead.\n\t * @param {Number} [options.height=Resolution.AUTO_SIZE] - Deprecated. Use resolutionY instead.\n\t */\n\n\tconstructor({\n\t\tkernelSize = KernelSize.MEDIUM,\n\t\tresolutionScale = 0.5,\n\t\twidth = Resolution.AUTO_SIZE,\n\t\theight = Resolution.AUTO_SIZE,\n\t\tresolutionX = width,\n\t\tresolutionY = height\n\t} = {}) {\n\n\t\tsuper(\"KawaseBlurPass\");\n\n\t\t/**\n\t\t * A render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetA = new WebGLRenderTarget(1, 1, { depthBuffer: false });\n\t\tthis.renderTargetA.texture.name = \"Blur.Target.A\";\n\n\t\t/**\n\t\t * A render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetB = this.renderTargetA.clone();\n\t\tthis.renderTargetB.texture.name = \"Blur.Target.B\";\n\n\t\t/**\n\t\t * The render resolution.\n\t\t *\n\t\t * @type {Resolution}\n\t\t * @readonly\n\t\t */\n\n\t\tconst resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n\t\tresolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n\n\t\t/**\n\t\t * The blur material.\n\t\t *\n\t\t * @type {KawaseBlurMaterial}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.blurMaterial = new KawaseBlurMaterial();\n\n\t\t/**\n\t\t * A copy material.\n\t\t *\n\t\t * @type {CopyMaterial}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.copyMaterial = new CopyMaterial();\n\n\t}\n\n\t/**\n\t * Returns the resolution settings.\n\t *\n\t * @deprecated Use resolution instead.\n\t * @return {Resolution} The resolution.\n\t */\n\n\tgetResolution() {\n\n\t\treturn this.resolution;\n\n\t}\n\n\t/**\n\t * Indicates whether dithering is enabled.\n\t *\n\t * @type {KernelSize}\n\t * @deprecated Use copyMaterial.dithering instead.\n\t */\n\n\tget dithering() {\n\n\t\treturn this.copyMaterial.dithering;\n\n\t}\n\n\tset dithering(value) {\n\n\t\tthis.copyMaterial.dithering = value;\n\n\t}\n\n\t/**\n\t * The kernel size.\n\t *\n\t * @type {KernelSize}\n\t * @deprecated Use blurMaterial.kernelSize instead.\n\t */\n\n\tget kernelSize() {\n\n\t\treturn this.blurMaterial.kernelSize;\n\n\t}\n\n\tset kernelSize(value) {\n\n\t\tthis.blurMaterial.kernelSize = value;\n\n\t}\n\n\t/**\n\t * The current width of the internal render targets.\n\t *\n\t * @type {Number}\n\t * @deprecated Use resolution.width instead.\n\t */\n\n\tget width() {\n\n\t\treturn this.resolution.width;\n\n\t}\n\n\t/**\n\t * Sets the render width.\n\t *\n\t * @type {Number}\n\t * @deprecated Use resolution.preferredWidth instead.\n\t */\n\n\tset width(value) {\n\n\t\tthis.resolution.preferredWidth = value;\n\n\t}\n\n\t/**\n\t * The current height of the internal render targets.\n\t *\n\t * @type {Number}\n\t * @deprecated Use resolution.height instead.\n\t */\n\n\tget height() {\n\n\t\treturn this.resolution.height;\n\n\t}\n\n\t/**\n\t * Sets the render height.\n\t *\n\t * @type {Number}\n\t * @deprecated Use resolution.preferredHeight instead.\n\t */\n\n\tset height(value) {\n\n\t\tthis.resolution.preferredHeight = value;\n\n\t}\n\n\t/**\n\t * The current blur scale.\n\t *\n\t * @type {Number}\n\t * @deprecated Use blurMaterial.scale instead.\n\t */\n\n\tget scale() {\n\n\t\treturn this.blurMaterial.scale;\n\n\t}\n\n\tset scale(value) {\n\n\t\tthis.blurMaterial.scale = value;\n\n\t}\n\n\t/**\n\t * Returns the current blur scale.\n\t *\n\t * @deprecated Use blurMaterial.scale instead.\n\t * @return {Number} The scale.\n\t */\n\n\tgetScale() {\n\n\t\treturn this.blurMaterial.scale;\n\n\t}\n\n\t/**\n\t * Sets the blur scale.\n\t *\n\t * @deprecated Use blurMaterial.scale instead.\n\t * @param {Number} value - The scale.\n\t */\n\n\tsetScale(value) {\n\n\t\tthis.blurMaterial.scale = value;\n\n\t}\n\n\t/**\n\t * Returns the kernel size.\n\t *\n\t * @deprecated Use blurMaterial.kernelSize instead.\n\t * @return {KernelSize} The kernel size.\n\t */\n\n\tgetKernelSize() {\n\n\t\treturn this.kernelSize;\n\n\t}\n\n\t/**\n\t * Sets the kernel size.\n\t *\n\t * Larger kernels require more processing power but scale well with larger render resolutions.\n\t *\n\t * @deprecated Use blurMaterial.kernelSize instead.\n\t * @param {KernelSize} value - The kernel size.\n\t */\n\n\tsetKernelSize(value) {\n\n\t\tthis.kernelSize = value;\n\n\t}\n\n\t/**\n\t * Returns the current resolution scale.\n\t *\n\t * @return {Number} The resolution scale.\n\t * @deprecated Use resolution instead.\n\t */\n\n\tgetResolutionScale() {\n\n\t\treturn this.resolution.scale;\n\n\t}\n\n\t/**\n\t * Sets the resolution scale.\n\t *\n\t * @param {Number} scale - The new resolution scale.\n\t * @deprecated Use resolution instead.\n\t */\n\n\tsetResolutionScale(scale) {\n\n\t\tthis.resolution.scale = scale;\n\n\t}\n\n\t/**\n\t * Renders the blur.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst scene = this.scene;\n\t\tconst camera = this.camera;\n\t\tconst renderTargetA = this.renderTargetA;\n\t\tconst renderTargetB = this.renderTargetB;\n\t\tconst material = this.blurMaterial;\n\t\tconst kernelSequence = material.kernelSequence;\n\n\t\tlet previousBuffer = inputBuffer;\n\t\tthis.fullscreenMaterial = material;\n\n\t\t// Render the multi-pass blur.\n\t\tfor(let i = 0, l = kernelSequence.length; i < l; ++i) {\n\n\t\t\t// Alternate between targets.\n\t\t\tconst buffer = ((i & 1) === 0) ? renderTargetA : renderTargetB;\n\t\t\tmaterial.kernel = kernelSequence[i];\n\t\t\tmaterial.inputBuffer = previousBuffer.texture;\n\t\t\trenderer.setRenderTarget(buffer);\n\t\t\trenderer.render(scene, camera);\n\t\t\tpreviousBuffer = buffer;\n\n\t\t}\n\n\t\t// Copy the result to the output buffer.\n\t\tthis.fullscreenMaterial = this.copyMaterial;\n\t\tthis.copyMaterial.inputBuffer = previousBuffer.texture;\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n\t\trenderer.render(scene, camera);\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.setBaseSize(width, height);\n\t\tconst w = resolution.width, h = resolution.height;\n\n\t\tthis.renderTargetA.setSize(w, h);\n\t\tthis.renderTargetB.setSize(w, h);\n\t\tthis.blurMaterial.setSize(w, h);\n\t\tthis.blurMaterial.resolutionScale = resolution.scale;\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tif(frameBufferType !== undefined) {\n\n\t\t\tthis.renderTargetA.texture.type = frameBufferType;\n\t\t\tthis.renderTargetB.texture.type = frameBufferType;\n\n\t\t\tif(frameBufferType !== UnsignedByteType) {\n\n\t\t\t\tthis.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n\n\t\t\t} else if(renderer.outputEncoding === sRGBEncoding) {\n\n\t\t\t\tthis.renderTargetA.texture.encoding = sRGBEncoding;\n\t\t\t\tthis.renderTargetB.texture.encoding = sRGBEncoding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * An auto sizing flag.\n\t *\n\t * @type {Number}\n\t * @deprecated Use {@link Resolution.AUTO_SIZE} instead.\n\t */\n\n\tstatic get AUTO_SIZE() {\n\n\t\treturn Resolution.AUTO_SIZE;\n\n\t}\n\n}\n", "import { Pass } from \"./Pass\";\n\n/**\n * A pass that executes a given function.\n */\n\nexport class LambdaPass extends Pass {\n\n\t/**\n\t * Constructs a new lambda pass.\n\t *\n\t * @param {Function} f - A function.\n\t */\n\n\tconstructor(f) {\n\n\t\tsuper(\"LambdaPass\", null, null);\n\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * A function.\n\t\t *\n\t\t * @type {Function}\n\t\t * @private\n\t\t */\n\n\t\tthis.f = f;\n\n\t}\n\n\t/**\n\t * Executes the function.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tthis.f();\n\n\t}\n\n}\n", "import { UnsignedByteType, WebGLRenderTarget } from \"three\";\nimport { LuminanceMaterial } from \"../materials\";\nimport { Resolution } from \"../core/Resolution\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A pass that renders luminance.\n */\n\nexport class LuminancePass extends Pass {\n\n\t/**\n\t * Constructs a new luminance pass.\n\t *\n\t * @param {Object} [options] - The options. See {@link LuminanceMaterial} for additional options.\n\t * @param {WebGLRenderTarget} [options.renderTarget] - A custom render target.\n\t * @param {Number} [options.resolutionScale=1.0] - The resolution scale.\n\t * @param {Number} [options.resolutionX=Resolution.AUTO_SIZE] - The horizontal resolution.\n\t * @param {Number} [options.resolutionY=Resolution.AUTO_SIZE] - The vertical resolution.\n\t * @param {Number} [options.width=Resolution.AUTO_SIZE] - Deprecated. Use resolutionX instead.\n\t * @param {Number} [options.height=Resolution.AUTO_SIZE] - Deprecated. Use resolutionY instead.\n\t */\n\n\tconstructor({\n\t\trenderTarget,\n\t\tluminanceRange,\n\t\tcolorOutput,\n\t\tresolutionScale = 1.0,\n\t\twidth = Resolution.AUTO_SIZE,\n\t\theight = Resolution.AUTO_SIZE,\n\t\tresolutionX = width,\n\t\tresolutionY = height\n\t} = {}) {\n\n\t\tsuper(\"LuminancePass\");\n\n\t\tthis.fullscreenMaterial = new LuminanceMaterial(colorOutput, luminanceRange);\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * The luminance render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.renderTarget = renderTarget;\n\n\t\tif(this.renderTarget === undefined) {\n\n\t\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, { depthBuffer: false });\n\t\t\tthis.renderTarget.texture.name = \"LuminancePass.Target\";\n\n\t\t}\n\n\t\t/**\n\t\t * The resolution.\n\t\t *\n\t\t * @type {Resolution}\n\t\t * @readonly\n\t\t */\n\n\t\tconst resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n\t\tresolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n\n\t}\n\n\t/**\n\t * The luminance texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget texture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * Returns the luminance texture.\n\t *\n\t * @deprecated Use texture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetTexture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * Returns the resolution settings.\n\t *\n\t * @deprecated Use resolution instead.\n\t * @return {Resolution} The resolution.\n\t */\n\n\tgetResolution() {\n\n\t\treturn this.resolution;\n\n\t}\n\n\t/**\n\t * Renders the luminance.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst material = this.fullscreenMaterial;\n\t\tmaterial.inputBuffer = inputBuffer.texture;\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n\t\trenderer.render(this.scene, this.camera);\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.setBaseSize(width, height);\n\t\tthis.renderTarget.setSize(resolution.width, resolution.height);\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - A renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tif(frameBufferType !== undefined && frameBufferType !== UnsignedByteType) {\n\n\t\t\tthis.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n\n\t\t}\n\n\t}\n\n}\n", "import { ClearPass } from \"./ClearPass\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A stencil mask pass.\n *\n * This pass requires that the input and output buffers have a stencil buffer. You can enable the stencil buffer via the\n * {@link EffectComposer} constructor.\n */\n\nexport class MaskPass extends Pass {\n\n\t/**\n\t * Constructs a new mask pass.\n\t *\n\t * @param {Scene} scene - The scene to render.\n\t * @param {Camera} camera - The camera to use.\n\t */\n\n\tconstructor(scene, camera) {\n\n\t\tsuper(\"MaskPass\", scene, camera);\n\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * A clear pass.\n\t\t *\n\t\t * @type {ClearPass}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.clearPass = new ClearPass(false, false, true);\n\n\t\t/**\n\t\t * Inverse flag.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @deprecated Use inverted instead.\n\t\t */\n\n\t\tthis.inverse = false;\n\n\t}\n\n\t/**\n\t * Indicates whether the mask should be inverted.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget inverted() {\n\n\t\treturn this.inverse;\n\n\t}\n\n\tset inverted(value) {\n\n\t\tthis.inverse = value;\n\n\t}\n\n\t/**\n\t * Indicates whether this pass should clear the stencil buffer.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use clearPass.enabled instead.\n\t */\n\n\tget clear() {\n\n\t\treturn this.clearPass.enabled;\n\n\t}\n\n\tset clear(value) {\n\n\t\tthis.clearPass.enabled = value;\n\n\t}\n\n\t/**\n\t * Returns the internal clear pass.\n\t *\n\t * @deprecated Use clearPass.enabled instead.\n\t * @return {ClearPass} The clear pass.\n\t */\n\n\tgetClearPass() {\n\n\t\treturn this.clearPass;\n\n\t}\n\n\t/**\n\t * Indicates whether the mask is inverted.\n\t *\n\t * @deprecated Use inverted instead.\n\t * @return {Boolean} Whether the mask is inverted.\n\t */\n\n\tisInverted() {\n\n\t\treturn this.inverted;\n\n\t}\n\n\t/**\n\t * Enables or disable mask inversion.\n\t *\n\t * @deprecated Use inverted instead.\n\t * @param {Boolean} value - Whether the mask should be inverted.\n\t */\n\n\tsetInverted(value) {\n\n\t\tthis.inverted = value;\n\n\t}\n\n\t/**\n\t * Renders the effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst context = renderer.getContext();\n\t\tconst buffers = renderer.state.buffers;\n\n\t\tconst scene = this.scene;\n\t\tconst camera = this.camera;\n\t\tconst clearPass = this.clearPass;\n\n\t\tconst writeValue = this.inverted ? 0 : 1;\n\t\tconst clearValue = 1 - writeValue;\n\n\t\t// Don't update color or depth.\n\t\tbuffers.color.setMask(false);\n\t\tbuffers.depth.setMask(false);\n\n\t\t// Lock the buffers.\n\t\tbuffers.color.setLocked(true);\n\t\tbuffers.depth.setLocked(true);\n\n\t\t// Configure the stencil.\n\t\tbuffers.stencil.setTest(true);\n\t\tbuffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\n\t\tbuffers.stencil.setFunc(context.ALWAYS, writeValue, 0xffffffff);\n\t\tbuffers.stencil.setClear(clearValue);\n\t\tbuffers.stencil.setLocked(true);\n\n\t\t// Clear the stencil.\n\t\tif(this.clearPass.enabled) {\n\n\t\t\tif(this.renderToScreen) {\n\n\t\t\t\tclearPass.render(renderer, null);\n\n\t\t\t} else {\n\n\t\t\t\tclearPass.render(renderer, inputBuffer);\n\t\t\t\tclearPass.render(renderer, outputBuffer);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Draw the mask.\n\t\tif(this.renderToScreen) {\n\n\t\t\trenderer.setRenderTarget(null);\n\t\t\trenderer.render(scene, camera);\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget(inputBuffer);\n\t\t\trenderer.render(scene, camera);\n\t\t\trenderer.setRenderTarget(outputBuffer);\n\t\t\trenderer.render(scene, camera);\n\n\t\t}\n\n\t\t// Unlock the buffers.\n\t\tbuffers.color.setLocked(false);\n\t\tbuffers.depth.setLocked(false);\n\n\t\t// Only render where the stencil is set to 1.\n\t\tbuffers.stencil.setLocked(false);\n\t\tbuffers.stencil.setFunc(context.EQUAL, 1, 0xffffffff);\n\t\tbuffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\n\t\tbuffers.stencil.setLocked(true);\n\n\t}\n\n}\n", "import { sRGBEncoding, UnsignedByteType, Vector2, WebGLRenderTarget } from \"three\";\nimport { DownsamplingMaterial, UpsamplingMaterial } from \"../materials\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A blur pass that produces a wide blur by downsampling and upsampling the input over multiple MIP levels.\n *\n * Based on an article by Fabrice Piquet\n * https://www.froyok.fr/blog/2021-12-ue4-custom-bloom/\n */\n\nexport class MipmapBlurPass extends Pass {\n\n\t/**\n\t * Constructs a new mipmap blur pass.\n\t *\n\t * @param {Object} [options] - The options.\n\t */\n\n\tconstructor() {\n\n\t\tsuper(\"MipmapBlurPass\");\n\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * The output render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, { depthBuffer: false });\n\t\tthis.renderTarget.texture.name = \"Upsampling.Mipmap0\";\n\n\t\t/**\n\t\t * The mipmaps used for downsampling.\n\t\t *\n\t\t * @type {WebGLRenderTarget[]}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.downsamplingMipmaps = [];\n\n\t\t/**\n\t\t * The mipmaps used for upsampling.\n\t\t *\n\t\t * @type {WebGLRenderTarget[]}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.upsamplingMipmaps = [];\n\n\t\t/**\n\t\t * A downsampling material.\n\t\t *\n\t\t * @type {DownsamplingMaterial}\n\t\t * @private\n\t\t */\n\n\t\tthis.downsamplingMaterial = new DownsamplingMaterial();\n\n\t\t/**\n\t\t * An upsampling material.\n\t\t *\n\t\t * @type {UpsamplingMaterial}\n\t\t * @private\n\t\t */\n\n\t\tthis.upsamplingMaterial = new UpsamplingMaterial();\n\n\t\t/**\n\t\t * The current resolution.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @private\n\t\t */\n\n\t\tthis.resolution = new Vector2();\n\n\t}\n\n\t/**\n\t * A texture that contains the blurred result.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget texture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * The MIP levels. Default is 8.\n\t *\n\t * @type {Number}\n\t */\n\n\tget levels() {\n\n\t\treturn this.downsamplingMipmaps.length;\n\n\t}\n\n\tset levels(value) {\n\n\t\tif(this.levels !== value) {\n\n\t\t\tconst renderTarget = this.renderTarget;\n\n\t\t\tthis.dispose();\n\n\t\t\tfor(let i = 0; i < value; ++i) {\n\n\t\t\t\tconst mipmap = renderTarget.clone();\n\t\t\t\tmipmap.texture.name = \"Downsampling.Mipmap\" + i;\n\t\t\t\tthis.downsamplingMipmaps.push(mipmap);\n\n\t\t\t}\n\n\t\t\tthis.upsamplingMipmaps.push(renderTarget);\n\n\t\t\tfor(let i = 1, l = value - 1; i < l; ++i) {\n\n\t\t\t\tconst mipmap = renderTarget.clone();\n\t\t\t\tmipmap.texture.name = \"Upsampling.Mipmap\" + i;\n\t\t\t\tthis.upsamplingMipmaps.push(mipmap);\n\n\t\t\t}\n\n\t\t\tthis.setSize(this.resolution.x, this.resolution.y);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * The blur radius.\n\t *\n\t * @type {Number}\n\t */\n\n\tget radius() {\n\n\t\treturn this.upsamplingMaterial.radius;\n\n\t}\n\n\tset radius(value) {\n\n\t\tthis.upsamplingMaterial.radius = value;\n\n\t}\n\n\t/**\n\t * Renders the blur.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst { scene, camera } = this;\n\t\tconst { downsamplingMaterial, upsamplingMaterial } = this;\n\t\tconst { downsamplingMipmaps, upsamplingMipmaps } = this;\n\n\t\tlet previousBuffer = inputBuffer;\n\n\t\t// Downsample the input to the highest MIP level (smallest mipmap).\n\t\tthis.fullscreenMaterial = downsamplingMaterial;\n\n\t\tfor(let i = 0, l = downsamplingMipmaps.length; i < l; ++i) {\n\n\t\t\tconst mipmap = downsamplingMipmaps[i];\n\t\t\tdownsamplingMaterial.setSize(previousBuffer.width, previousBuffer.height);\n\t\t\tdownsamplingMaterial.inputBuffer = previousBuffer.texture;\n\t\t\trenderer.setRenderTarget(mipmap);\n\t\t\trenderer.render(scene, camera);\n\t\t\tpreviousBuffer = mipmap;\n\n\t\t}\n\n\t\t// Upsample the result back to the lowest MIP level (largest mipmap, half resolution).\n\t\tthis.fullscreenMaterial = upsamplingMaterial;\n\n\t\t// A + B = C, then D + C = F, etc.\n\t\tfor(let i = upsamplingMipmaps.length - 1; i >= 0; --i) {\n\n\t\t\tconst mipmap = upsamplingMipmaps[i];\n\t\t\tupsamplingMaterial.setSize(previousBuffer.width, previousBuffer.height);\n\t\t\tupsamplingMaterial.inputBuffer = previousBuffer.texture;\n\t\t\tupsamplingMaterial.supportBuffer = downsamplingMipmaps[i].texture;\n\t\t\trenderer.setRenderTarget(mipmap);\n\t\t\trenderer.render(scene, camera);\n\t\t\tpreviousBuffer = mipmap;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.set(width, height);\n\n\t\tlet w = resolution.width, h = resolution.height;\n\n\t\tfor(let i = 0, l = this.downsamplingMipmaps.length; i < l; ++i) {\n\n\t\t\tw = Math.round(w * 0.5);\n\t\t\th = Math.round(h * 0.5);\n\n\t\t\tthis.downsamplingMipmaps[i].setSize(w, h);\n\n\t\t\tif(i < this.upsamplingMipmaps.length) {\n\n\t\t\t\tthis.upsamplingMipmaps[i].setSize(w, h);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tif(frameBufferType !== undefined) {\n\n\t\t\tconst mipmaps = this.downsamplingMipmaps.concat(this.upsamplingMipmaps);\n\n\t\t\tfor(const mipmap of mipmaps) {\n\n\t\t\t\tmipmap.texture.type = frameBufferType;\n\n\t\t\t}\n\n\t\t\tif(frameBufferType !== UnsignedByteType) {\n\n\t\t\t\tthis.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n\t\t\t\tthis.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n\n\t\t\t} else if(renderer.outputEncoding === sRGBEncoding) {\n\n\t\t\t\tfor(const mipmap of mipmaps) {\n\n\t\t\t\t\tmipmap.texture.encoding = sRGBEncoding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Deletes internal render targets and textures.\n\t */\n\n\tdispose() {\n\n\t\tsuper.dispose();\n\n\t\tfor(const mipmap of this.downsamplingMipmaps.concat(this.upsamplingMipmaps)) {\n\n\t\t\tmipmap.dispose();\n\n\t\t}\n\n\t\tthis.downsamplingMipmaps = [];\n\t\tthis.upsamplingMipmaps = [];\n\n\t}\n\n}\n", "import { Color, MeshNormalMaterial, NearestFilter, WebGLRenderTarget } from \"three\";\nimport { Resolution } from \"../core/Resolution\";\nimport { RenderPass } from \"./RenderPass\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A pass that renders the normals of a given scene.\n */\n\nexport class NormalPass extends Pass {\n\n\t/**\n\t * Constructs a new normal pass.\n\t *\n\t * @param {Scene} scene - The scene to render.\n\t * @param {Camera} camera - The camera to use to render the scene.\n\t * @param {Object} [options] - The options.\n\t * @param {WebGLRenderTarget} [options.renderTarget] - A custom render target.\n\t * @param {Number} [options.resolutionScale=1.0] - The resolution scale.\n\t * @param {Number} [options.resolutionX=Resolution.AUTO_SIZE] - The horizontal resolution.\n\t * @param {Number} [options.resolutionY=Resolution.AUTO_SIZE] - The vertical resolution.\n\t * @param {Number} [options.width=Resolution.AUTO_SIZE] - Deprecated. Use resolutionX instead.\n\t * @param {Number} [options.height=Resolution.AUTO_SIZE] - Deprecated. Use resolutionY instead.\n\t */\n\n\tconstructor(scene, camera, {\n\t\trenderTarget,\n\t\tresolutionScale = 1.0,\n\t\twidth = Resolution.AUTO_SIZE,\n\t\theight = Resolution.AUTO_SIZE,\n\t\tresolutionX = width,\n\t\tresolutionY = height\n\t} = {}) {\n\n\t\tsuper(\"NormalPass\");\n\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * A render pass.\n\t\t *\n\t\t * @type {RenderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderPass = new RenderPass(scene, camera, new MeshNormalMaterial());\n\n\t\tconst renderPass = this.renderPass;\n\t\trenderPass.setBackgroundDisabled(true);\n\t\trenderPass.setShadowMapDisabled(true);\n\n\t\tconst clearPass = renderPass.getClearPass();\n\t\tclearPass.setOverrideClearColor(new Color(0x7777ff));\n\t\tclearPass.setOverrideClearAlpha(1.0);\n\n\t\t/**\n\t\t * A render target for the scene normals.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.renderTarget = renderTarget;\n\n\t\tif(this.renderTarget === undefined) {\n\n\t\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\n\t\t\t\tminFilter: NearestFilter,\n\t\t\t\tmagFilter: NearestFilter\n\t\t\t});\n\n\t\t\tthis.renderTarget.texture.name = \"NormalPass.Target\";\n\n\t\t}\n\n\t\t/**\n\t\t * The resolution.\n\t\t *\n\t\t * @type {Resolution}\n\t\t * @readonly\n\t\t */\n\n\t\tconst resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n\t\tresolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n\n\t}\n\n\t/**\n\t * The normal texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget texture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * The normal texture.\n\t *\n\t * @deprecated Use texture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetTexture() {\n\n\t\treturn this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * Returns the resolution settings.\n\t *\n\t * @deprecated Use resolution instead.\n\t * @return {Resolution} The resolution.\n\t */\n\n\tgetResolution() {\n\n\t\treturn this.resolution;\n\n\t}\n\n\t/**\n\t * Returns the current resolution scale.\n\t *\n\t * @return {Number} The resolution scale.\n\t * @deprecated Use resolution.preferredWidth or resolution.preferredHeight instead.\n\t */\n\n\tgetResolutionScale() {\n\n\t\treturn this.resolution.scale;\n\n\t}\n\n\t/**\n\t * Sets the resolution scale.\n\t *\n\t * @param {Number} scale - The new resolution scale.\n\t * @deprecated Use resolution.preferredWidth or resolution.preferredHeight instead.\n\t */\n\n\tsetResolutionScale(scale) {\n\n\t\tthis.resolution.scale = scale;\n\n\t}\n\n\t/**\n\t * Renders the scene normals.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst renderTarget = this.renderToScreen ? null : this.renderTarget;\n\t\tthis.renderPass.render(renderer, renderTarget, renderTarget);\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.setBaseSize(width, height);\n\t\tthis.renderTarget.setSize(resolution.width, resolution.height);\n\n\t}\n\n}\n", "import { UnsignedByteType } from \"three\";\nimport { Pass } from \"./Pass\";\n\n/**\n * A shader pass.\n *\n * Renders any shader material as a fullscreen effect. If you want to create multiple chained effects, please use\n * {@link EffectPass} instead.\n */\n\nexport class ShaderPass extends Pass {\n\n\t/**\n\t * Constructs a new shader pass.\n\t *\n\t * @param {ShaderMaterial} material - A shader material.\n\t * @param {String} [input=\"inputBuffer\"] - The name of the input buffer uniform.\n\t */\n\n\tconstructor(material, input = \"inputBuffer\") {\n\n\t\tsuper(\"ShaderPass\");\n\n\t\tthis.fullscreenMaterial = material;\n\n\t\t/**\n\t\t * The name of the input buffer uniform.\n\t\t *\n\t\t * Most fullscreen materials modify texels from an input texture. This pass automatically assigns the main input\n\t\t * buffer to the uniform identified by the input name.\n\t\t *\n\t\t * @type {String}\n\t\t */\n\n\t\tthis.input = input;\n\n\t}\n\n\t/**\n\t * Sets the name of the input buffer uniform.\n\t *\n\t * @param {String} input - The name of the input buffer uniform.\n\t * @deprecated Use input instead.\n\t */\n\n\tsetInput(input) {}\n\n\t/**\n\t * Renders the effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\n\t */\n\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n\n\t\tconst uniforms = this.fullscreenMaterial.uniforms;\n\n\t\tif(inputBuffer !== null && uniforms !== undefined && uniforms[this.input] !== undefined) {\n\n\t\t\tuniforms[this.input].value = inputBuffer.texture;\n\n\t\t}\n\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n\t\trenderer.render(this.scene, this.camera);\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - A renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tif(frameBufferType !== undefined && frameBufferType !== UnsignedByteType) {\n\n\t\t\tthis.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n\n\t\t}\n\n\t}\n\n}\n", "const MILLISECONDS_TO_SECONDS = 1.0 / 1e3;\nconst SECONDS_TO_MILLISECONDS = 1e3;\n\n/**\n * A timer.\n *\n * Original implementation by Michael Herzog (Mugen87).\n *\n * @experimental Temporary substitute for {@link https://github.com/mrdoob/three.js/pull/17912}\n * @implements {EventListenerObject}\n * @implements {Disposable}\n */\n\nexport class Timer {\n\n\t/**\n\t * Constructs a new timer.\n\t */\n\n\tconstructor() {\n\n\t\t/**\n\t\t * The previous time in milliseconds.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.previousTime = 0;\n\n\t\t/**\n\t\t * The current time in milliseconds.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.currentTime = 0;\n\n\t\t/**\n\t\t * The most recent delta time in milliseconds.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.delta = 0;\n\n\t\t/**\n\t\t * The fixed time step in milliseconds.\n\t\t *\n\t\t * Default is 16.667 (60 fps).\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.fixedDelta = 1000.0 / 60.0;\n\n\t\t/**\n\t\t * The total elapsed time in milliseconds.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.elapsed = 0;\n\n\t\t/**\n\t\t * The timescale.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.timescale = 1.0;\n\n\t\t/**\n\t\t * Determines whether this timer should use a fixed time step.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\n\t\tthis.fixedDeltaEnabled = false;\n\n\t\t/**\n\t\t * Indicates whether auto reset is enabled.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\n\t\tthis.autoReset = false;\n\n\t}\n\n\t/**\n\t * Enables or disables the fixed time step.\n\t *\n\t * @param {Boolean} enabled - Whether the fixed delta time should be used.\n\t * @return {Timer} This timer.\n\t */\n\n\tsetFixedDeltaEnabled(enabled) {\n\n\t\tthis.fixedDeltaEnabled = enabled;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Indicates whether auto reset is enabled.\n\t *\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API}\n\t * @return {Boolean} Whether the timer will be reset on visibility change.\n\t */\n\n\tisAutoResetEnabled(enabled) {\n\n\t\treturn this.autoReset;\n\n\t}\n\n\t/**\n\t * Enables or disables auto reset based on page visibility.\n\t *\n\t * If enabled, the timer will be reset when the page becomes visible. This effectively pauses the timer when the page\n\t * is hidden. Has no effect if the API is not supported.\n\t *\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API}\n\t * @param {Boolean} enabled - Whether the timer should be reset on visibility change.\n\t * @return {Timer} This timer.\n\t */\n\n\tsetAutoResetEnabled(enabled) {\n\n\t\tif(typeof document !== \"undefined\" && document.hidden !== undefined) {\n\n\t\t\tif(enabled) {\n\n\t\t\t\tdocument.addEventListener(\"visibilitychange\", this);\n\n\t\t\t} else {\n\n\t\t\t\tdocument.removeEventListener(\"visibilitychange\", this);\n\n\t\t\t}\n\n\t\t\tthis.autoReset = enabled;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Returns the delta time.\n\t *\n\t * @return {Number} The delta time in seconds.\n\t */\n\n\tgetDelta() {\n\n\t\treturn this.delta * MILLISECONDS_TO_SECONDS;\n\n\t}\n\n\t/**\n\t * Returns the fixed delta time.\n\t *\n\t * @return {Number} The fixed delta time in seconds.\n\t */\n\n\tgetFixedDelta() {\n\n\t\treturn this.fixedDelta * MILLISECONDS_TO_SECONDS;\n\n\t}\n\n\t/**\n\t * Sets the fixed delta time.\n\t *\n\t * @param {Number} fixedDelta - The delta time in seconds.\n\t * @return {Timer} This timer.\n\t */\n\n\tsetFixedDelta(fixedDelta) {\n\n\t\tthis.fixedDelta = fixedDelta * SECONDS_TO_MILLISECONDS;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Returns the elapsed time.\n\t *\n\t * @return {Number} The elapsed time in seconds.\n\t */\n\n\tgetElapsed() {\n\n\t\treturn this.elapsed * MILLISECONDS_TO_SECONDS;\n\n\t}\n\n\t/**\n\t * Returns the timescale.\n\t *\n\t * @return {Number} The timescale.\n\t */\n\n\tgetTimescale() {\n\n\t\treturn this.timescale;\n\n\t}\n\n\t/**\n\t * Sets the timescale.\n\t *\n\t * @param {Number} timescale - The timescale.\n\t * @return {Timer} This timer.\n\t */\n\n\tsetTimescale(timescale) {\n\n\t\tthis.timescale = timescale;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Updates this timer.\n\t *\n\t * @param {Number} [timestamp] - The current time in milliseconds.\n\t * @return {Timer} This timer.\n\t */\n\n\tupdate(timestamp) {\n\n\t\tif(this.fixedDeltaEnabled) {\n\n\t\t\tthis.delta = this.fixedDelta;\n\n\t\t} else {\n\n\t\t\tthis.previousTime = this.currentTime;\n\t\t\tthis.currentTime = (timestamp !== undefined) ? timestamp : performance.now();\n\t\t\tthis.delta = this.currentTime - this.previousTime;\n\n\t\t}\n\n\t\tthis.delta *= this.timescale;\n\t\tthis.elapsed += this.delta;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Resets this timer.\n\t *\n\t * @return {Timer} This timer.\n\t */\n\n\treset() {\n\n\t\tthis.delta = 0;\n\t\tthis.elapsed = 0;\n\t\tthis.currentTime = performance.now();\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Handles events.\n\t *\n\t * @param {Event} event - The event.\n\t */\n\n\thandleEvent(event) {\n\n\t\tif(!document.hidden) {\n\n\t\t\t// Reset the current time.\n\t\t\tthis.currentTime = performance.now();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Disposes this timer.\n\t */\n\n\tdispose() {\n\n\t\tthis.setAutoResetEnabled(false);\n\n\t}\n\n}\n", "import { LinearEncoding } from \"three\";\nimport { EffectAttribute, EffectShaderSection as Section } from \"../enums\";\n\n/**\n * A collection of shader data.\n *\n * @internal\n */\n\nexport class EffectShaderData {\n\n\t/**\n\t * Constructs new shader data.\n\t */\n\n\tconstructor() {\n\n\t\t/**\n\t\t * The shader parts.\n\t\t *\n\t\t * @type {Map<EffectShaderSection, String>}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.shaderParts = new Map([\n\t\t\t[Section.FRAGMENT_HEAD, null],\n\t\t\t[Section.FRAGMENT_MAIN_UV, null],\n\t\t\t[Section.FRAGMENT_MAIN_IMAGE, null],\n\t\t\t[Section.VERTEX_HEAD, null],\n\t\t\t[Section.VERTEX_MAIN_SUPPORT, null]\n\t\t]);\n\n\t\t/**\n\t\t * Preprocessor macros.\n\t\t *\n\t\t * @type {Map<String, String>}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.defines = new Map();\n\n\t\t/**\n\t\t * The uniforms.\n\t\t *\n\t\t * @type {Map<String, Uniform>}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.uniforms = new Map();\n\n\t\t/**\n\t\t * The blend modes of the individual effects.\n\t\t *\n\t\t * @type {Map<BlendFunction, BlendMode>}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.blendModes = new Map();\n\n\t\t/**\n\t\t * Required extensions.\n\t\t *\n\t\t * @type {Set<WebGLExtension>}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.extensions = new Set();\n\n\t\t/**\n\t\t * Combined effect attributes.\n\t\t *\n\t\t * @type {EffectAttribute}\n\t\t */\n\n\t\tthis.attributes = EffectAttribute.NONE;\n\n\t\t/**\n\t\t * A list of varyings.\n\t\t *\n\t\t * @type {Set<String>}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.varyings = new Set();\n\n\t\t/**\n\t\t * Indicates whether the shader transforms UV coordinates in the fragment shader.\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\n\t\tthis.uvTransformation = false;\n\n\t\t/**\n\t\t * Indicates whether the shader reads depth in the fragment shader.\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\n\t\tthis.readDepth = false;\n\n\t\t/**\n\t\t * Keeps track of the current color space.\n\t\t *\n\t\t * @type {TextureEncoding}\n\t\t */\n\n\t\tthis.colorSpace = LinearEncoding;\n\n\t}\n\n}\n", "/**\n * Uses Pascal's Triangle to generate coefficients in the expansion of any binomial expression.\n *\n * For details see https://mathworld.wolfram.com/PascalsTriangle.html.\n *\n * @param {Number} n - The index of the coefficients row in Pascal's Triangle.\n * @return {Float64Array} The integer coefficients stored as doubles.\n * @ignore\n */\n\nfunction getCoefficients(n) {\n\n\tlet result;\n\n\tif(n === 0) {\n\n\t\tresult = new Float64Array(0);\n\n\t} else if(n === 1) {\n\n\t\tresult = new Float64Array([1]);\n\n\t} else if(n > 1) {\n\n\t\t// Incrementally build Pascal's Triangle to get the desired row.\n\t\tlet row0 = new Float64Array(n);\n\t\tlet row1 = new Float64Array(n);\n\n\t\tfor(let y = 1; y <= n; ++y) {\n\n\t\t\tfor(let x = 0; x < y; ++x) {\n\n\t\t\t\trow1[x] = (x === 0 || x === y - 1) ? 1 : row0[x - 1] + row0[x];\n\n\t\t\t}\n\n\t\t\tresult = row1;\n\t\t\trow1 = row0;\n\t\t\trow0 = result;\n\n\t\t}\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * A Gauss kernel.\n *\n * Based on https://github.com/Jam3/glsl-fast-gaussian-blur.\n */\n\nexport class GaussKernel {\n\n\t/**\n\t * Constructs a new Gauss kernel.\n\t *\n\t * @param {Number} kernelSize - The kernel size. Should be an odd number in the range [3, 1020].\n\t * @param {Number} [edgeBias=2] - Determines how many edge coefficients should be cut off for increased accuracy.\n\t */\n\n\tconstructor(kernelSize, edgeBias = 2) {\n\n\t\t/**\n\t\t * The weights for discrete sampling.\n\t\t *\n\t\t * @type {Float64Array}\n\t\t */\n\n\t\tthis.weights = null;\n\n\t\t/**\n\t\t * The offsets for discrete sampling.\n\t\t *\n\t\t * @type {Float64Array}\n\t\t */\n\n\t\tthis.offsets = null;\n\n\t\t/**\n\t\t * The weights for linear sampling.\n\t\t *\n\t\t * @type {Float64Array}\n\t\t */\n\n\t\tthis.linearWeights = null;\n\n\t\t/**\n\t\t * The offsets for linear sampling.\n\t\t *\n\t\t * @type {Float64Array}\n\t\t */\n\n\t\tthis.linearOffsets = null;\n\n\t\tthis.generate(kernelSize, edgeBias);\n\n\t}\n\n\t/**\n\t * The number of steps for discrete sampling.\n\t *\n\t * @type {Number}\n\t */\n\n\tget steps() {\n\n\t\treturn (this.offsets === null) ? 0 : this.offsets.length;\n\n\t}\n\n\t/**\n\t * The number of steps for linear sampling.\n\t *\n\t * @type {Number}\n\t */\n\n\tget linearSteps() {\n\n\t\treturn (this.linearOffsets === null) ? 0 : this.linearOffsets.length;\n\n\t}\n\n\t/**\n\t * Generates the kernel.\n\t *\n\t * @private\n\t * @param {Number} kernelSize - The kernel size.\n\t * @param {Number} edgeBias - The amount of edge coefficients to ignore.\n\t */\n\n\tgenerate(kernelSize, edgeBias) {\n\n\t\tif(kernelSize < 3 || kernelSize > 1020) {\n\n\t\t\tthrow new Error(\"The kernel size must be in the range [3, 1020]\");\n\n\t\t}\n\n\t\tconst n = kernelSize + edgeBias * 2;\n\t\tconst coefficients = (edgeBias > 0) ?\n\t\t\tgetCoefficients(n).slice(edgeBias, -edgeBias) :\n\t\t\tgetCoefficients(n);\n\n\t\tconst mid = Math.floor((coefficients.length - 1) / 2);\n\t\tconst sum = coefficients.reduce((a, b) => a + b, 0);\n\t\tconst weights = coefficients.slice(mid);\n\t\tconst offsets = [...Array(mid + 1).keys()]; // [0..mid+1]\n\n\t\tconst linearWeights = new Float64Array(Math.floor(offsets.length / 2));\n\t\tconst linearOffsets = new Float64Array(linearWeights.length);\n\t\tlinearWeights[0] = weights[0] / sum;\n\n\t\tfor(let i = 1, j = 1, l = offsets.length - 1; i < l; i += 2, ++j) {\n\n\t\t\tconst offset0 = offsets[i], offset1 = offsets[i + 1];\n\t\t\tconst weight0 = weights[i], weight1 = weights[i + 1];\n\n\t\t\tconst w = weight0 + weight1;\n\t\t\tconst o = (offset0 * weight0 + offset1 * weight1) / w;\n\n\t\t\tlinearWeights[j] = w / sum;\n\t\t\tlinearOffsets[j] = o;\n\n\t\t}\n\n\t\tfor(let i = 0, l = weights.length, s = 1.0 / sum; i < l; ++i) {\n\n\t\t\tweights[i] *= s;\n\n\t\t}\n\n\t\t// Ensure that the weights add up to 1.\n\t\tconst linearWeightSum = (linearWeights.reduce((a, b) => a + b, 0) - linearWeights[0] * 0.5) * 2.0;\n\n\t\tif(linearWeightSum !== 0.0) {\n\n\t\t\tfor(let i = 0, l = linearWeights.length, s = 1.0 / linearWeightSum; i < l; ++i) {\n\n\t\t\t\tlinearWeights[i] *= s;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.offsets = offsets;\n\t\tthis.weights = weights;\n\t\tthis.linearOffsets = linearOffsets;\n\t\tthis.linearWeights = linearWeights;\n\n\t}\n\n}\n", "/**\n * The initializable contract.\n *\n * Implemented by objects that can be initialized.\n *\n * @interface\n */\n\nexport class Initializable {\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - A renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {}\n\n}\n", "/**\n * The Resizable contract.\n *\n * Implemented by objects that can be resized.\n *\n * @interface\n */\n\nexport class Resizable {\n\n\t/**\n\t * Sets the size of this object.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {}\n\n}\n", "/**\n * An object selection.\n *\n * Object selections use render layers to facilitate quick and efficient visibility changes.\n */\n\nexport class Selection extends Set {\n\n\t/**\n\t * Constructs a new selection.\n\t *\n\t * @param {Iterable<Object3D>} [iterable] - A collection of objects that should be added to this selection.\n\t * @param {Number} [layer=10] - A dedicated render layer for selected objects.\n\t */\n\n\tconstructor(iterable, layer = 10) {\n\n\t\tsuper();\n\n\t\t/**\n\t\t * The current render layer for selected objects.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.l = layer;\n\n\t\t/**\n\t\t * Controls whether objects that are added to this selection should be removed from all other layers.\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\n\t\tthis.exclusive = false;\n\n\t\tif(iterable !== undefined) {\n\n\t\t\tthis.set(iterable);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * The render layer for selected objects.\n\t *\n\t * @type {Number}\n\t */\n\n\tget layer() {\n\n\t\treturn this.l;\n\n\t}\n\n\tset layer(value) {\n\n\t\tconst currentLayer = this.l;\n\n\t\tfor(const object of this) {\n\n\t\t\tobject.layers.disable(currentLayer);\n\t\t\tobject.layers.enable(value);\n\n\t\t}\n\n\t\tthis.l = value;\n\n\t}\n\n\t/**\n\t * Returns the current render layer for selected objects.\n\t *\n\t * The default layer is 10. If this collides with your own custom layers, please change it before rendering!\n\t *\n\t * @deprecated Use layer instead.\n\t * @return {Number} The layer.\n\t */\n\n\tgetLayer() {\n\n\t\treturn this.layer;\n\n\t}\n\n\t/**\n\t * Sets the render layer for selected objects.\n\t *\n\t * The current selection will be updated accordingly.\n\t *\n\t * @deprecated Use layer instead.\n\t * @param {Number} value - The layer. Range is [0, 31].\n\t */\n\n\tsetLayer(value) {\n\n\t\tthis.layer = value;\n\n\t}\n\n\t/**\n\t * Indicates whether objects that are added to this selection will be removed from all other layers.\n\t *\n\t * @deprecated Use exclusive instead.\n\t * @return {Number} Whether this selection is exclusive. Default is false.\n\t */\n\n\tisExclusive() {\n\n\t\treturn this.exclusive;\n\n\t}\n\n\t/**\n\t * Controls whether objects that are added to this selection should be removed from all other layers.\n\t *\n\t * @deprecated Use exclusive instead.\n\t * @param {Number} value - Whether this selection should be exclusive.\n\t */\n\n\tsetExclusive(value) {\n\n\t\tthis.exclusive = value;\n\n\t}\n\n\t/**\n\t * Clears this selection.\n\t *\n\t * @return {Selection} This selection.\n\t */\n\n\tclear() {\n\n\t\tconst layer = this.layer;\n\n\t\tfor(const object of this) {\n\n\t\t\tobject.layers.disable(layer);\n\n\t\t}\n\n\t\treturn super.clear();\n\n\t}\n\n\t/**\n\t * Clears this selection and adds the given objects.\n\t *\n\t * @param {Iterable<Object3D>} objects - The objects that should be selected.\n\t * @return {Selection} This selection.\n\t */\n\n\tset(objects) {\n\n\t\tthis.clear();\n\n\t\tfor(const object of objects) {\n\n\t\t\tthis.add(object);\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * An alias for {@link has}.\n\t *\n\t * @param {Object3D} object - An object.\n\t * @return {Number} Returns 0 if the given object is currently selected, or -1 otherwise.\n\t * @deprecated Added for backward-compatibility.\n\t */\n\n\tindexOf(object) {\n\n\t\treturn this.has(object) ? 0 : -1;\n\n\t}\n\n\t/**\n\t * Adds an object to this selection.\n\t *\n\t * If {@link exclusive} is set to `true`, the object will also be removed from all other layers.\n\t *\n\t * @param {Object3D} object - The object that should be selected.\n\t * @return {Selection} This selection.\n\t */\n\n\tadd(object) {\n\n\t\tif(this.exclusive) {\n\n\t\t\tobject.layers.set(this.layer);\n\n\t\t} else {\n\n\t\t\tobject.layers.enable(this.layer);\n\n\t\t}\n\n\t\treturn super.add(object);\n\n\t}\n\n\t/**\n\t * Removes an object from this selection.\n\t *\n\t * @param {Object3D} object - The object that should be deselected.\n\t * @return {Boolean} Returns true if an object has successfully been removed from this selection; otherwise false.\n\t */\n\n\tdelete(object) {\n\n\t\tif(this.has(object)) {\n\n\t\t\tobject.layers.disable(this.layer);\n\n\t\t}\n\n\t\treturn super.delete(object);\n\n\t}\n\n\t/**\n\t * Removes an existing object from the selection. If the object doesn't exist it's added instead.\n\t *\n\t * @param {Object3D} object - The object.\n\t * @return {Boolean} Returns true if the object is added, false otherwise.\n\t */\n\n\ttoggle(object) {\n\n\t\tlet result;\n\n\t\tif(this.has(object)) {\n\n\t\t\tthis.delete(object);\n\t\t\tresult = false;\n\n\t\t} else {\n\n\t\t\tthis.add(object);\n\t\t\tresult = true;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t/**\n\t * Sets the visibility of all selected objects.\n\t *\n\t * This method enables or disables render layer 0 of all selected objects.\n\t *\n\t * @param {Boolean} visible - Whether the selected objects should be visible.\n\t * @return {Selection} This selection.\n\t */\n\n\tsetVisible(visible) {\n\n\t\tfor(const object of this) {\n\n\t\t\tif(visible) {\n\n\t\t\t\tobject.layers.enable(0);\n\n\t\t\t} else {\n\n\t\t\t\tobject.layers.disable(0);\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n", "import { EventDispatcher, Uniform } from \"three\";\nimport { BlendFunction } from \"../../enums\";\n\nimport add from \"./glsl/add.frag\";\nimport alpha from \"./glsl/alpha.frag\";\nimport average from \"./glsl/average.frag\";\nimport color from \"./glsl/color.frag\";\nimport colorBurn from \"./glsl/color-burn.frag\";\nimport colorDodge from \"./glsl/color-dodge.frag\";\nimport darken from \"./glsl/darken.frag\";\nimport difference from \"./glsl/difference.frag\";\nimport divide from \"./glsl/divide.frag\";\nimport exclusion from \"./glsl/exclusion.frag\";\nimport hardLight from \"./glsl/hard-light.frag\";\nimport hardMix from \"./glsl/hard-mix.frag\";\nimport hue from \"./glsl/hue.frag\";\nimport invert from \"./glsl/invert.frag\";\nimport invertRGB from \"./glsl/invert-rgb.frag\";\nimport lighten from \"./glsl/lighten.frag\";\nimport linearBurn from \"./glsl/linear-burn.frag\";\nimport linearDodge from \"./glsl/linear-dodge.frag\";\nimport linearLight from \"./glsl/linear-light.frag\";\nimport luminosity from \"./glsl/luminosity.frag\";\nimport multiply from \"./glsl/multiply.frag\";\nimport negation from \"./glsl/negation.frag\";\nimport normal from \"./glsl/normal.frag\";\nimport overlay from \"./glsl/overlay.frag\";\nimport pinLight from \"./glsl/pin-light.frag\";\nimport reflect from \"./glsl/reflect.frag\";\nimport saturation from \"./glsl/saturation.frag\";\nimport screen from \"./glsl/screen.frag\";\nimport softLight from \"./glsl/soft-light.frag\";\nimport src from \"./glsl/src.frag\";\nimport subtract from \"./glsl/subtract.frag\";\nimport vividLight from \"./glsl/vivid-light.frag\";\n\n/**\n * A blend function shader code catalogue.\n *\n * @type {Map<BlendFunction, String>}\n * @private\n */\n\nconst blendFunctions = new Map([\n\t[BlendFunction.ADD, add],\n\t[BlendFunction.ALPHA, alpha],\n\t[BlendFunction.AVERAGE, average],\n\t[BlendFunction.COLOR, color],\n\t[BlendFunction.COLOR_BURN, colorBurn],\n\t[BlendFunction.COLOR_DODGE, colorDodge],\n\t[BlendFunction.DARKEN, darken],\n\t[BlendFunction.DIFFERENCE, difference],\n\t[BlendFunction.DIVIDE, divide],\n\t[BlendFunction.DST, null],\n\t[BlendFunction.EXCLUSION, exclusion],\n\t[BlendFunction.HARD_LIGHT, hardLight],\n\t[BlendFunction.HARD_MIX, hardMix],\n\t[BlendFunction.HUE, hue],\n\t[BlendFunction.INVERT, invert],\n\t[BlendFunction.INVERT_RGB, invertRGB],\n\t[BlendFunction.LIGHTEN, lighten],\n\t[BlendFunction.LINEAR_BURN, linearBurn],\n\t[BlendFunction.LINEAR_DODGE, linearDodge],\n\t[BlendFunction.LINEAR_LIGHT, linearLight],\n\t[BlendFunction.LUMINOSITY, luminosity],\n\t[BlendFunction.MULTIPLY, multiply],\n\t[BlendFunction.NEGATION, negation],\n\t[BlendFunction.NORMAL, normal],\n\t[BlendFunction.OVERLAY, overlay],\n\t[BlendFunction.PIN_LIGHT, pinLight],\n\t[BlendFunction.REFLECT, reflect],\n\t[BlendFunction.SATURATION, saturation],\n\t[BlendFunction.SCREEN, screen],\n\t[BlendFunction.SOFT_LIGHT, softLight],\n\t[BlendFunction.SRC, src],\n\t[BlendFunction.SUBTRACT, subtract],\n\t[BlendFunction.VIVID_LIGHT, vividLight]\n]);\n\n/**\n * A blend mode.\n */\n\nexport class BlendMode extends EventDispatcher {\n\n\t/**\n\t * Constructs a new blend mode.\n\t *\n\t * @param {BlendFunction} blendFunction - The blend function.\n\t * @param {Number} opacity - The opacity of the color that will be blended with the base color.\n\t */\n\n\tconstructor(blendFunction, opacity = 1.0) {\n\n\t\tsuper();\n\n\t\t/**\n\t\t * Backing data for {@link blendFunction}.\n\t\t *\n\t\t * @type {BlendFunction}\n\t\t * @private\n\t\t */\n\n\t\tthis._blendFunction = blendFunction;\n\n\t\t/**\n\t\t * A uniform that controls the opacity of this blend mode.\n\t\t *\n\t\t * TODO Add opacity accessors for uniform value.\n\t\t * @type {Uniform}\n\t\t */\n\n\t\tthis.opacity = new Uniform(opacity);\n\n\t}\n\n\t/**\n\t * Returns the opacity.\n\t *\n\t * @return {Number} The opacity.\n\t */\n\n\tgetOpacity() {\n\n\t\treturn this.opacity.value;\n\n\t}\n\n\t/**\n\t * Sets the opacity.\n\t *\n\t * @param {Number} value - The opacity.\n\t */\n\n\tsetOpacity(value) {\n\n\t\tthis.opacity.value = value;\n\n\t}\n\n\t/**\n\t * The blend function.\n\t *\n\t * @type {BlendFunction}\n\t */\n\n\tget blendFunction() {\n\n\t\treturn this._blendFunction;\n\n\t}\n\n\tset blendFunction(value) {\n\n\t\tthis._blendFunction = value;\n\t\tthis.dispatchEvent({ type: \"change\" });\n\n\t}\n\n\t/**\n\t * Returns the blend function.\n\t *\n\t * @deprecated Use blendFunction instead.\n\t * @return {BlendFunction} The blend function.\n\t */\n\n\tgetBlendFunction() {\n\n\t\treturn this.blendFunction;\n\n\t}\n\n\t/**\n\t * Sets the blend function.\n\t *\n\t * @deprecated Use blendFunction instead.\n\t * @param {BlendFunction} value - The blend function.\n\t */\n\n\tsetBlendFunction(value) {\n\n\t\tthis.blendFunction = value;\n\n\t}\n\n\t/**\n\t * Returns the blend function shader code.\n\t *\n\t * @return {String} The blend function shader code.\n\t */\n\n\tgetShaderCode() {\n\n\t\treturn blendFunctions.get(this.blendFunction);\n\n\t}\n\n}\n", "import { sRGBEncoding, Uniform, WebGLRenderTarget } from \"three\";\nimport { Resolution } from \"../core\";\nimport { BlendFunction, KernelSize } from \"../enums\";\nimport { KawaseBlurPass, LuminancePass, MipmapBlurPass } from \"../passes\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/bloom.frag\";\n\n/**\n * A bloom effect.\n *\n * Based on an article by Fabrice Piquet\n * https://www.froyok.fr/blog/2021-12-ue4-custom-bloom/\n */\n\nexport class BloomEffect extends Effect {\n\n\t/**\n\t * Constructs a new bloom effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function of this effect.\n\t * @param {Number} [options.luminanceThreshold=0.9] - The luminance threshold. Raise this value to mask out darker elements in the scene.\n\t * @param {Number} [options.luminanceSmoothing=0.025] - Controls the smoothness of the luminance threshold.\n\t * @param {Boolean} [options.mipmapBlur=false] - Enables or disables mipmap blur.\n\t * @param {Number} [options.intensity=1.0] - The bloom intensity.\n\t * @param {Number} [options.radius=0.85] - The blur radius. Only applies to mipmap blur.\n\t * @param {Number} [options.levels=8] - The amount of MIP levels. Only applies to mipmap blur.\n\t * @param {KernelSize} [options.kernelSize=KernelSize.LARGE] - Deprecated. Use mipmapBlur instead.\n\t * @param {Number} [options.resolutionScale=0.5] - Deprecated. Use mipmapBlur instead.\n\t * @param {Number} [options.resolutionX=Resolution.AUTO_SIZE] - Deprecated. Use mipmapBlur instead.\n\t * @param {Number} [options.resolutionY=Resolution.AUTO_SIZE] - Deprecated. Use mipmapBlur instead.\n\t * @param {Number} [options.width=Resolution.AUTO_SIZE] - Deprecated. Use mipmapBlur instead.\n\t * @param {Number} [options.height=Resolution.AUTO_SIZE] - Deprecated. Use mipmapBlur instead.\n\t */\n\n\tconstructor({\n\t\tblendFunction = BlendFunction.SCREEN,\n\t\tluminanceThreshold = 0.9,\n\t\tluminanceSmoothing = 0.025,\n\t\tmipmapBlur = false,\n\t\tintensity = 1.0,\n\t\tradius = 0.85,\n\t\tlevels = 8,\n\t\tkernelSize = KernelSize.LARGE,\n\t\tresolutionScale = 0.5,\n\t\twidth = Resolution.AUTO_SIZE,\n\t\theight = Resolution.AUTO_SIZE,\n\t\tresolutionX = width,\n\t\tresolutionY = height\n\t} = {}) {\n\n\t\tsuper(\"BloomEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"map\", new Uniform(null)],\n\t\t\t\t[\"intensity\", new Uniform(intensity)]\n\t\t\t])\n\t\t});\n\n\t\t/**\n\t\t * A render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, { depthBuffer: false });\n\t\tthis.renderTarget.texture.name = \"Bloom.Target\";\n\n\t\t/**\n\t\t * A blur pass.\n\t\t *\n\t\t * @type {KawaseBlurPass}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.blurPass = new KawaseBlurPass({ kernelSize });\n\n\t\t/**\n\t\t * A luminance pass.\n\t\t *\n\t\t * Disable to skip luminance filtering.\n\t\t *\n\t\t * @type {LuminancePass}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.luminancePass = new LuminancePass({ colorOutput: true });\n\t\tthis.luminanceMaterial.threshold = luminanceThreshold;\n\t\tthis.luminanceMaterial.smoothing = luminanceSmoothing;\n\n\t\t/**\n\t\t * A mipmap blur pass.\n\t\t *\n\t\t * @type {MipmapBlurPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.mipmapBlurPass = new MipmapBlurPass();\n\t\tthis.mipmapBlurPass.enabled = mipmapBlur;\n\t\tthis.mipmapBlurPass.radius = radius;\n\t\tthis.mipmapBlurPass.levels = levels;\n\n\t\tthis.uniforms.get(\"map\").value = mipmapBlur ? this.mipmapBlurPass.texture : this.renderTarget.texture;\n\n\t\t/**\n\t\t * The render resolution.\n\t\t *\n\t\t * @type {Resolution}\n\t\t * @readonly\n\t\t * @deprecated\n\t\t */\n\n\t\tconst resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n\t\tresolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n\n\t}\n\n\t/**\n\t * A texture that contains the intermediate result of this effect.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget texture() {\n\n\t\treturn this.mipmapBlurPass.enabled ? this.mipmapBlurPass.texture : this.renderTarget.texture;\n\n\t}\n\n\t/**\n\t * Returns the generated bloom texture.\n\t *\n\t * @deprecated Use texture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetTexture() {\n\n\t\treturn this.texture;\n\n\t}\n\n\t/**\n\t * Returns the resolution settings.\n\t *\n\t * @deprecated Use resolution instead.\n\t * @return {Resolution} The resolution.\n\t */\n\n\tgetResolution() {\n\n\t\treturn this.resolution;\n\n\t}\n\n\t/**\n\t * Returns the blur pass.\n\t *\n\t * @deprecated\n\t * @return {KawaseBlurPass} The blur pass.\n\t */\n\n\tgetBlurPass() {\n\n\t\treturn this.blurPass;\n\n\t}\n\n\t/**\n\t * Returns the luminance pass.\n\t *\n\t * @deprecated Use luminancePass instead.\n\t * @return {LuminancePass} The luminance pass.\n\t */\n\n\tgetLuminancePass() {\n\n\t\treturn this.luminancePass;\n\n\t}\n\n\t/**\n\t * The luminance material.\n\t *\n\t * @type {LuminanceMaterial}\n\t */\n\n\tget luminanceMaterial() {\n\n\t\treturn this.luminancePass.fullscreenMaterial;\n\n\t}\n\n\t/**\n\t * Returns the luminance material.\n\t *\n\t * @deprecated Use luminanceMaterial instead.\n\t * @return {LuminanceMaterial} The material.\n\t */\n\n\tgetLuminanceMaterial() {\n\n\t\treturn this.luminancePass.fullscreenMaterial;\n\n\t}\n\n\t/**\n\t * The current width of the internal render targets.\n\t *\n\t * @type {Number}\n\t * @deprecated\n\t */\n\n\tget width() {\n\n\t\treturn this.resolution.width;\n\n\t}\n\n\tset width(value) {\n\n\t\tthis.resolution.preferredWidth = value;\n\n\t}\n\n\t/**\n\t * The current height of the internal render targets.\n\t *\n\t * @type {Number}\n\t * @deprecated\n\t */\n\n\tget height() {\n\n\t\treturn this.resolution.height;\n\n\t}\n\n\tset height(value) {\n\n\t\tthis.resolution.preferredHeight = value;\n\n\t}\n\n\t/**\n\t * Indicates whether dithering is enabled.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use EffectPass.dithering instead.\n\t */\n\n\tget dithering() {\n\n\t\treturn this.blurPass.dithering;\n\n\t}\n\n\tset dithering(value) {\n\n\t\tthis.blurPass.dithering = value;\n\n\t}\n\n\t/**\n\t * The blur kernel size.\n\t *\n\t * @type {KernelSize}\n\t * @deprecated\n\t */\n\n\tget kernelSize() {\n\n\t\treturn this.blurPass.kernelSize;\n\n\t}\n\n\tset kernelSize(value) {\n\n\t\tthis.blurPass.kernelSize = value;\n\n\t}\n\n\t/**\n\t * @type {Number}\n\t * @deprecated\n\t */\n\n\tget distinction() {\n\n\t\tconsole.warn(this.name, \"distinction was removed\");\n\t\treturn 1.0;\n\n\t}\n\n\tset distinction(value) {\n\n\t\tconsole.warn(this.name, \"distinction was removed\");\n\n\t}\n\n\t/**\n\t * The bloom intensity.\n\t *\n\t * @type {Number}\n\t */\n\n\tget intensity() {\n\n\t\treturn this.uniforms.get(\"intensity\").value;\n\n\t}\n\n\tset intensity(value) {\n\n\t\tthis.uniforms.get(\"intensity\").value = value;\n\n\t}\n\n\t/**\n\t * The bloom intensity.\n\t *\n\t * @deprecated Use intensity instead.\n\t * @return {Number} The intensity.\n\t */\n\n\tgetIntensity() {\n\n\t\treturn this.intensity;\n\n\t}\n\n\t/**\n\t * Sets the bloom intensity.\n\t *\n\t * @deprecated Use intensity instead.\n\t * @param {Number} value - The intensity.\n\t */\n\n\tsetIntensity(value) {\n\n\t\tthis.intensity = value;\n\n\t}\n\n\t/**\n\t * Returns the current resolution scale.\n\t *\n\t * @return {Number} The resolution scale.\n\t * @deprecated\n\t */\n\n\tgetResolutionScale() {\n\n\t\treturn this.resolution.scale;\n\n\t}\n\n\t/**\n\t * Sets the resolution scale.\n\t *\n\t * @param {Number} scale - The new resolution scale.\n\t * @deprecated\n\t */\n\n\tsetResolutionScale(scale) {\n\n\t\tthis.resolution.scale = scale;\n\n\t}\n\n\t/**\n\t * Updates this effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, deltaTime) {\n\n\t\tconst renderTarget = this.renderTarget;\n\t\tconst luminancePass = this.luminancePass;\n\n\t\tif(luminancePass.enabled) {\n\n\t\t\tluminancePass.render(renderer, inputBuffer);\n\n\t\t\tif(this.mipmapBlurPass.enabled) {\n\n\t\t\t\tthis.mipmapBlurPass.render(renderer, luminancePass.renderTarget);\n\n\t\t\t} else {\n\n\t\t\t\tthis.blurPass.render(renderer, luminancePass.renderTarget, renderTarget);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif(this.mipmapBlurPass.enabled) {\n\n\t\t\t\tthis.mipmapBlurPass.render(renderer, inputBuffer);\n\n\t\t\t} else {\n\n\t\t\t\tthis.blurPass.render(renderer, inputBuffer, renderTarget);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the size of internal render targets.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.setBaseSize(width, height);\n\n\t\tthis.renderTarget.setSize(resolution.width, resolution.height);\n\t\tthis.blurPass.resolution.copy(resolution);\n\n\t\tthis.luminancePass.setSize(width, height);\n\t\tthis.mipmapBlurPass.setSize(width, height);\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tthis.blurPass.initialize(renderer, alpha, frameBufferType);\n\t\tthis.luminancePass.initialize(renderer, alpha, frameBufferType);\n\t\tthis.mipmapBlurPass.initialize(renderer, alpha, frameBufferType);\n\n\t\tif(frameBufferType !== undefined) {\n\n\t\t\tthis.renderTarget.texture.type = frameBufferType;\n\n\t\t\tif(renderer.outputEncoding === sRGBEncoding) {\n\n\t\t\t\tthis.renderTarget.texture.encoding = sRGBEncoding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n", "import { BasicDepthPacking, EventDispatcher, LinearEncoding, Scene } from \"three\";\nimport { BlendFunction, EffectAttribute } from \"../enums\";\nimport { BlendMode } from \"./blending\";\n\n/**\n * An abstract effect.\n *\n * Effects can be combined using the {@link EffectPass}.\n *\n * @implements {Initializable}\n * @implements {Resizable}\n * @implements {Disposable}\n */\n\nexport class Effect extends EventDispatcher {\n\n\t/**\n\t * Constructs a new effect.\n\t *\n\t * @param {String} name - The name of this effect. Doesn't have to be unique.\n\t * @param {String} fragmentShader - The fragment shader. This shader is required.\n\t * @param {Object} [options] - Additional options.\n\t * @param {EffectAttribute} [options.attributes=EffectAttribute.NONE] - The effect attributes that determine the execution priority and resource requirements.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\n\t * @param {Map<String, String>} [options.defines] - Custom preprocessor macro definitions. Keys are names and values are code.\n\t * @param {Map<String, Uniform>} [options.uniforms] - Custom shader uniforms. Keys are names and values are uniforms.\n\t * @param {Set<WebGLExtension>} [options.extensions] - WebGL extensions.\n\t * @param {String} [options.vertexShader=null] - The vertex shader. Most effects don't need one.\n\t */\n\n\tconstructor(name, fragmentShader, {\n\t\tattributes = EffectAttribute.NONE,\n\t\tblendFunction = BlendFunction.NORMAL,\n\t\tdefines = new Map(),\n\t\tuniforms = new Map(),\n\t\textensions = null,\n\t\tvertexShader = null\n\t} = {}) {\n\n\t\tsuper();\n\n\t\t/**\n\t\t * The name of this effect.\n\t\t *\n\t\t * @type {String}\n\t\t */\n\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * The renderer.\n\t\t *\n\t\t * @type {WebGLRenderer}\n\t\t * @protected\n\t\t * @deprecated\n\t\t */\n\n\t\tthis.renderer = null;\n\n\t\t/**\n\t\t * The effect attributes.\n\t\t *\n\t\t * @type {EffectAttribute}\n\t\t * @private\n\t\t */\n\n\t\tthis.attributes = attributes;\n\n\t\t/**\n\t\t * The fragment shader.\n\t\t *\n\t\t * @type {String}\n\t\t * @private\n\t\t */\n\n\t\tthis.fragmentShader = fragmentShader;\n\n\t\t/**\n\t\t * The vertex shader.\n\t\t *\n\t\t * @type {String}\n\t\t * @private\n\t\t */\n\n\t\tthis.vertexShader = vertexShader;\n\n\t\t/**\n\t\t * Preprocessor macro definitions.\n\t\t *\n\t\t * Call {@link Effect.setChanged} after changing macro definitions.\n\t\t *\n\t\t * @type {Map<String, String>}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.defines = defines;\n\n\t\t/**\n\t\t * Shader uniforms.\n\t\t *\n\t\t * Call {@link Effect.setChanged} after adding or removing uniforms.\n\t\t *\n\t\t * @type {Map<String, Uniform>}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.uniforms = uniforms;\n\n\t\t/**\n\t\t * WebGL extensions that are required by this effect.\n\t\t *\n\t\t * Call {@link Effect.setChanged} after adding or removing extensions.\n\t\t *\n\t\t * @type {Set<WebGLExtension>}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.extensions = extensions;\n\n\t\t/**\n\t\t * The blend mode of this effect.\n\t\t *\n\t\t * @type {BlendMode}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.blendMode = new BlendMode(blendFunction);\n\t\tthis.blendMode.addEventListener(\"change\", (event) => this.setChanged());\n\n\t\t/**\n\t\t * Backing data for {@link inputColorSpace}.\n\t\t *\n\t\t * @type {TextureEncoding}\n\t\t * @private\n\t\t */\n\n\t\tthis._inputColorSpace = LinearEncoding;\n\n\t\t/**\n\t\t * Backing data for {@link outputColorSpace}.\n\t\t *\n\t\t * @type {TextureEncoding}\n\t\t * @private\n\t\t */\n\n\t\tthis._outputColorSpace = null;\n\n\t}\n\n\t/**\n\t * The input color space.\n\t *\n\t * @type {TextureEncoding}\n\t * @experimental\n\t */\n\n\tget inputColorSpace() {\n\n\t\treturn this._inputColorSpace;\n\n\t}\n\n\t/**\n\t * @type {TextureEncoding}\n\t * @protected\n\t * @experimental\n\t */\n\n\tset inputColorSpace(value) {\n\n\t\tthis._inputColorSpace = value;\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * The output color space.\n\t *\n\t * Should only be changed if this effect converts the input colors to a different color space.\n\t *\n\t * @type {TextureEncoding}\n\t * @experimental\n\t */\n\n\tget outputColorSpace() {\n\n\t\treturn this._outputColorSpace;\n\n\t}\n\n\t/**\n\t * @type {TextureEncoding}\n\t * @protected\n\t * @experimental\n\t */\n\n\tset outputColorSpace(value) {\n\n\t\tthis._outputColorSpace = value;\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * Returns the name of this effect.\n\t *\n\t * @deprecated Use name instead.\n\t * @return {String} The name.\n\t */\n\n\tgetName() {\n\n\t\treturn this.name;\n\n\t}\n\n\t/**\n\t * Sets the renderer.\n\t *\n\t * @deprecated\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t */\n\n\tsetRenderer(renderer) {\n\n\t\tthis.renderer = renderer;\n\n\t}\n\n\t/**\n\t * Returns the preprocessor macro definitions.\n\t *\n\t * @deprecated Use defines instead.\n\t * @return {Map<String, String>} The extensions.\n\t */\n\n\tgetDefines() {\n\n\t\treturn this.defines;\n\n\t}\n\n\t/**\n\t * Returns the uniforms of this effect.\n\t *\n\t * @deprecated Use uniforms instead.\n\t * @return {Map<String, Uniform>} The extensions.\n\t */\n\n\tgetUniforms() {\n\n\t\treturn this.uniforms;\n\n\t}\n\n\t/**\n\t * Returns the WebGL extensions that are required by this effect.\n\t *\n\t * @deprecated Use extensions instead.\n\t * @return {Set<WebGLExtension>} The extensions.\n\t */\n\n\tgetExtensions() {\n\n\t\treturn this.extensions;\n\n\t}\n\n\t/**\n\t * Returns the blend mode.\n\t *\n\t * The result of this effect will be blended with the result of the previous effect using this blend mode.\n\t *\n\t * @deprecated Use blendMode instead.\n\t * @return {BlendMode} The blend mode.\n\t */\n\n\tgetBlendMode() {\n\n\t\treturn this.blendMode;\n\n\t}\n\n\t/**\n\t * Returns the effect attributes.\n\t *\n\t * @return {EffectAttribute} The attributes.\n\t */\n\n\tgetAttributes() {\n\n\t\treturn this.attributes;\n\n\t}\n\n\t/**\n\t * Sets the effect attributes.\n\t *\n\t * Effects that have the same attributes will be executed in the order in which they were registered. Some attributes\n\t * imply a higher priority.\n\t *\n\t * @protected\n\t * @param {EffectAttribute} attributes - The attributes.\n\t */\n\n\tsetAttributes(attributes) {\n\n\t\tthis.attributes = attributes;\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * Returns the fragment shader.\n\t *\n\t * @return {String} The fragment shader.\n\t */\n\n\tgetFragmentShader() {\n\n\t\treturn this.fragmentShader;\n\n\t}\n\n\t/**\n\t * Sets the fragment shader.\n\t *\n\t * @protected\n\t * @param {String} fragmentShader - The fragment shader.\n\t */\n\n\tsetFragmentShader(fragmentShader) {\n\n\t\tthis.fragmentShader = fragmentShader;\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * Returns the vertex shader.\n\t *\n\t * @return {String} The vertex shader.\n\t */\n\n\tgetVertexShader() {\n\n\t\treturn this.vertexShader;\n\n\t}\n\n\t/**\n\t * Sets the vertex shader.\n\t *\n\t * @protected\n\t * @param {String} vertexShader - The vertex shader.\n\t */\n\n\tsetVertexShader(vertexShader) {\n\n\t\tthis.vertexShader = vertexShader;\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * Informs the associated {@link EffectPass} that this effect requires a shader recompilation.\n\t *\n\t * Should be called after changing macros or extensions and after adding/removing uniforms.\n\t *\n\t * @protected\n\t */\n\n\tsetChanged() {\n\n\t\tthis.dispatchEvent({ type: \"change\" });\n\n\t}\n\n\t/**\n\t * Sets the depth texture.\n\t *\n\t * You may override this method if your effect requires direct access to the depth texture that is bound to the\n\t * associated {@link EffectPass}.\n\t *\n\t * @param {Texture} depthTexture - A depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing.\n\t */\n\n\tsetDepthTexture(depthTexture, depthPacking = BasicDepthPacking) {}\n\n\t/**\n\t * Updates this effect by performing supporting operations.\n\t *\n\t * This method is called by the {@link EffectPass} right before the main fullscreen render operation, even if the\n\t * blend function is set to `SKIP`.\n\t *\n\t * You may override this method if you need to update custom uniforms or render additional off-screen textures.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, deltaTime) {}\n\n\t/**\n\t * Updates the size of this effect.\n\t *\n\t * You may override this method if you want to be informed about the size of the backbuffer/canvas.\n\t * This method is called before {@link initialize} and every time the size of the {@link EffectComposer} changes.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * This method is called when the associated {@link EffectPass} is added to an {@link EffectComposer}.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t * @example if(!alpha && frameBufferType === UnsignedByteType) { this.myRenderTarget.texture.format = RGBFormat; }\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {}\n\n\t/**\n\t * Performs a shallow search for properties that define a dispose method and deletes them.\n\t *\n\t * The {@link EffectComposer} calls this method when it is being destroyed.\n\t */\n\n\tdispose() {\n\n\t\tfor(const key of Object.keys(this)) {\n\n\t\t\tconst property = this[key];\n\n\t\t\tif(property !== null && typeof property.dispose === \"function\") {\n\n\t\t\t\tif(property instanceof Scene || property === this.renderer) {\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t/** @ignore */\n\t\t\t\tthis[key].dispose();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n", "import { Uniform } from \"three\";\nimport { EffectAttribute } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/bokeh.frag\";\n\n/**\n * A depth of field (bokeh) effect.\n *\n * Original shader code by Martins Upitis:\n * http://artmartinsh.blogspot.com/2010/02/glsl-lens-blur-filter-with-bokeh.html\n *\n * @deprecated Use DepthOfFieldEffect instead.\n */\n\nexport class BokehEffect extends Effect {\n\n\t/**\n\t * Constructs a new bokeh effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction] - The blend function of this effect.\n\t * @param {Number} [options.focus=0.5] - The focus distance ratio, ranging from 0.0 to 1.0.\n\t * @param {Number} [options.dof=0.02] - Depth of field. An area in front of and behind the focal point that still appears sharp.\n\t * @param {Number} [options.aperture=0.015] - Camera aperture scale. Bigger values for stronger blur and shallower depth of field.\n\t * @param {Number} [options.maxBlur=1.0] - The maximum blur strength.\n\t */\n\n\tconstructor({\n\t\tblendFunction,\n\t\tfocus = 0.5,\n\t\tdof = 0.02,\n\t\taperture = 0.015,\n\t\tmaxBlur = 1.0\n\t} = {}) {\n\n\t\tsuper(\"BokehEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tattributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"focus\", new Uniform(focus)],\n\t\t\t\t[\"dof\", new Uniform(dof)],\n\t\t\t\t[\"aperture\", new Uniform(aperture)],\n\t\t\t\t[\"maxBlur\", new Uniform(maxBlur)]\n\t\t\t])\n\t\t});\n\n\t}\n\n}\n", "import { sRGBEncoding, Uniform } from \"three\";\nimport { BlendFunction } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/brightness-contrast.frag\";\n\n/**\n * A brightness/contrast effect.\n *\n * Reference: https://github.com/evanw/glfx.js\n */\n\nexport class BrightnessContrastEffect extends Effect {\n\n\t/**\n\t * Constructs a new brightness/contrast effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SRC] - The blend function of this effect.\n\t * @param {Number} [options.brightness=0.0] - The brightness factor, ranging from -1 to 1, where 0 means no change.\n\t * @param {Number} [options.contrast=0.0] - The contrast factor, ranging from -1 to 1, where 0 means no change.\n\t */\n\n\tconstructor({ blendFunction = BlendFunction.SRC, brightness = 0.0, contrast = 0.0 } = {}) {\n\n\t\tsuper(\"BrightnessContrastEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"brightness\", new Uniform(brightness)],\n\t\t\t\t[\"contrast\", new Uniform(contrast)]\n\t\t\t])\n\t\t});\n\n\t\tthis.inputColorSpace = sRGBEncoding;\n\n\t}\n\n\t/**\n\t * The brightness.\n\t *\n\t * @type {Number}\n\t */\n\n\tget brightness() {\n\n\t\treturn this.uniforms.get(\"brightness\").value;\n\n\t}\n\n\tset brightness(value) {\n\n\t\tthis.uniforms.get(\"brightness\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the brightness.\n\t *\n\t * @deprecated Use brightness instead.\n\t * @return {Number} The brightness.\n\t */\n\n\tgetBrightness(value) {\n\n\t\treturn this.brightness;\n\n\t}\n\n\t/**\n\t * Sets the brightness.\n\t *\n\t * @deprecated Use brightness instead.\n\t * @param {Number} value - The brightness.\n\t */\n\n\tsetBrightness(value) {\n\n\t\tthis.brightness = value;\n\n\t}\n\n\t/**\n\t * The contrast.\n\t *\n\t * @type {Number}\n\t */\n\n\tget contrast() {\n\n\t\treturn this.uniforms.get(\"contrast\").value;\n\n\t}\n\n\tset contrast(value) {\n\n\t\tthis.uniforms.get(\"contrast\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the contrast.\n\t *\n\t * @deprecated Use contrast instead.\n\t * @return {Number} The contrast.\n\t */\n\n\tgetContrast(value) {\n\n\t\treturn this.contrast;\n\n\t}\n\n\t/**\n\t * Sets the contrast.\n\t *\n\t * @deprecated Use contrast instead.\n\t * @param {Number} value - The contrast.\n\t */\n\n\tsetContrast(value) {\n\n\t\tthis.contrast = value;\n\n\t}\n\n}\n", "import { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/color-average.frag\";\n\n/**\n * A fast greyscale effect.\n */\n\nexport class ColorAverageEffect extends Effect {\n\n\t/**\n\t * Constructs a new color average effect.\n\t *\n\t * @param {BlendFunction} [blendFunction] - The blend function of this effect.\n\t */\n\n\tconstructor(blendFunction) {\n\n\t\tsuper(\"ColorAverageEffect\", fragmentShader, { blendFunction });\n\n\t}\n\n}\n", "import { Uniform } from \"three\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/color-depth.frag\";\n\n/**\n * A color depth effect.\n *\n * Simulates a hardware limitation to create a retro feel. The real color depth remains unchanged.\n */\n\nexport class ColorDepthEffect extends Effect {\n\n\t/**\n\t * Constructs a new color depth effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction] - The blend function of this effect.\n\t * @param {Number} [options.bits=16] - The color bit depth.\n\t */\n\n\tconstructor({ blendFunction, bits = 16 } = {}) {\n\n\t\tsuper(\"ColorDepthEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"factor\", new Uniform(1.0)]\n\t\t\t])\n\t\t});\n\n\t\t/**\n\t\t * The current amount of bits.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.bits = 0;\n\t\tthis.bitDepth = bits;\n\n\t}\n\n\t/**\n\t * The virtual amount of color bits.\n\t *\n\t * Each color channel effectively uses a fourth of the total amount of bits. Alpha remains unaffected.\n\t *\n\t * @type {Number}\n\t */\n\n\tget bitDepth() {\n\n\t\treturn this.bits;\n\n\t}\n\n\tset bitDepth(value) {\n\n\t\tthis.bits = value;\n\t\tthis.uniforms.get(\"factor\").value = Math.pow(2.0, value / 3.0);\n\n\t}\n\n\t/**\n\t * Returns the current color bit depth.\n\t *\n\t * @return {Number} The bit depth.\n\t */\n\n\tgetBitDepth() {\n\n\t\treturn this.bitDepth;\n\n\t}\n\n\t/**\n\t * Sets the virtual amount of color bits.\n\t *\n\t * @param {Number} value - The bit depth.\n\t */\n\n\tsetBitDepth(value) {\n\n\t\tthis.bitDepth = value;\n\n\t}\n\n}\n", "import { Uniform, Vector2 } from \"three\";\nimport { EffectAttribute } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/chromatic-aberration.frag\";\nimport vertexShader from \"./glsl/chromatic-aberration.vert\";\n\n/**\n * A chromatic aberration effect.\n */\n\nexport class ChromaticAberrationEffect extends Effect {\n\n\t/**\n\t * Constructs a new chromatic aberration effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {Vector2} [options.offset] - The color offset.\n\t * @param {Boolean} [options.radialModulation=false] - Whether the effect should be modulated with a radial gradient.\n\t * @param {Number} [options.modulationOffset=0.15] - The modulation offset. Only applies if `radialModulation` is enabled.\n\t */\n\n\tconstructor({\n\t\toffset = new Vector2(1e-3, 5e-4),\n\t\tradialModulation = false,\n\t\tmodulationOffset = 0.15\n\t} = {}) {\n\n\t\tsuper(\"ChromaticAberrationEffect\", fragmentShader, {\n\t\t\tvertexShader,\n\t\t\tattributes: EffectAttribute.CONVOLUTION,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"offset\", new Uniform(offset)],\n\t\t\t\t[\"modulationOffset\", new Uniform(modulationOffset)]\n\t\t\t])\n\t\t});\n\n\t\tthis.radialModulation = radialModulation;\n\n\t}\n\n\t/**\n\t * The color offset.\n\t *\n\t * @type {Vector2}\n\t */\n\n\tget offset() {\n\n\t\treturn this.uniforms.get(\"offset\").value;\n\n\t}\n\n\tset offset(value) {\n\n\t\tthis.uniforms.get(\"offset\").value = value;\n\n\t}\n\n\t/**\n\t * Indicates whether radial modulation is enabled.\n\t *\n\t * When enabled, the effect will be weaker in the middle and stronger towards the screen edges.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget radialModulation() {\n\n\t\treturn this.defines.has(\"RADIAL_MODULATION\");\n\n\t}\n\n\tset radialModulation(value) {\n\n\t\tif(value) {\n\n\t\t\tthis.defines.set(\"RADIAL_MODULATION\", \"1\");\n\n\t\t} else {\n\n\t\t\tthis.defines.delete(\"RADIAL_MODULATION\");\n\n\t\t}\n\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * The modulation offset.\n\t *\n\t * @type {Number}\n\t */\n\n\tget modulationOffset() {\n\n\t\treturn this.uniforms.get(\"modulationOffset\").value;\n\n\t}\n\n\tset modulationOffset(value) {\n\n\t\tthis.uniforms.get(\"modulationOffset\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the color offset vector.\n\t *\n\t * @deprecated Use offset instead.\n\t * @return {Vector2} The offset.\n\t */\n\n\tgetOffset() {\n\n\t\treturn this.offset;\n\n\t}\n\n\t/**\n\t * Sets the color offset vector.\n\t *\n\t * @deprecated Use offset instead.\n\t * @param {Vector2} value - The offset.\n\t */\n\n\tsetOffset(value) {\n\n\t\tthis.offset = value;\n\n\t}\n\n}\n", "import { BlendFunction, EffectAttribute } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/depth.frag\";\n\n/**\n * A depth visualization effect.\n *\n * Useful for debugging.\n */\n\nexport class DepthEffect extends Effect {\n\n\t/**\n\t * Constructs a new depth effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SRC] - The blend function of this effect.\n\t * @param {Boolean} [options.inverted=false] - Whether the depth should be inverted.\n\t */\n\n\tconstructor({ blendFunction = BlendFunction.SRC, inverted = false } = {}) {\n\n\t\tsuper(\"DepthEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tattributes: EffectAttribute.DEPTH\n\t\t});\n\n\t\tthis.inverted = inverted;\n\n\t}\n\n\t/**\n\t * Indicates whether depth should be inverted.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget inverted() {\n\n\t\treturn this.defines.has(\"INVERTED\");\n\n\t}\n\n\tset inverted(value) {\n\n\t\tif(this.inverted !== value) {\n\n\t\t\tif(value) {\n\n\t\t\t\tthis.defines.set(\"INVERTED\", \"1\");\n\n\t\t\t} else {\n\n\t\t\t\tthis.defines.delete(\"INVERTED\");\n\n\t\t\t}\n\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indicates whether the rendered depth is inverted.\n\t *\n\t * @deprecated Use inverted instead.\n\t * @return {Boolean} Whether the rendered depth is inverted.\n\t */\n\n\tisInverted() {\n\n\t\treturn this.inverted;\n\n\t}\n\n\t/**\n\t * Enables or disables depth inversion.\n\t *\n\t * @deprecated Use inverted instead.\n\t * @param {Boolean} value - Whether depth should be inverted.\n\t */\n\n\tsetInverted(value) {\n\n\t\tthis.inverted = value;\n\n\t}\n\n}\n", "import { BasicDepthPacking, sRGBEncoding, Uniform, UnsignedByteType, WebGLRenderTarget } from \"three\";\nimport { BokehMaterial, CircleOfConfusionMaterial, MaskMaterial } from \"../materials\";\nimport { ColorChannel, EffectAttribute, KernelSize, MaskFunction } from \"../enums\";\nimport { Resolution } from \"../core\";\nimport { KawaseBlurPass, ShaderPass } from \"../passes\";\nimport { viewZToOrthographicDepth } from \"../utils\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/depth-of-field.frag\";\n\n/**\n * A depth of field effect.\n *\n * Based on a graphics study by Adrian Courr\u00E8ges and an article by Steve Avery:\n * https://www.adriancourreges.com/blog/2016/09/09/doom-2016-graphics-study/\n * https://pixelmischiefblog.wordpress.com/2016/11/25/bokeh-depth-of-field/\n */\n\nexport class DepthOfFieldEffect extends Effect {\n\n\t/**\n\t * Constructs a new depth of field effect.\n\t *\n\t * @param {Camera} camera - The main camera.\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction] - The blend function of this effect.\n\t * @param {Number} [options.worldFocusDistance] - The focus distance in world units.\n\t * @param {Number} [options.worldFocusRange] - The focus distance in world units.\n\t * @param {Number} [options.focusDistance=0.0] - The normalized focus distance. Range is [0.0, 1.0].\n\t * @param {Number} [options.focusRange=0.1] - The focus range. Range is [0.0, 1.0].\n\t * @param {Number} [options.focalLength=0.1] - Deprecated.\n\t * @param {Number} [options.bokehScale=1.0] - The scale of the bokeh blur.\n\t * @param {Number} [options.resolutionScale=0.5] - The resolution scale.\n\t * @param {Number} [options.resolutionX=Resolution.AUTO_SIZE] - The horizontal resolution.\n\t * @param {Number} [options.resolutionY=Resolution.AUTO_SIZE] - The vertical resolution.\n\t * @param {Number} [options.width=Resolution.AUTO_SIZE] - Deprecated. Use resolutionX instead.\n\t * @param {Number} [options.height=Resolution.AUTO_SIZE] - Deprecated. Use resolutionY instead.\n\t */\n\n\tconstructor(camera, {\n\t\tblendFunction,\n\t\tworldFocusDistance,\n\t\tworldFocusRange,\n\t\tfocusDistance = 0.0,\n\t\tfocalLength = 0.1,\n\t\tfocusRange = focalLength,\n\t\tbokehScale = 1.0,\n\t\tresolutionScale = 1.0,\n\t\twidth = Resolution.AUTO_SIZE,\n\t\theight = Resolution.AUTO_SIZE,\n\t\tresolutionX = width,\n\t\tresolutionY = height\n\t} = {}) {\n\n\t\tsuper(\"DepthOfFieldEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tattributes: EffectAttribute.DEPTH,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"nearColorBuffer\", new Uniform(null)],\n\t\t\t\t[\"farColorBuffer\", new Uniform(null)],\n\t\t\t\t[\"nearCoCBuffer\", new Uniform(null)],\n\t\t\t\t[\"scale\", new Uniform(1.0)]\n\t\t\t])\n\t\t});\n\n\t\t/**\n\t\t * The main camera.\n\t\t *\n\t\t * @type {Camera}\n\t\t * @private\n\t\t */\n\n\t\tthis.camera = camera;\n\n\t\t/**\n\t\t * A render target for intermediate results.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, { depthBuffer: false });\n\t\tthis.renderTarget.texture.name = \"DoF.Intermediate\";\n\n\t\t/**\n\t\t * A render target for masked background colors (premultiplied with CoC).\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetMasked = this.renderTarget.clone();\n\t\tthis.renderTargetMasked.texture.name = \"DoF.Masked.Far\";\n\n\t\t/**\n\t\t * A render target for the blurred foreground colors.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetNear = this.renderTarget.clone();\n\t\tthis.renderTargetNear.texture.name = \"DoF.Bokeh.Near\";\n\t\tthis.uniforms.get(\"nearColorBuffer\").value = this.renderTargetNear.texture;\n\n\t\t/**\n\t\t * A render target for the blurred background colors.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetFar = this.renderTarget.clone();\n\t\tthis.renderTargetFar.texture.name = \"DoF.Bokeh.Far\";\n\t\tthis.uniforms.get(\"farColorBuffer\").value = this.renderTargetFar.texture;\n\n\t\t/**\n\t\t * A render target for the circle of confusion.\n\t\t *\n\t\t * - Negative values are stored in the `RED` channel (foreground).\n\t\t * - Positive values are stored in the `GREEN` channel (background).\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetCoC = this.renderTarget.clone();\n\t\tthis.renderTargetCoC.texture.name = \"DoF.CoC\";\n\n\t\t/**\n\t\t * A render target that stores a blurred copy of the circle of confusion.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetCoCBlurred = this.renderTargetCoC.clone();\n\t\tthis.renderTargetCoCBlurred.texture.name = \"DoF.CoC.Blurred\";\n\t\tthis.uniforms.get(\"nearCoCBuffer\").value = this.renderTargetCoCBlurred.texture;\n\n\t\t/**\n\t\t * A circle of confusion pass.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.cocPass = new ShaderPass(new CircleOfConfusionMaterial(camera));\n\t\tconst cocMaterial = this.cocMaterial;\n\t\tcocMaterial.focusDistance = focusDistance;\n\t\tcocMaterial.focusRange = focusRange;\n\n\t\tif(worldFocusDistance !== undefined) {\n\n\t\t\tcocMaterial.worldFocusDistance = worldFocusDistance;\n\n\t\t}\n\n\t\tif(worldFocusRange !== undefined) {\n\n\t\t\tcocMaterial.worldFocusRange = worldFocusRange;\n\n\t\t}\n\n\t\t/**\n\t\t * This pass blurs the foreground CoC buffer to soften edges.\n\t\t *\n\t\t * @type {KawaseBlurPass}\n\t\t * @deprecated Use getBlurPass() instead.\n\t\t */\n\n\t\tthis.blurPass = new KawaseBlurPass({ resolutionScale, resolutionX, resolutionY, kernelSize: KernelSize.MEDIUM });\n\n\n\t\t/**\n\t\t * A mask pass.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.maskPass = new ShaderPass(new MaskMaterial(this.renderTargetCoC.texture));\n\t\tconst maskMaterial = this.maskPass.fullscreenMaterial;\n\t\tmaskMaterial.maskFunction = MaskFunction.MULTIPLY;\n\t\tmaskMaterial.colorChannel = ColorChannel.GREEN;\n\n\t\t/**\n\t\t * A bokeh blur pass for the foreground colors.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.bokehNearBasePass = new ShaderPass(new BokehMaterial(false, true));\n\t\tthis.bokehNearBasePass.fullscreenMaterial.cocBuffer = this.renderTargetCoCBlurred.texture;\n\n\t\t/**\n\t\t * A bokeh fill pass for the foreground colors.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.bokehNearFillPass = new ShaderPass(new BokehMaterial(true, true));\n\t\tthis.bokehNearFillPass.fullscreenMaterial.cocBuffer = this.renderTargetCoCBlurred.texture;\n\n\t\t/**\n\t\t * A bokeh blur pass for the background colors.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.bokehFarBasePass = new ShaderPass(new BokehMaterial(false, false));\n\t\tthis.bokehFarBasePass.fullscreenMaterial.cocBuffer = this.renderTargetCoC.texture;\n\n\t\t/**\n\t\t * A bokeh fill pass for the background colors.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.bokehFarFillPass = new ShaderPass(new BokehMaterial(true, false));\n\t\tthis.bokehFarFillPass.fullscreenMaterial.cocBuffer = this.renderTargetCoC.texture;\n\n\t\t/**\n\t\t * A target position that should be kept in focus. Set to `null` to disable auto focus.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\n\t\tthis.target = null;\n\n\t\t/**\n\t\t * The render resolution.\n\t\t *\n\t\t * @type {Resolution}\n\t\t * @readonly\n\t\t */\n\n\t\tconst resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n\t\tresolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n\n\t\tthis.bokehScale = bokehScale;\n\n\t}\n\n\t/**\n\t * The circle of confusion texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget cocTexture() {\n\n\t\treturn this.renderTargetCoC.texture;\n\n\t}\n\n\t/**\n\t * The circle of confusion material.\n\t *\n\t * @type {CircleOfConfusionMaterial}\n\t */\n\n\tget cocMaterial() {\n\n\t\treturn this.cocPass.fullscreenMaterial;\n\n\t}\n\n\t/**\n\t * The circle of confusion material.\n\t *\n\t * @deprecated Use cocMaterial instead.\n\t * @type {CircleOfConfusionMaterial}\n\t */\n\n\tget circleOfConfusionMaterial() {\n\n\t\treturn this.cocMaterial;\n\n\t}\n\n\t/**\n\t * Returns the circle of confusion material.\n\t *\n\t * @deprecated Use cocMaterial instead.\n\t * @return {CircleOfConfusionMaterial} The material.\n\t */\n\n\tgetCircleOfConfusionMaterial() {\n\n\t\treturn this.circleOfConfusionMaterial;\n\n\t}\n\n\t/**\n\t * Returns the pass that blurs the foreground CoC buffer to soften edges.\n\t *\n\t * @deprecated Use blurPass instead.\n\t * @return {KawaseBlurPass} The blur pass.\n\t */\n\n\tgetBlurPass() {\n\n\t\treturn this.blurPass;\n\n\t}\n\n\t/**\n\t * Returns the resolution settings.\n\t *\n\t * @deprecated Use resolution instead.\n\t * @return {Resolution} The resolution.\n\t */\n\n\tgetResolution() {\n\n\t\treturn this.resolution;\n\n\t}\n\n\t/**\n\t * The current bokeh scale.\n\t *\n\t * @type {Number}\n\t */\n\n\tget bokehScale() {\n\n\t\treturn this.uniforms.get(\"scale\").value;\n\n\t}\n\n\tset bokehScale(value) {\n\n\t\tthis.bokehNearBasePass.fullscreenMaterial.scale = value;\n\t\tthis.bokehNearFillPass.fullscreenMaterial.scale = value;\n\t\tthis.bokehFarBasePass.fullscreenMaterial.scale = value;\n\t\tthis.bokehFarFillPass.fullscreenMaterial.scale = value;\n\t\tthis.maskPass.fullscreenMaterial.strength = value;\n\t\tthis.uniforms.get(\"scale\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the current bokeh scale.\n\t *\n\t * @deprecated Use bokehScale instead.\n\t * @return {Number} The scale.\n\t */\n\n\tgetBokehScale() {\n\n\t\treturn this.bokehScale;\n\n\t}\n\n\t/**\n\t * Sets the bokeh scale.\n\t *\n\t * @deprecated Use bokehScale instead.\n\t * @param {Number} value - The scale.\n\t */\n\n\tsetBokehScale(value) {\n\n\t\tthis.bokehScale = value;\n\n\t}\n\n\t/**\n\t * Returns the current auto focus target.\n\t *\n\t * @deprecated Use target instead.\n\t * @return {Vector3} The target.\n\t */\n\n\tgetTarget() {\n\n\t\treturn this.target;\n\n\t}\n\n\t/**\n\t * Sets the auto focus target.\n\t *\n\t * @deprecated Use target instead.\n\t * @param {Vector3} value - The target.\n\t */\n\n\tsetTarget(value) {\n\n\t\tthis.target = value;\n\n\t}\n\n\t/**\n\t * Calculates the focus distance from the camera to the given position.\n\t *\n\t * @param {Vector3} target - The target.\n\t * @return {Number} The normalized focus distance.\n\t */\n\n\tcalculateFocusDistance(target) {\n\n\t\tconst camera = this.camera;\n\t\tconst distance = camera.position.distanceTo(target);\n\t\treturn viewZToOrthographicDepth(-distance, camera.near, camera.far);\n\n\t}\n\n\t/**\n\t * Sets the depth texture.\n\t *\n\t * @param {Texture} depthTexture - A depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing.\n\t */\n\n\tsetDepthTexture(depthTexture, depthPacking = BasicDepthPacking) {\n\n\t\tthis.circleOfConfusionMaterial.depthBuffer = depthTexture;\n\t\tthis.circleOfConfusionMaterial.depthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * Updates this effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, deltaTime) {\n\n\t\tconst renderTarget = this.renderTarget;\n\t\tconst renderTargetCoC = this.renderTargetCoC;\n\t\tconst renderTargetCoCBlurred = this.renderTargetCoCBlurred;\n\t\tconst renderTargetMasked = this.renderTargetMasked;\n\n\t\t// Auto focus.\n\t\tif(this.target !== null) {\n\n\t\t\tconst distance = this.calculateFocusDistance(this.target);\n\t\t\tthis.circleOfConfusionMaterial.focusDistance = distance;\n\n\t\t}\n\n\t\t// Render the CoC and create a blurred version for soft near field blending.\n\t\tthis.cocPass.render(renderer, null, renderTargetCoC);\n\t\tthis.blurPass.render(renderer, renderTargetCoC, renderTargetCoCBlurred);\n\n\t\t// Prevent sharp colors from bleeding onto the background.\n\t\tthis.maskPass.render(renderer, inputBuffer, renderTargetMasked);\n\n\t\t// Use the sharp CoC buffer and render the background bokeh.\n\t\tthis.bokehFarBasePass.render(renderer, renderTargetMasked, renderTarget);\n\t\tthis.bokehFarFillPass.render(renderer, renderTarget, this.renderTargetFar);\n\n\t\t// Use the blurred CoC buffer and render the foreground bokeh.\n\t\tthis.bokehNearBasePass.render(renderer, inputBuffer, renderTarget);\n\t\tthis.bokehNearFillPass.render(renderer, renderTarget, this.renderTargetNear);\n\n\t}\n\n\t/**\n\t * Updates the size of internal render targets.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.setBaseSize(width, height);\n\t\tconst w = resolution.width, h = resolution.height;\n\n\t\tthis.cocPass.setSize(width, height);\n\t\tthis.blurPass.setSize(width, height);\n\t\tthis.maskPass.setSize(width, height);\n\n\t\t// These buffers require full resolution to prevent color bleeding.\n\t\tthis.renderTargetCoC.setSize(width, height);\n\t\tthis.renderTargetMasked.setSize(width, height);\n\n\t\tthis.renderTarget.setSize(w, h);\n\t\tthis.renderTargetNear.setSize(w, h);\n\t\tthis.renderTargetFar.setSize(w, h);\n\t\tthis.renderTargetCoCBlurred.setSize(w, h);\n\n\t\t// The bokeh blur passes operate on the low resolution buffers.\n\t\tthis.bokehNearBasePass.fullscreenMaterial.setSize(w, h);\n\t\tthis.bokehNearFillPass.fullscreenMaterial.setSize(w, h);\n\t\tthis.bokehFarBasePass.fullscreenMaterial.setSize(w, h);\n\t\tthis.bokehFarFillPass.fullscreenMaterial.setSize(w, h);\n\t\tthis.bokehNearBasePass.fullscreenMaterial.resolutionScale = resolution.scale;\n\t\tthis.bokehNearFillPass.fullscreenMaterial.resolutionScale = resolution.scale;\n\t\tthis.bokehFarBasePass.fullscreenMaterial.resolutionScale = resolution.scale;\n\t\tthis.bokehFarFillPass.fullscreenMaterial.resolutionScale = resolution.scale;\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tthis.cocPass.initialize(renderer, alpha, frameBufferType);\n\t\tthis.maskPass.initialize(renderer, alpha, frameBufferType);\n\t\tthis.bokehNearBasePass.initialize(renderer, alpha, frameBufferType);\n\t\tthis.bokehNearFillPass.initialize(renderer, alpha, frameBufferType);\n\t\tthis.bokehFarBasePass.initialize(renderer, alpha, frameBufferType);\n\t\tthis.bokehFarFillPass.initialize(renderer, alpha, frameBufferType);\n\n\t\t// The blur pass operates on the CoC buffer.\n\t\tthis.blurPass.initialize(renderer, alpha, UnsignedByteType);\n\n\t\tif(frameBufferType !== undefined) {\n\n\t\t\tthis.renderTarget.texture.type = frameBufferType;\n\t\t\tthis.renderTargetNear.texture.type = frameBufferType;\n\t\t\tthis.renderTargetFar.texture.type = frameBufferType;\n\t\t\tthis.renderTargetMasked.texture.type = frameBufferType;\n\n\t\t\tif(renderer.outputEncoding === sRGBEncoding) {\n\n\t\t\t\tthis.renderTarget.texture.encoding = sRGBEncoding;\n\t\t\t\tthis.renderTargetNear.texture.encoding = sRGBEncoding;\n\t\t\t\tthis.renderTargetFar.texture.encoding = sRGBEncoding;\n\t\t\t\tthis.renderTargetMasked.texture.encoding = sRGBEncoding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n", "import { Uniform, Vector2 } from \"three\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/dot-screen.frag\";\n\n/**\n * A dot screen effect.\n */\n\nexport class DotScreenEffect extends Effect {\n\n\t/**\n\t * Constructs a new dot screen effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction] - The blend function of this effect.\n\t * @param {Number} [options.angle=1.57] - The angle of the dot pattern.\n\t * @param {Number} [options.scale=1.0] - The scale of the dot pattern.\n\t */\n\n\tconstructor({ blendFunction, angle = Math.PI * 0.5, scale = 1.0 } = {}) {\n\n\t\tsuper(\"DotScreenEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"angle\", new Uniform(new Vector2())],\n\t\t\t\t[\"scale\", new Uniform(scale)]\n\t\t\t])\n\t\t});\n\n\t\tthis.angle = angle;\n\n\t}\n\n\t/**\n\t * The angle.\n\t *\n\t * @type {Number}\n\t */\n\n\tget angle() {\n\n\t\treturn Math.acos(this.uniforms.get(\"angle\").value.y);\n\n\t}\n\n\tset angle(value) {\n\n\t\tthis.uniforms.get(\"angle\").value.set(Math.sin(value), Math.cos(value));\n\n\t}\n\n\t/**\n\t * Returns the pattern angle.\n\t *\n\t * @deprecated Use angle instead.\n\t * @return {Number} The angle in radians.\n\t */\n\n\tgetAngle() {\n\n\t\treturn this.angle;\n\n\t}\n\n\t/**\n\t * Sets the pattern angle.\n\t *\n\t * @deprecated Use angle instead.\n\t * @param {Number} value - The angle in radians.\n\t */\n\n\tsetAngle(value) {\n\n\t\tthis.angle = value;\n\n\t}\n\n\t/**\n\t * The scale.\n\t *\n\t * @type {Number}\n\t */\n\n\tget scale() {\n\n\t\treturn this.uniforms.get(\"scale\").value;\n\n\t}\n\n\tset scale(value) {\n\n\t\tthis.uniforms.get(\"scale\").value = value;\n\n\t}\n\n}\n", "import { BlendFunction } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/fxaa.frag\";\nimport vertexShader from \"./glsl/fxaa.vert\";\n\n/**\n * NVIDIA FXAA 3.11 by Timothy Lottes:\n * https://developer.download.nvidia.com/assets/gamedev/files/sdk/11/FXAA_WhitePaper.pdf\n *\n * Based on an implementation by Simon Rodriguez:\n * https://github.com/kosua20/Rendu/blob/master/resources/common/shaders/screens/fxaa.frag\n */\n\nexport class FXAAEffect extends Effect {\n\n\t/**\n\t * Constructs a new FXAA effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SRC] - The blend function of this effect.\n\t */\n\n\tconstructor({ blendFunction = BlendFunction.SRC } = {}) {\n\n\t\tsuper(\"FXAAEffect\", fragmentShader, {\n\t\t\tvertexShader,\n\t\t\tblendFunction,\n\t\t\tdefines: new Map([\n\t\t\t\t[\"EDGE_THRESHOLD_MIN\", \"0.0312\"],\n\t\t\t\t[\"EDGE_THRESHOLD_MAX\", \"0.125\"],\n\t\t\t\t[\"SUBPIXEL_QUALITY\", \"0.75\"],\n\t\t\t\t[\"SAMPLES\", \"12\"]\n\t\t\t])\n\t\t});\n\n\t}\n\n\t/**\n\t * The minimum edge detection threshold. Range is [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget minEdgeThreshold() {\n\n\t\treturn Number(this.defines.get(\"EDGE_THRESHOLD_MIN\"));\n\n\t}\n\n\tset minEdgeThreshold(value) {\n\n\t\tthis.defines.set(\"EDGE_THRESHOLD_MIN\", value.toFixed(12));\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * The maximum edge detection threshold. Range is [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget maxEdgeThreshold() {\n\n\t\treturn Number(this.defines.get(\"EDGE_THRESHOLD_MAX\"));\n\n\t}\n\n\tset maxEdgeThreshold(value) {\n\n\t\tthis.defines.set(\"EDGE_THRESHOLD_MAX\", value.toFixed(12));\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * The subpixel blend quality. Range is [0.0, 1.0].\n\t *\n\t * @type {Number}\n\t */\n\n\tget subpixelQuality() {\n\n\t\treturn Number(this.defines.get(\"SUBPIXEL_QUALITY\"));\n\n\t}\n\n\tset subpixelQuality(value) {\n\n\t\tthis.defines.set(\"SUBPIXEL_QUALITY\", value.toFixed(12));\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * The maximum amount of edge detection samples.\n\t *\n\t * @type {Number}\n\t */\n\n\tget samples() {\n\n\t\treturn Number(this.defines.get(\"SAMPLES\"));\n\n\t}\n\n\tset samples(value) {\n\n\t\tthis.defines.set(\"SAMPLES\", value.toFixed(0));\n\t\tthis.setChanged();\n\n\t}\n\n}\n", "import { Uniform } from \"three\";\nimport { BlendFunction } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/gamma-correction.frag\";\n\n/**\n * A gamma correction effect.\n *\n * @deprecated Set WebGLRenderer.outputEncoding to sRGBEncoding instead.\n */\n\nexport class GammaCorrectionEffect extends Effect {\n\n\t/**\n\t * Constructs a new gamma correction effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SRC] - The blend function of this effect.\n\t * @param {Number} [options.gamma=2.0] - The gamma factor.\n\t */\n\n\tconstructor({ blendFunction = BlendFunction.SRC, gamma = 2.0 } = {}) {\n\n\t\tsuper(\"GammaCorrectionEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"gamma\", new Uniform(gamma)]\n\t\t\t])\n\t\t});\n\n\t}\n\n}\n", "import { NearestFilter, RepeatWrapping, RGBAFormat, Uniform, Vector2 } from \"three\";\nimport { GlitchMode } from \"../enums\";\nimport { NoiseTexture } from \"../textures/NoiseTexture\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/glitch.frag\";\n\nconst textureTag = \"Glitch.Generated\";\n\n/**\n * Returns a random float in the specified range.\n *\n * @private\n * @param {Number} low - The lowest possible value.\n * @param {Number} high - The highest possible value.\n * @return {Number} The random value.\n */\n\nfunction randomFloat(low, high) {\n\n\treturn low + Math.random() * (high - low);\n\n}\n\n/**\n * A glitch effect.\n *\n * This effect can be used in conjunction with the {@link ChromaticAberrationEffect}.\n *\n * Reference: https://github.com/staffantan/unityglitch\n */\n\nexport class GlitchEffect extends Effect {\n\n\t/**\n\t * Constructs a new glitch effect.\n\t *\n\t * TODO Change ratio to 0.15.\n\t * @param {Object} [options] - The options.\n\t * @param {Vector2} [options.chromaticAberrationOffset] - A chromatic aberration offset. If provided, the glitch effect will influence this offset.\n\t * @param {Vector2} [options.delay] - The minimum and maximum delay between glitch activations in seconds.\n\t * @param {Vector2} [options.duration] - The minimum and maximum duration of a glitch in seconds.\n\t * @param {Vector2} [options.strength] - The strength of weak and strong glitches.\n\t * @param {Texture} [options.perturbationMap] - A perturbation map. If none is provided, a noise texture will be created.\n\t * @param {Number} [options.dtSize=64] - The size of the generated noise map. Will be ignored if a perturbation map is provided.\n\t * @param {Number} [options.columns=0.05] - The scale of the blocky glitch columns.\n\t * @param {Number} [options.ratio=0.85] - The threshold for strong glitches.\n\t */\n\n\tconstructor({\n\t\tchromaticAberrationOffset = null,\n\t\tdelay = new Vector2(1.5, 3.5),\n\t\tduration = new Vector2(0.6, 1.0),\n\t\tstrength = new Vector2(0.3, 1.0),\n\t\tcolumns = 0.05,\n\t\tratio = 0.85,\n\t\tperturbationMap = null,\n\t\tdtSize = 64\n\t} = {}) {\n\n\t\tsuper(\"GlitchEffect\", fragmentShader, {\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"perturbationMap\", new Uniform(null)],\n\t\t\t\t[\"columns\", new Uniform(columns)],\n\t\t\t\t[\"active\", new Uniform(false)],\n\t\t\t\t[\"random\", new Uniform(1.0)],\n\t\t\t\t[\"seeds\", new Uniform(new Vector2())],\n\t\t\t\t[\"distortion\", new Uniform(new Vector2())]\n\t\t\t])\n\t\t});\n\n\t\tif(perturbationMap === null) {\n\n\t\t\tconst map = new NoiseTexture(dtSize, dtSize, RGBAFormat);\n\t\t\tmap.name = textureTag;\n\t\t\tthis.perturbationMap = map;\n\n\t\t} else {\n\n\t\t\tthis.perturbationMap = perturbationMap;\n\n\t\t}\n\n\t\t/**\n\t\t * A time accumulator.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.time = 0;\n\n\t\t/**\n\t\t * A shortcut to the distortion vector.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @private\n\t\t */\n\n\t\tthis.distortion = this.uniforms.get(\"distortion\").value;\n\n\t\t/**\n\t\t * The minimum and maximum delay between glitch activations in seconds.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @deprecated Use minDelay and maxDelay instead.\n\t\t */\n\n\t\tthis.delay = delay;\n\n\t\t/**\n\t\t * The minimum and maximum duration of a glitch in seconds.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @deprecated Use minDuration and maxDuration instead.\n\t\t */\n\n\t\tthis.duration = duration;\n\n\t\t/**\n\t\t * A random glitch break point.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.breakPoint = new Vector2(\n\t\t\trandomFloat(this.delay.x, this.delay.y),\n\t\t\trandomFloat(this.duration.x, this.duration.y)\n\t\t);\n\n\t\t/**\n\t\t * The strength of weak and strong glitches.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @deprecated Use minStrength and maxStrength instead.\n\t\t */\n\n\t\tthis.strength = strength;\n\n\t\t/**\n\t\t * The effect mode.\n\t\t *\n\t\t * @type {GlitchMode}\n\t\t */\n\n\t\tthis.mode = GlitchMode.SPORADIC;\n\n\t\t/**\n\t\t * The ratio between weak (0.0) and strong (1.0) glitches. Range is [0.0, 1.0].\n\t\t *\n\t\t * This value is currently being treated as a threshold for strong glitches, i.e. it's inverted.\n\t\t *\n\t\t * TODO Resolve inversion.\n\t\t * @type {Number}\n\t\t */\n\n\t\tthis.ratio = ratio;\n\n\t\t/**\n\t\t * The chromatic aberration offset.\n\t\t *\n\t\t * @type {Vector2}\n\t\t */\n\n\t\tthis.chromaticAberrationOffset = chromaticAberrationOffset;\n\n\t}\n\n\t/**\n\t * Random number seeds.\n\t *\n\t * @type {Vector2}\n\t * @private\n\t */\n\n\tget seeds() {\n\n\t\treturn this.uniforms.get(\"seeds\").value;\n\n\t}\n\n\t/**\n\t * Indicates whether the glitch effect is currently active.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget active() {\n\n\t\treturn this.uniforms.get(\"active\").value;\n\n\t}\n\n\t/**\n\t * Indicates whether the glitch effect is currently active.\n\t *\n\t * @deprecated Use active instead.\n\t * @return {Boolean} Whether the glitch effect is active.\n\t */\n\n\tisActive() {\n\n\t\treturn this.active;\n\n\t}\n\n\t/**\n\t * The minimum delay between glitch activations.\n\t *\n\t * @type {Number}\n\t */\n\n\tget minDelay() {\n\n\t\treturn this.delay.x;\n\n\t}\n\n\tset minDelay(value) {\n\n\t\tthis.delay.x = value;\n\n\t}\n\n\t/**\n\t * Returns the minimum delay between glitch activations.\n\t *\n\t * @deprecated Use minDelay instead.\n\t * @return {Number} The minimum delay in seconds.\n\t */\n\n\tgetMinDelay() {\n\n\t\treturn this.delay.x;\n\n\t}\n\n\t/**\n\t * Sets the minimum delay between glitch activations.\n\t *\n\t * @deprecated Use minDelay instead.\n\t * @param {Number} value - The minimum delay in seconds.\n\t */\n\n\tsetMinDelay(value) {\n\n\t\tthis.delay.x = value;\n\n\t}\n\n\t/**\n\t * The maximum delay between glitch activations.\n\t *\n\t * @type {Number}\n\t */\n\n\tget maxDelay() {\n\n\t\treturn this.delay.y;\n\n\t}\n\n\tset maxDelay(value) {\n\n\t\tthis.delay.y = value;\n\n\t}\n\n\t/**\n\t * Returns the maximum delay between glitch activations.\n\t *\n\t * @deprecated Use maxDelay instead.\n\t * @return {Number} The maximum delay in seconds.\n\t */\n\n\tgetMaxDelay() {\n\n\t\treturn this.delay.y;\n\n\t}\n\n\t/**\n\t * Sets the maximum delay between glitch activations.\n\t *\n\t * @deprecated Use maxDelay instead.\n\t * @param {Number} value - The maximum delay in seconds.\n\t */\n\n\tsetMaxDelay(value) {\n\n\t\tthis.delay.y = value;\n\n\t}\n\n\t/**\n\t * The minimum duration of sporadic glitches.\n\t *\n\t * @type {Number}\n\t */\n\n\tget minDuration() {\n\n\t\treturn this.duration.x;\n\n\t}\n\n\tset minDuration(value) {\n\n\t\tthis.duration.x = value;\n\n\t}\n\n\t/**\n\t * Returns the minimum duration of sporadic glitches.\n\t *\n\t * @deprecated Use minDuration instead.\n\t * @return {Number} The minimum duration in seconds.\n\t */\n\n\tgetMinDuration() {\n\n\t\treturn this.duration.x;\n\n\t}\n\n\t/**\n\t * Sets the minimum duration of sporadic glitches.\n\t *\n\t * @deprecated Use minDuration instead.\n\t * @param {Number} value - The minimum duration in seconds.\n\t */\n\n\tsetMinDuration(value) {\n\n\t\tthis.duration.x = value;\n\n\t}\n\n\t/**\n\t * The maximum duration of sporadic glitches.\n\t *\n\t * @type {Number}\n\t */\n\n\tget maxDuration() {\n\n\t\treturn this.duration.y;\n\n\t}\n\n\tset maxDuration(value) {\n\n\t\tthis.duration.y = value;\n\n\t}\n\n\t/**\n\t * Returns the maximum duration of sporadic glitches.\n\t *\n\t * @deprecated Use maxDuration instead.\n\t * @return {Number} The maximum duration in seconds.\n\t */\n\n\tgetMaxDuration() {\n\n\t\treturn this.duration.y;\n\n\t}\n\n\t/**\n\t * Sets the maximum duration of sporadic glitches.\n\t *\n\t * @deprecated Use maxDuration instead.\n\t * @param {Number} value - The maximum duration in seconds.\n\t */\n\n\tsetMaxDuration(value) {\n\n\t\tthis.duration.y = value;\n\n\t}\n\n\t/**\n\t * The strength of weak glitches.\n\t *\n\t * @type {Number}\n\t */\n\n\tget minStrength() {\n\n\t\treturn this.strength.x;\n\n\t}\n\n\tset minStrength(value) {\n\n\t\tthis.strength.x = value;\n\n\t}\n\n\t/**\n\t * Returns the strength of weak glitches.\n\t *\n\t * @deprecated Use minStrength instead.\n\t * @return {Number} The strength.\n\t */\n\n\tgetMinStrength() {\n\n\t\treturn this.strength.x;\n\n\t}\n\n\t/**\n\t * Sets the strength of weak glitches.\n\t *\n\t * @deprecated Use minStrength instead.\n\t * @param {Number} value - The strength.\n\t */\n\n\tsetMinStrength(value) {\n\n\t\tthis.strength.x = value;\n\n\t}\n\n\t/**\n\t * The strength of strong glitches.\n\t *\n\t * @type {Number}\n\t */\n\n\tget maxStrength() {\n\n\t\treturn this.strength.y;\n\n\t}\n\n\tset maxStrength(value) {\n\n\t\tthis.strength.y = value;\n\n\t}\n\n\t/**\n\t * Returns the strength of strong glitches.\n\t *\n\t * @deprecated Use maxStrength instead.\n\t * @return {Number} The strength.\n\t */\n\n\tgetMaxStrength() {\n\n\t\treturn this.strength.y;\n\n\t}\n\n\t/**\n\t * Sets the strength of strong glitches.\n\t *\n\t * @deprecated Use maxStrength instead.\n\t * @param {Number} value - The strength.\n\t */\n\n\tsetMaxStrength(value) {\n\n\t\tthis.strength.y = value;\n\n\t}\n\n\t/**\n\t * Returns the current glitch mode.\n\t *\n\t * @deprecated Use mode instead.\n\t * @return {GlitchMode} The mode.\n\t */\n\n\tgetMode() {\n\n\t\treturn this.mode;\n\n\t}\n\n\t/**\n\t * Sets the current glitch mode.\n\t *\n\t * @deprecated Use mode instead.\n\t * @param {GlitchMode} value - The mode.\n\t */\n\n\tsetMode(value) {\n\n\t\tthis.mode = value;\n\n\t}\n\n\t/**\n\t * Returns the glitch ratio.\n\t *\n\t * @deprecated Use ratio instead.\n\t * @return {Number} The ratio.\n\t */\n\n\tgetGlitchRatio() {\n\n\t\treturn (1.0 - this.ratio);\n\n\t}\n\n\t/**\n\t * Sets the ratio of weak (0.0) and strong (1.0) glitches.\n\t *\n\t * @deprecated Use ratio instead.\n\t * @param {Number} value - The ratio. Range is [0.0, 1.0].\n\t */\n\n\tsetGlitchRatio(value) {\n\n\t\tthis.ratio = Math.min(Math.max(1.0 - value, 0.0), 1.0);\n\n\t}\n\n\t/**\n\t * The glitch column size.\n\t *\n\t * @type {Number}\n\t */\n\n\tget columns() {\n\n\t\treturn this.uniforms.get(\"columns\").value;\n\n\t}\n\n\tset columns(value) {\n\n\t\tthis.uniforms.get(\"columns\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the glitch column size.\n\t *\n\t * @deprecated Use columns instead.\n\t * @return {Number} The glitch column size.\n\t */\n\n\tgetGlitchColumns() {\n\n\t\treturn this.columns;\n\n\t}\n\n\t/**\n\t * Sets the glitch column size.\n\t *\n\t * @deprecated Use columns instead.\n\t * @param {Number} value - The glitch column size.\n\t */\n\n\tsetGlitchColumns(value) {\n\n\t\tthis.columns = value;\n\n\t}\n\n\t/**\n\t * Returns the chromatic aberration offset.\n\t *\n\t * @deprecated Use chromaticAberrationOffset instead.\n\t * @return {Vector2} The offset.\n\t */\n\n\tgetChromaticAberrationOffset() {\n\n\t\treturn this.chromaticAberrationOffset;\n\n\t}\n\n\t/**\n\t * Sets the chromatic aberration offset.\n\t *\n\t * @deprecated Use chromaticAberrationOffset instead.\n\t * @param {Vector2} value - The offset.\n\t */\n\n\tsetChromaticAberrationOffset(value) {\n\n\t\tthis.chromaticAberrationOffset = value;\n\n\t}\n\n\t/**\n\t * The perturbation map.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget perturbationMap() {\n\n\t\treturn this.uniforms.get(\"perturbationMap\").value;\n\n\t}\n\n\tset perturbationMap(value) {\n\n\t\tconst currentMap = this.perturbationMap;\n\n\t\tif(currentMap !== null && currentMap.name === textureTag) {\n\n\t\t\tcurrentMap.dispose();\n\n\t\t}\n\n\t\tvalue.minFilter = value.magFilter = NearestFilter;\n\t\tvalue.wrapS = value.wrapT = RepeatWrapping;\n\t\tvalue.generateMipmaps = false;\n\n\t\tthis.uniforms.get(\"perturbationMap\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the current perturbation map.\n\t *\n\t * @deprecated Use perturbationMap instead.\n\t * @return {Texture} The current perturbation map.\n\t */\n\n\tgetPerturbationMap() {\n\n\t\treturn this.perturbationMap;\n\n\t}\n\n\t/**\n\t * Replaces the current perturbation map with the given one.\n\t *\n\t * The current map will be disposed if it was generated by this effect.\n\t *\n\t * @deprecated Use perturbationMap instead.\n\t * @param {Texture} value - The new perturbation map.\n\t */\n\n\tsetPerturbationMap(value) {\n\n\t\tthis.perturbationMap = value;\n\n\t}\n\n\t/**\n\t * Generates a perturbation map.\n\t *\n\t * @deprecated Use NoiseTexture instead.\n\t * @param {Number} [value=64] - The texture size.\n\t * @return {DataTexture} The perturbation map.\n\t */\n\n\tgeneratePerturbationMap(value = 64) {\n\n\t\tconst map = new NoiseTexture(value, value, RGBAFormat);\n\t\tmap.name = textureTag;\n\t\treturn map;\n\n\t}\n\n\t/**\n\t * Updates this effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, deltaTime) {\n\n\t\tconst mode = this.mode;\n\t\tconst breakPoint = this.breakPoint;\n\t\tconst offset = this.chromaticAberrationOffset;\n\t\tconst s = this.strength;\n\n\t\tlet time = this.time;\n\t\tlet active = false;\n\t\tlet r = 0.0, a = 0.0;\n\t\tlet trigger;\n\n\t\tif(mode !== GlitchMode.DISABLED) {\n\n\t\t\tif(mode === GlitchMode.SPORADIC) {\n\n\t\t\t\ttime += deltaTime;\n\t\t\t\ttrigger = (time > breakPoint.x);\n\n\t\t\t\tif(time >= (breakPoint.x + breakPoint.y)) {\n\n\t\t\t\t\tbreakPoint.set(\n\t\t\t\t\t\trandomFloat(this.delay.x, this.delay.y),\n\t\t\t\t\t\trandomFloat(this.duration.x, this.duration.y)\n\t\t\t\t\t);\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tr = Math.random();\n\t\t\tthis.uniforms.get(\"random\").value = r;\n\n\t\t\t// TODO change > to <.\n\t\t\tif((trigger && r > this.ratio) || mode === GlitchMode.CONSTANT_WILD) {\n\n\t\t\t\tactive = true;\n\n\t\t\t\tr *= s.y * 0.03;\n\t\t\t\ta = randomFloat(-Math.PI, Math.PI);\n\n\t\t\t\tthis.seeds.set(randomFloat(-s.y, s.y), randomFloat(-s.y, s.y));\n\t\t\t\tthis.distortion.set(randomFloat(0.0, 1.0), randomFloat(0.0, 1.0));\n\n\t\t\t} else if(trigger || mode === GlitchMode.CONSTANT_MILD) {\n\n\t\t\t\tactive = true;\n\n\t\t\t\tr *= s.x * 0.03;\n\t\t\t\ta = randomFloat(-Math.PI, Math.PI);\n\n\t\t\t\tthis.seeds.set(randomFloat(-s.x, s.x), randomFloat(-s.x, s.x));\n\t\t\t\tthis.distortion.set(randomFloat(0.0, 1.0), randomFloat(0.0, 1.0));\n\n\t\t\t}\n\n\t\t\tthis.time = time;\n\n\t\t}\n\n\t\tif(offset !== null) {\n\n\t\t\tif(active) {\n\n\t\t\t\toffset.set(Math.cos(a), Math.sin(a)).multiplyScalar(r);\n\n\t\t\t} else {\n\n\t\t\t\toffset.set(0.0, 0.0);\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.uniforms.get(\"active\").value = active;\n\n\t}\n\n\t/**\n\t * Deletes generated resources.\n\t */\n\n\tdispose() {\n\n\t\tconst map = this.perturbationMap;\n\n\t\tif(map !== null && map.name === textureTag) {\n\n\t\t\tmap.dispose();\n\n\t\t}\n\n\t}\n\n}\n", "import {\n\tDataTexture,\n\tLuminanceFormat,\n\tRedFormat,\n\tRGFormat,\n\tRGBAFormat,\n\tUnsignedByteType\n} from \"three\";\n\n/**\n * Generates noise.\n *\n * @private\n * @param {Number} size - The linear texture size, i.e. total number of pixels.\n * @param {Number} format - The texture format.\n * @param {Number} type - The texture type.\n * @return {TypedArray} The noise data.\n */\n\nfunction getNoise(size, format, type) {\n\n\tconst channels = new Map([\n\t\t[LuminanceFormat, 1],\n\t\t[RedFormat, 1],\n\t\t[RGFormat, 2],\n\t\t[RGBAFormat, 4]\n\t]);\n\n\tlet data;\n\n\tif(!channels.has(format)) {\n\n\t\tconsole.error(\"Invalid noise texture format\");\n\n\t}\n\n\tif(type === UnsignedByteType) {\n\n\t\tdata = new Uint8Array(size * channels.get(format));\n\n\t\tfor(let i = 0, l = data.length; i < l; ++i) {\n\n\t\t\tdata[i] = Math.random() * 255 + 0.5;\n\n\t\t}\n\n\t} else {\n\n\t\tdata = new Float32Array(size * channels.get(format));\n\n\t\tfor(let i = 0, l = data.length; i < l; ++i) {\n\n\t\t\tdata[i] = Math.random();\n\n\t\t}\n\n\t}\n\n\treturn data;\n\n}\n\n/**\n * A simple noise texture.\n */\n\nexport class NoiseTexture extends DataTexture {\n\n\t/**\n\t * Constructs a new noise texture.\n\t *\n\t * The texture format can be either `LuminanceFormat` or `RGBAFormat`. Additionally, the formats `RedFormat` and\n\t * `RGFormat` can be used in a WebGL 2 context.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t * @param {Number} [format=LuminanceFormat] - The texture format.\n\t * @param {Number} [type=UnsignedByteType] - The texture type.\n\t */\n\n\tconstructor(width, height, format = LuminanceFormat, type = UnsignedByteType) {\n\n\t\tsuper(getNoise(width * height, format, type), width, height, format, type);\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n", "import {\n\tBasicDepthPacking,\n\tColor,\n\tDepthTexture,\n\tMatrix4,\n\tScene,\n\tsRGBEncoding,\n\tUniform,\n\tVector2,\n\tVector3,\n\tWebGLRenderTarget\n} from \"three\";\n\nimport { Resolution } from \"../core\";\nimport { BlendFunction, EffectAttribute, KernelSize } from \"../enums\";\nimport { DepthMaskMaterial, GodRaysMaterial } from \"../materials\";\nimport { KawaseBlurPass, ClearPass, RenderPass, ShaderPass } from \"../passes\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/god-rays.frag\";\n\nconst v = new Vector3();\nconst m = new Matrix4();\n\n/**\n * A god rays effect.\n */\n\nexport class GodRaysEffect extends Effect {\n\n\t/**\n\t * Constructs a new god rays effect.\n\t *\n\t * @param {Camera} camera - The main camera.\n\t * @param {Mesh|Points} lightSource - The light source. Must not write depth and has to be flagged as transparent.\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function of this effect.\n\t * @param {Number} [options.samples=60.0] - The number of samples per pixel.\n\t * @param {Number} [options.density=0.96] - The density of the light rays.\n\t * @param {Number} [options.decay=0.9] - An illumination decay factor.\n\t * @param {Number} [options.weight=0.4] - A light ray weight factor.\n\t * @param {Number} [options.exposure=0.6] - A constant attenuation coefficient.\n\t * @param {Number} [options.clampMax=1.0] - An upper bound for the saturation of the overall effect.\n\t * @param {Number} [options.resolutionScale=0.5] - The resolution scale.\n\t * @param {Number} [options.resolutionX=Resolution.AUTO_SIZE] - The horizontal resolution.\n\t * @param {Number} [options.resolutionY=Resolution.AUTO_SIZE] - The vertical resolution.\n\t * @param {Number} [options.width=Resolution.AUTO_SIZE] - Deprecated. Use resolutionX instead.\n\t * @param {Number} [options.height=Resolution.AUTO_SIZE] - Deprecated. Use resolutionY instead.\n\t * @param {KernelSize} [options.kernelSize=KernelSize.SMALL] - The blur kernel size. Has no effect if blur is disabled.\n\t * @param {Boolean} [options.blur=true] - Whether the god rays should be blurred to reduce artifacts.\n\t */\n\n\tconstructor(camera, lightSource, {\n\t\tblendFunction = BlendFunction.SCREEN,\n\t\tsamples = 60.0,\n\t\tdensity = 0.96,\n\t\tdecay = 0.9,\n\t\tweight = 0.4,\n\t\texposure = 0.6,\n\t\tclampMax = 1.0,\n\t\tblur = true,\n\t\tkernelSize = KernelSize.SMALL,\n\t\tresolutionScale = 0.5,\n\t\twidth = Resolution.AUTO_SIZE,\n\t\theight = Resolution.AUTO_SIZE,\n\t\tresolutionX = width,\n\t\tresolutionY = height\n\t} = {}) {\n\n\t\tsuper(\"GodRaysEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tattributes: EffectAttribute.DEPTH,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"map\", new Uniform(null)]\n\t\t\t])\n\t\t});\n\n\t\t/**\n\t\t * The main camera.\n\t\t *\n\t\t * @type {Camera}\n\t\t * @private\n\t\t */\n\n\t\tthis.camera = camera;\n\n\t\t/**\n\t\t * The light source.\n\t\t *\n\t\t * @type {Mesh|Points}\n\t\t * @private\n\t\t */\n\n\t\tthis.lightSource = lightSource;\n\t\tthis.lightSource.material.depthWrite = false;\n\t\tthis.lightSource.material.transparent = true;\n\n\t\t/**\n\t\t * A scene for the light source.\n\t\t *\n\t\t * @type {Scene}\n\t\t * @private\n\t\t */\n\n\t\tthis.lightScene = new Scene();\n\n\t\t/**\n\t\t * The light position in screen space.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @private\n\t\t */\n\n\t\tthis.screenPosition = new Vector2();\n\n\t\t/**\n\t\t * A render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetA = new WebGLRenderTarget(1, 1, { depthBuffer: false });\n\t\tthis.renderTargetA.texture.name = \"GodRays.Target.A\";\n\n\t\t/**\n\t\t * A render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetB = this.renderTargetA.clone();\n\t\tthis.renderTargetB.texture.name = \"GodRays.Target.B\";\n\t\tthis.uniforms.get(\"map\").value = this.renderTargetB.texture;\n\n\t\t/**\n\t\t * A render target for the light scene.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetLight = new WebGLRenderTarget(1, 1);\n\t\tthis.renderTargetLight.texture.name = \"GodRays.Light\";\n\t\tthis.renderTargetLight.depthTexture = new DepthTexture();\n\n\t\t/**\n\t\t * A pass that renders the light source.\n\t\t *\n\t\t * @type {RenderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderPassLight = new RenderPass(this.lightScene, camera);\n\t\tthis.renderPassLight.clearPass.overrideClearColor = new Color(0x000000);\n\n\t\t/**\n\t\t * A clear pass.\n\t\t *\n\t\t * @type {ClearPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.clearPass = new ClearPass(true, false, false);\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\n\n\t\t/**\n\t\t * A blur pass that reduces aliasing artifacts to make the light softer.\n\t\t *\n\t\t * This pass can be disabled to improve performance.\n\t\t *\n\t\t * @type {KawaseBlurPass}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.blurPass = new KawaseBlurPass({ kernelSize });\n\t\tthis.blurPass.enabled = blur;\n\n\t\t/**\n\t\t * A depth mask pass.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.depthMaskPass = new ShaderPass(new DepthMaskMaterial());\n\t\tconst depthMaskMaterial = this.depthMaskPass.fullscreenMaterial;\n\t\tdepthMaskMaterial.depthBuffer1 = this.renderTargetLight.depthTexture;\n\t\tdepthMaskMaterial.adoptCameraSettings(camera);\n\n\t\t/**\n\t\t * A god rays blur pass.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.godRaysPass = new ShaderPass(new GodRaysMaterial(this.screenPosition));\n\t\tconst godRaysMaterial = this.godRaysPass.fullscreenMaterial;\n\t\tgodRaysMaterial.density = density;\n\t\tgodRaysMaterial.decay = decay;\n\t\tgodRaysMaterial.weight = weight;\n\t\tgodRaysMaterial.exposure = exposure;\n\t\tgodRaysMaterial.maxIntensity = clampMax;\n\t\tgodRaysMaterial.samples = samples;\n\n\t\t/**\n\t\t * The render resolution.\n\t\t *\n\t\t * @type {Resolution}\n\t\t * @readonly\n\t\t */\n\n\t\tconst resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n\t\tresolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n\n\t}\n\n\t/**\n\t * Returns the blur pass that reduces aliasing artifacts and makes the light softer.\n\t *\n\t * @deprecated Use blurPass instead.\n\t * @return {KawaseBlurPass} The blur pass.\n\t */\n\n\tgetBlurPass() {\n\n\t\treturn this.blurPass;\n\n\t}\n\n\t/**\n\t * A texture that contains the intermediate result of this effect.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget texture() {\n\n\t\treturn this.renderTargetB.texture;\n\n\t}\n\n\t/**\n\t * Returns the god rays texture.\n\t *\n\t * @deprecated Use texture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetTexture() {\n\n\t\treturn this.texture;\n\n\t}\n\n\t/**\n\t * The depth mask material.\n\t *\n\t * @type {DepthMaskMaterial}\n\t * @private\n\t */\n\n\tget depthMaskMaterial() {\n\n\t\treturn this.depthMaskPass.fullscreenMaterial;\n\n\t}\n\n\t/**\n\t * The internal god rays material.\n\t *\n\t * @type {GodRaysMaterial}\n\t */\n\n\tget godRaysMaterial() {\n\n\t\treturn this.godRaysPass.fullscreenMaterial;\n\n\t}\n\n\t/**\n\t * Returns the god rays material.\n\t *\n\t * @deprecated Use godRaysMaterial instead.\n\t * @return {GodRaysMaterial} The material.\n\t */\n\n\tgetGodRaysMaterial() {\n\n\t\treturn this.godRaysMaterial;\n\n\t}\n\n\t/**\n\t * Returns the resolution of this effect.\n\t *\n\t * @deprecated Use resolution instead.\n\t * @return {GodRaysMaterial} The material.\n\t */\n\n\tgetResolution() {\n\n\t\treturn this.resolution;\n\n\t}\n\n\t/**\n\t * The current width of the internal render targets.\n\t *\n\t * @type {Number}\n\t * @deprecated Use resolution.width instead.\n\t */\n\n\tget width() {\n\n\t\treturn this.resolution.width;\n\n\t}\n\n\tset width(value) {\n\n\t\tthis.resolution.preferredWidth = value;\n\n\t}\n\n\t/**\n\t * The current height of the internal render targets.\n\t *\n\t * @type {Number}\n\t * @deprecated Use resolution.height instead.\n\t */\n\n\tget height() {\n\n\t\treturn this.resolution.height;\n\n\t}\n\n\tset height(value) {\n\n\t\tthis.resolution.preferredHeight = value;\n\n\t}\n\n\t/**\n\t * Indicates whether dithering is enabled.\n\t *\n\t * @type {Boolean}\n\t * @deprecated\n\t */\n\n\tget dithering() {\n\n\t\treturn this.godRaysMaterial.dithering;\n\n\t}\n\n\tset dithering(value) {\n\n\t\tconst material = this.godRaysMaterial;\n\t\tmaterial.dithering = value;\n\t\tmaterial.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Indicates whether the god rays should be blurred to reduce artifacts.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use blurPass.enabled instead.\n\t */\n\n\tget blur() {\n\n\t\treturn this.blurPass.enabled;\n\n\t}\n\n\tset blur(value) {\n\n\t\tthis.blurPass.enabled = value;\n\n\t}\n\n\t/**\n\t * The blur kernel size.\n\t *\n\t * @type {KernelSize}\n\t * @deprecated Use blurPass.kernelSize instead.\n\t */\n\n\tget kernelSize() {\n\n\t\treturn this.blurPass.kernelSize;\n\n\t}\n\n\tset kernelSize(value) {\n\n\t\tthis.blurPass.kernelSize = value;\n\n\t}\n\n\t/**\n\t * Returns the current resolution scale.\n\t *\n\t * @return {Number} The resolution scale.\n\t * @deprecated Use resolution instead.\n\t */\n\n\tgetResolutionScale() {\n\n\t\treturn this.resolution.scale;\n\n\t}\n\n\t/**\n\t * Sets the resolution scale.\n\t *\n\t * @param {Number} scale - The new resolution scale.\n\t * @deprecated Use resolution instead.\n\t */\n\n\tsetResolutionScale(scale) {\n\n\t\tthis.resolution.scale = scale;\n\n\t}\n\n\t/**\n\t * The number of samples per pixel.\n\t *\n\t * @type {Number}\n\t * @deprecated Use godRaysMaterial.samples instead.\n\t */\n\n\tget samples() {\n\n\t\treturn this.godRaysMaterial.samples;\n\n\t}\n\n\t/**\n\t * A higher sample count improves quality at the cost of performance.\n\t *\n\t * @type {Number}\n\t * @deprecated Use godRaysMaterial.samples instead.\n\t */\n\n\tset samples(value) {\n\n\t\tthis.godRaysMaterial.samples = value;\n\n\t}\n\n\t/**\n\t * Sets the depth texture.\n\t *\n\t * @param {Texture} depthTexture - A depth texture.\n\t * @param {Number} [depthPacking=BasicDepthPacking] - The depth packing.\n\t */\n\n\tsetDepthTexture(depthTexture, depthPacking = BasicDepthPacking) {\n\n\t\tthis.depthMaskPass.fullscreenMaterial.depthBuffer0 = depthTexture;\n\t\tthis.depthMaskPass.fullscreenMaterial.depthPacking0 = depthPacking;\n\n\t}\n\n\t/**\n\t * Updates this effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, deltaTime) {\n\n\t\tconst lightSource = this.lightSource;\n\t\tconst parent = lightSource.parent;\n\t\tconst matrixAutoUpdate = lightSource.matrixAutoUpdate;\n\n\t\tconst renderTargetA = this.renderTargetA;\n\t\tconst renderTargetLight = this.renderTargetLight;\n\n\t\t// Enable depth write for the light scene render pass.\n\t\tlightSource.material.depthWrite = true;\n\n\t\t// Update the world matrix.\n\t\tlightSource.matrixAutoUpdate = false;\n\t\tlightSource.updateWorldMatrix(true, false);\n\n\t\tif(parent !== null) {\n\n\t\t\tif(!matrixAutoUpdate) {\n\n\t\t\t\t// Remember the local transformation to restore it later.\n\t\t\t\tm.copy(lightSource.matrix);\n\n\t\t\t}\n\n\t\t\t// Apply parent transformations.\n\t\t\tlightSource.matrix.copy(lightSource.matrixWorld);\n\n\t\t}\n\n\t\t// Render the light source and mask it based on depth.\n\t\tthis.lightScene.add(lightSource);\n\t\tthis.renderPassLight.render(renderer, renderTargetLight);\n\t\tthis.clearPass.render(renderer, renderTargetA);\n\t\tthis.depthMaskPass.render(renderer, renderTargetLight, renderTargetA);\n\n\t\t// Restore the original values.\n\t\tlightSource.material.depthWrite = false;\n\t\tlightSource.matrixAutoUpdate = matrixAutoUpdate;\n\n\t\tif(parent !== null) {\n\n\t\t\tif(!matrixAutoUpdate) {\n\n\t\t\t\tlightSource.matrix.copy(m);\n\n\t\t\t}\n\n\t\t\tparent.add(lightSource);\n\n\t\t}\n\n\t\t// Calculate the screen light position.\n\t\tv.setFromMatrixPosition(lightSource.matrixWorld).project(this.camera);\n\n\t\t// Translate to [0.0, 1.0] and clamp to screen with a bias of 1.0.\n\t\tthis.screenPosition.set(\n\t\t\tMath.min(Math.max((v.x + 1.0) * 0.5, -1.0), 2.0),\n\t\t\tMath.min(Math.max((v.y + 1.0) * 0.5, -1.0), 2.0)\n\t\t);\n\n\t\tif(this.blurPass.enabled) {\n\n\t\t\t// Blur the masked scene to reduce artifacts.\n\t\t\tthis.blurPass.render(renderer, renderTargetA, renderTargetA);\n\n\t\t}\n\n\t\t// Blur the masked scene along radial lines towards the light source.\n\t\tthis.godRaysPass.render(renderer, renderTargetA, this.renderTargetB);\n\n\t}\n\n\t/**\n\t * Updates the size of internal render targets.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.setBaseSize(width, height);\n\t\tconst w = resolution.width, h = resolution.height;\n\n\t\tthis.renderTargetA.setSize(w, h);\n\t\tthis.renderTargetB.setSize(w, h);\n\t\tthis.renderTargetLight.setSize(w, h);\n\t\tthis.blurPass.resolution.copy(resolution);\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tthis.blurPass.initialize(renderer, alpha, frameBufferType);\n\t\tthis.renderPassLight.initialize(renderer, alpha, frameBufferType);\n\t\tthis.depthMaskPass.initialize(renderer, alpha, frameBufferType);\n\t\tthis.godRaysPass.initialize(renderer, alpha, frameBufferType);\n\n\t\tif(frameBufferType !== undefined) {\n\n\t\t\tthis.renderTargetA.texture.type = frameBufferType;\n\t\t\tthis.renderTargetB.texture.type = frameBufferType;\n\t\t\tthis.renderTargetLight.texture.type = frameBufferType;\n\n\t\t\tif(renderer.outputEncoding === sRGBEncoding) {\n\n\t\t\t\tthis.renderTargetA.texture.encoding = sRGBEncoding;\n\t\t\t\tthis.renderTargetB.texture.encoding = sRGBEncoding;\n\t\t\t\tthis.renderTargetLight.texture.encoding = sRGBEncoding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n", "import { Uniform, Vector2 } from \"three\";\nimport { BlendFunction } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/grid.frag\";\n\n/**\n * A grid effect.\n */\n\nexport class GridEffect extends Effect {\n\n\t/**\n\t * Constructs a new grid effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.OVERLAY] - The blend function of this effect.\n\t * @param {Number} [options.scale=1.0] - The scale of the grid pattern.\n\t * @param {Number} [options.lineWidth=0.0] - The line width of the grid pattern.\n\t */\n\n\tconstructor({ blendFunction = BlendFunction.OVERLAY, scale = 1.0, lineWidth = 0.0 } = {}) {\n\n\t\tsuper(\"GridEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"scale\", new Uniform(new Vector2())],\n\t\t\t\t[\"lineWidth\", new Uniform(lineWidth)]\n\t\t\t])\n\t\t});\n\n\t\t/**\n\t\t * The original resolution.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @private\n\t\t */\n\n\t\tthis.resolution = new Vector2();\n\n\t\t/**\n\t\t * The grid scale, relative to the screen height.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.s = 0;\n\t\tthis.scale = scale;\n\n\t\t/**\n\t\t * The grid line width.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.l = 0;\n\t\tthis.lineWidth = lineWidth;\n\n\t}\n\n\t/**\n\t * The scale.\n\t *\n\t * @type {Number}\n\t */\n\n\tget scale() {\n\n\t\treturn this.s;\n\n\t}\n\n\tset scale(value) {\n\n\t\tthis.s = Math.max(value, 1e-6);\n\t\tthis.setSize(this.resolution.width, this.resolution.height);\n\n\t}\n\n\t/**\n\t * Returns the current grid scale.\n\t *\n\t * @deprecated Use scale instead.\n\t * @return {Number} The grid scale.\n\t */\n\n\tgetScale() {\n\n\t\treturn this.scale;\n\n\t}\n\n\t/**\n\t * Sets the grid scale.\n\t *\n\t * @deprecated Use scale instead.\n\t * @param {Number} value - The new grid scale.\n\t */\n\n\tsetScale(value) {\n\n\t\tthis.scale = value;\n\n\t}\n\n\t/**\n\t * The line width.\n\t *\n\t * @type {Number}\n\t */\n\n\tget lineWidth() {\n\n\t\treturn this.l;\n\n\t}\n\n\tset lineWidth(value) {\n\n\t\tthis.l = value;\n\t\tthis.setSize(this.resolution.width, this.resolution.height);\n\n\t}\n\n\t/**\n\t * Returns the current grid line width.\n\t *\n\t * @deprecated Use lineWidth instead.\n\t * @return {Number} The grid line width.\n\t */\n\n\tgetLineWidth() {\n\n\t\treturn this.lineWidth;\n\n\t}\n\n\t/**\n\t * Sets the grid line width.\n\t *\n\t * @deprecated Use lineWidth instead.\n\t * @param {Number} value - The new grid line width.\n\t */\n\n\tsetLineWidth(value) {\n\n\t\tthis.lineWidth = value;\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.resolution.set(width, height);\n\n\t\tconst aspect = width / height;\n\t\tconst scale = this.scale * (height * 0.125);\n\n\t\tthis.uniforms.get(\"scale\").value.set(aspect * scale, scale);\n\t\tthis.uniforms.get(\"lineWidth\").value = (scale / height) + this.lineWidth;\n\n\t}\n\n}\n", "import { Uniform, Vector3 } from \"three\";\nimport { BlendFunction } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/hue-saturation.frag\";\n\n/**\n * A hue/saturation effect.\n *\n * Reference: https://github.com/evanw/glfx.js\n */\n\nexport class HueSaturationEffect extends Effect {\n\n\t/**\n\t * Constructs a new hue/saturation effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SRC] - The blend function of this effect.\n\t * @param {Number} [options.hue=0.0] - The hue in radians.\n\t * @param {Number} [options.saturation=0.0] - The saturation factor, ranging from -1 to 1, where 0 means no change.\n\t */\n\n\tconstructor({ blendFunction = BlendFunction.SRC, hue = 0.0, saturation = 0.0 } = {}) {\n\n\t\tsuper(\"HueSaturationEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"hue\", new Uniform(new Vector3())],\n\t\t\t\t[\"saturation\", new Uniform(saturation)]\n\t\t\t])\n\t\t});\n\n\t\tthis.hue = hue;\n\n\t}\n\n\t/**\n\t * The saturation.\n\t *\n\t * @type {Number}\n\t */\n\n\tget saturation() {\n\n\t\treturn this.uniforms.get(\"saturation\").value;\n\n\t}\n\n\tset saturation(value) {\n\n\t\tthis.uniforms.get(\"saturation\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the saturation.\n\t *\n\t * @deprecated Use saturation instead.\n\t * @return {Number} The saturation.\n\t */\n\n\tgetSaturation() {\n\n\t\treturn this.saturation;\n\n\t}\n\n\t/**\n\t * Sets the saturation.\n\t *\n\t * @deprecated Use saturation instead.\n\t * @param {Number} value - The saturation.\n\t */\n\n\tsetSaturation(value) {\n\n\t\tthis.saturation = value;\n\n\t}\n\n\t/**\n\t * The hue.\n\t *\n\t * @type {Number}\n\t */\n\n\tget hue() {\n\n\t\tconst hue = this.uniforms.get(\"hue\").value;\n\t\treturn Math.acos((hue.x * 3.0 - 1.0) / 2.0);\n\n\t}\n\n\tset hue(value) {\n\n\t\tconst s = Math.sin(value), c = Math.cos(value);\n\n\t\tthis.uniforms.get(\"hue\").value.set(\n\t\t\t(2.0 * c + 1.0) / 3.0,\n\t\t\t(-Math.sqrt(3.0) * s - c + 1.0) / 3.0,\n\t\t\t(Math.sqrt(3.0) * s - c + 1.0) / 3.0\n\t\t);\n\n\t}\n\n\t/**\n\t * Returns the hue.\n\t *\n\t * @deprecated Use hue instead.\n\t * @return {Number} The hue in radians.\n\t */\n\n\tgetHue() {\n\n\t\treturn this.hue;\n\n\t}\n\n\t/**\n\t * Sets the hue.\n\t *\n\t * @deprecated Use hue instead.\n\t * @param {Number} value - The hue in radians.\n\t */\n\n\tsetHue(value) {\n\n\t\tthis.hue = value;\n\n\t}\n\n}\n", "import { FloatType, HalfFloatType, Uniform } from \"three\";\nimport { BlendFunction } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/lut-1d.frag\";\n\n/**\n * A 1D LUT effect.\n */\n\nexport class LUT1DEffect extends Effect {\n\n\t/**\n\t * Constructs a new color grading effect.\n\t *\n\t * @param {Texture} lut - The lookup texture.\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SRC] - The blend function of this effect.\n\t */\n\n\tconstructor(lut, { blendFunction = BlendFunction.SRC } = {}) {\n\n\t\tsuper(\"LUT1DEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([[\"lut\", new Uniform(null)]])\n\t\t});\n\n\t\tthis.lut = lut;\n\n\t}\n\n\t/**\n\t * The LUT.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget lut() {\n\n\t\treturn this.uniforms.get(\"lut\").value;\n\n\t}\n\n\tset lut(value) {\n\n\t\tthis.uniforms.get(\"lut\").value = value;\n\n\t\tif(value !== null && (value.type === FloatType || value.type === HalfFloatType)) {\n\n\t\t\tthis.defines.set(\"LUT_PRECISION_HIGH\", \"1\");\n\n\t\t}\n\n\t}\n\n}\n", "import {\n\tDataTexture3D,\n\tFloatType,\n\tHalfFloatType,\n\tLinearFilter,\n\tNearestFilter,\n\tsRGBEncoding,\n\tUniform,\n\tVector3\n} from \"three\";\n\nimport { BlendFunction } from \"../enums\";\nimport { LookupTexture } from \"../textures\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/lut-3d.frag\";\n\n/**\n * A LUT effect.\n *\n * The tetrahedral interpolation algorithm was inspired by an implementation from OpenColorIO which is licensed under\n * the BSD 3-Clause License.\n *\n * The manual trilinear interpolation algorithm is based on an implementation by Garret Johnson which is licensed under\n * the MIT License.\n *\n * References:\n * https://developer.nvidia.com/gpugems/gpugems2/part-iii-high-quality-rendering/chapter-24-using-lookup-tables-accelerate-color\n * https://www.nvidia.com/content/GTC/posters/2010/V01-Real-Time-Color-Space-Conversion-for-High-Resolution-Video.pdf\n * https://github.com/AcademySoftwareFoundation/OpenColorIO/blob/master/src/OpenColorIO/ops/lut3d/\n * https://github.com/gkjohnson/threejs-sandbox/tree/master/3d-lut\n *\n * TODO Replace DataTexture3D with Data3DTexture and rename inputEncoding to inputColorSpace.\n */\n\nexport class LUT3DEffect extends Effect {\n\n\t/**\n\t * Constructs a new color grading effect.\n\t *\n\t * @param {Texture} lut - The lookup texture.\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SRC] - The blend function of this effect.\n\t * @param {Boolean} [options.tetrahedralInterpolation=false] - Enables or disables tetrahedral interpolation.\n\t * @param {TextureEncoding} [options.inputEncoding=sRGBEncoding] - LUT input encoding.\n\t */\n\n\tconstructor(lut, {\n\t\tblendFunction = BlendFunction.SRC,\n\t\ttetrahedralInterpolation = false,\n\t\tinputEncoding = sRGBEncoding\n\t} = {}) {\n\n\t\tsuper(\"LUT3DEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"lut\", new Uniform(null)],\n\t\t\t\t[\"scale\", new Uniform(new Vector3())],\n\t\t\t\t[\"offset\", new Uniform(new Vector3())],\n\t\t\t\t[\"domainMin\", new Uniform(null)],\n\t\t\t\t[\"domainMax\", new Uniform(null)]\n\t\t\t])\n\t\t});\n\n\t\tthis.tetrahedralInterpolation = tetrahedralInterpolation;\n\t\tthis.inputColorSpace = inputEncoding;\n\t\tthis.lut = lut;\n\n\t}\n\n\t/**\n\t * The input encoding. Default is `sRGBEncoding`.\n\t *\n\t * Set this to `LinearEncoding` if your LUT expects linear color input.\n\t *\n\t * @deprecated Use inputColorSpace instead.\n\t * @type {TextureEncoding}\n\t */\n\n\tget inputEncoding() {\n\n\t\treturn this.inputColorSpace;\n\n\t}\n\n\tset inputEncoding(value) {\n\n\t\tthis.inputColorSpace = value;\n\n\t}\n\n\t/**\n\t * Returns the input encoding.\n\t *\n\t * @deprecated Use inputColorSpace instead.\n\t * @return {TextureEncoding} The encoding.\n\t */\n\n\tgetInputEncoding() {\n\n\t\treturn this.inputColorSpace;\n\n\t}\n\n\t/**\n\t * Sets the input encoding.\n\t *\n\t * @deprecated Use inputColorSpace instead.\n\t * @param {TextureEncoding} value - The encoding.\n\t */\n\n\tsetInputEncoding(value) {\n\n\t\tthis.inputColorSpace = value;\n\n\t}\n\n\t/**\n\t * Returns the output encoding.\n\t *\n\t * @deprecated Use outputColorSpace instead.\n\t * @return {TextureEncoding} The encoding.\n\t */\n\n\tgetOutputEncoding() {\n\n\t\treturn this.outputColorSpace;\n\n\t}\n\n\t/**\n\t * The LUT.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget lut() {\n\n\t\treturn this.uniforms.get(\"lut\").value;\n\n\t}\n\n\tset lut(value) {\n\n\t\tconst defines = this.defines;\n\t\tconst uniforms = this.uniforms;\n\n\t\tif(this.lut !== value) {\n\n\t\t\tuniforms.get(\"lut\").value = value;\n\n\t\t\tif(value !== null) {\n\n\t\t\t\tconst image = value.image;\n\n\t\t\t\t// Remember settings that are backed by defines.\n\t\t\t\tconst tetrahedralInterpolation = this.tetrahedralInterpolation;\n\n\t\t\t\tdefines.clear();\n\t\t\t\tdefines.set(\"LUT_SIZE\", Math.min(image.width, image.height).toFixed(16));\n\t\t\t\tdefines.set(\"LUT_TEXEL_WIDTH\", (1.0 / image.width).toFixed(16));\n\t\t\t\tdefines.set(\"LUT_TEXEL_HEIGHT\", (1.0 / image.height).toFixed(16));\n\n\t\t\t\tuniforms.get(\"domainMin\").value = null;\n\t\t\t\tuniforms.get(\"domainMax\").value = null;\n\n\t\t\t\tif(value.type === FloatType || value.type === HalfFloatType) {\n\n\t\t\t\t\tdefines.set(\"LUT_PRECISION_HIGH\", \"1\");\n\n\t\t\t\t}\n\n\t\t\t\tif(image.width > image.height) {\n\n\t\t\t\t\tdefines.set(\"LUT_STRIP_HORIZONTAL\", \"1\");\n\n\t\t\t\t} else if(value instanceof DataTexture3D) {\n\n\t\t\t\t\tdefines.set(\"LUT_3D\", \"1\");\n\n\t\t\t\t}\n\n\t\t\t\tif(value instanceof LookupTexture) {\n\n\t\t\t\t\tconst min = value.domainMin;\n\t\t\t\t\tconst max = value.domainMax;\n\n\t\t\t\t\tif(min.x !== 0 || min.y !== 0 || min.z !== 0 || max.x !== 1 || max.y !== 1 || max.z !== 1) {\n\n\t\t\t\t\t\tdefines.set(\"CUSTOM_INPUT_DOMAIN\", \"1\");\n\t\t\t\t\t\tuniforms.get(\"domainMin\").value = min.clone();\n\t\t\t\t\t\tuniforms.get(\"domainMax\").value = max.clone();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Refresh settings that affect the LUT.\n\t\t\t\tthis.tetrahedralInterpolation = tetrahedralInterpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the current LUT.\n\t *\n\t * @deprecated Use lut instead.\n\t * @return {Texture} The LUT.\n\t */\n\n\tgetLUT() {\n\n\t\treturn this.lut;\n\n\t}\n\n\t/**\n\t * Sets the LUT.\n\t *\n\t * @deprecated Use lut instead.\n\t * @param {Texture} value - The LUT.\n\t */\n\n\tsetLUT(value) {\n\n\t\tthis.lut = value;\n\n\t}\n\n\t/**\n\t * Updates the scale and offset for the LUT sampling coordinates.\n\t *\n\t * @private\n\t */\n\n\tupdateScaleOffset() {\n\n\t\tconst lut = this.lut;\n\n\t\tif(lut !== null) {\n\n\t\t\tconst size = Math.min(lut.image.width, lut.image.height);\n\t\t\tconst scale = this.uniforms.get(\"scale\").value;\n\t\t\tconst offset = this.uniforms.get(\"offset\").value;\n\n\t\t\tif(this.tetrahedralInterpolation && lut instanceof DataTexture3D) {\n\n\t\t\t\tif(this.defines.has(\"CUSTOM_INPUT_DOMAIN\")) {\n\n\t\t\t\t\tconst domainScale = lut.domainMax.clone().sub(lut.domainMin);\n\t\t\t\t\tscale.setScalar(size - 1).divide(domainScale);\n\t\t\t\t\toffset.copy(lut.domainMin).negate().multiply(scale);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscale.setScalar(size - 1);\n\t\t\t\t\toffset.setScalar(0);\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif(this.defines.has(\"CUSTOM_INPUT_DOMAIN\")) {\n\n\t\t\t\t\tconst domainScale = lut.domainMax.clone().sub(lut.domainMin).multiplyScalar(size);\n\t\t\t\t\tscale.setScalar(size - 1).divide(domainScale);\n\t\t\t\t\toffset.copy(lut.domainMin).negate().multiply(scale).addScalar(1.0 / (2.0 * size));\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscale.setScalar((size - 1) / size);\n\t\t\t\t\toffset.setScalar(1.0 / (2.0 * size));\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Configures parameters for tetrahedral interpolation.\n\t *\n\t * @private\n\t */\n\n\tconfigureTetrahedralInterpolation() {\n\n\t\tconst lut = this.lut;\n\n\t\tif(lut !== null) {\n\n\t\t\tlut.minFilter = LinearFilter;\n\t\t\tlut.magFilter = LinearFilter;\n\n\t\t\tif(this.tetrahedralInterpolation) {\n\n\t\t\t\tif(lut instanceof DataTexture3D) {\n\n\t\t\t\t\t// Interpolate samples manually.\n\t\t\t\t\tlut.minFilter = NearestFilter;\n\t\t\t\t\tlut.magFilter = NearestFilter;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn(\"Tetrahedral interpolation requires a 3D texture\");\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// TODO Added for compatibility with r138. Remove later.\n\t\t\tif(lut.source === undefined) {\n\n\t\t\t\tlut.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indicates whether tetrahedral interpolation is enabled. Requires a 3D LUT, disabled by default.\n\t *\n\t * Tetrahedral interpolation produces highly accurate results but is slower than hardware interpolation.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget tetrahedralInterpolation() {\n\n\t\treturn this.defines.has(\"TETRAHEDRAL_INTERPOLATION\");\n\n\t}\n\n\tset tetrahedralInterpolation(value) {\n\n\t\tif(value) {\n\n\t\t\tthis.defines.set(\"TETRAHEDRAL_INTERPOLATION\", \"1\");\n\n\t\t} else {\n\n\t\t\tthis.defines.delete(\"TETRAHEDRAL_INTERPOLATION\");\n\n\t\t}\n\n\t\tthis.configureTetrahedralInterpolation();\n\t\tthis.updateScaleOffset();\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * Enables or disables tetrahedral interpolation.\n\t *\n\t * @deprecated Use tetrahedralInterpolation instead.\n\t * @param {Boolean} value - Whether tetrahedral interpolation should be enabled.\n\t */\n\n\tsetTetrahedralInterpolationEnabled(value) {\n\n\t\tthis.tetrahedralInterpolation = value;\n\n\t}\n\n}\n", "import {\n\tColor,\n\tClampToEdgeWrapping,\n\tDataTexture,\n\tDataTexture3D,\n\tFloatType,\n\tLinearFilter,\n\tLinearEncoding,\n\tRGBAFormat,\n\tsRGBEncoding,\n\tUnsignedByteType,\n\tVector3\n} from \"three\";\n\nimport { LUTOperation } from \"../../enums\";\nimport { RawImageData } from \"../RawImageData\";\nimport workerProgram from \"../../../tmp/lut/worker.txt\";\n\nconst c = new Color();\n\n/**\n * A 3D lookup texture (LUT).\n *\n * This texture can be used as-is in a WebGL 2 context. It can also be converted into a 2D texture.\n *\n * TODO Extend Data3DTexture.\n */\n\nexport class LookupTexture extends DataTexture3D {\n\n\t/**\n\t * Constructs a cubic 3D lookup texture.\n\t *\n\t * @param {TypedArray} data - The pixel data. The default format is RGBA.\n\t * @param {Number} size - The sidelength.\n\t */\n\n\tconstructor(data, size) {\n\n\t\tsuper(data, size, size, size);\n\n\t\tthis.type = FloatType;\n\t\tthis.format = RGBAFormat;\n\t\tthis.encoding = LinearEncoding;\n\t\tthis.minFilter = LinearFilter;\n\t\tthis.magFilter = LinearFilter;\n\t\tthis.wrapS = ClampToEdgeWrapping;\n\t\tthis.wrapT = ClampToEdgeWrapping;\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\t\tthis.unpackAlignment = 1;\n\t\tthis.needsUpdate = true;\n\n\t\t/**\n\t\t * The lower bounds of the input domain.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\n\t\tthis.domainMin = new Vector3(0.0, 0.0, 0.0);\n\n\t\t/**\n\t\t * The upper bounds of the input domain.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\n\t\tthis.domainMax = new Vector3(1.0, 1.0, 1.0);\n\n\t}\n\n\t/**\n\t * Indicates that this is an instance of LookupTexture3D.\n\t *\n\t * @type {Boolean}\n\t * @deprecated\n\t */\n\n\tget isLookupTexture3D() {\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Scales this LUT up to a given target size using tetrahedral interpolation.\n\t *\n\t * @param {Number} size - The target sidelength.\n\t * @param {Boolean} [transferData=true] - Extra fast mode. Set to false to keep the original data intact.\n\t * @return {Promise<LookupTexture>} A promise that resolves with a new LUT upon completion.\n\t */\n\n\tscaleUp(size, transferData = true) {\n\n\t\tconst image = this.image;\n\t\tlet promise;\n\n\t\tif(size <= image.width) {\n\n\t\t\tpromise = Promise.reject(new Error(\"The target size must be greater than the current size\"));\n\n\t\t} else {\n\n\t\t\tpromise = new Promise((resolve, reject) => {\n\n\t\t\t\tconst workerURL = URL.createObjectURL(new Blob([workerProgram], {\n\t\t\t\t\ttype: \"text/javascript\"\n\t\t\t\t}));\n\n\t\t\t\tconst worker = new Worker(workerURL);\n\t\t\t\tworker.addEventListener(\"error\", (event) => reject(event.error));\n\t\t\t\tworker.addEventListener(\"message\", (event) => {\n\n\t\t\t\t\tconst lut = new LookupTexture(event.data, size);\n\t\t\t\t\tlut.encoding = this.encoding;\n\t\t\t\t\tlut.type = this.type;\n\t\t\t\t\tlut.name = this.name;\n\n\t\t\t\t\tURL.revokeObjectURL(workerURL);\n\t\t\t\t\tresolve(lut);\n\n\t\t\t\t});\n\n\t\t\t\tconst transferList = transferData ? [image.data.buffer] : [];\n\n\t\t\t\tworker.postMessage({\n\t\t\t\t\toperation: LUTOperation.SCALE_UP,\n\t\t\t\t\tdata: image.data,\n\t\t\t\t\tsize\n\t\t\t\t}, transferList);\n\n\t\t\t});\n\n\t\t}\n\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Applies the given LUT to this one.\n\t *\n\t * @param {LookupTexture} lut - A LUT. Must have the same dimensions, type and format as this LUT.\n\t * @return {LookupTexture} This texture.\n\t */\n\n\tapplyLUT(lut) {\n\n\t\tconst img0 = this.image;\n\t\tconst img1 = lut.image;\n\n\t\tconst size0 = Math.min(img0.width, img0.height, img0.depth);\n\t\tconst size1 = Math.min(img1.width, img1.height, img1.depth);\n\n\t\tif(size0 !== size1) {\n\n\t\t\tconsole.error(\"Size mismatch\");\n\n\t\t} else if(lut.type !== FloatType || this.type !== FloatType) {\n\n\t\t\tconsole.error(\"Both LUTs must be FloatType textures\");\n\n\t\t} else if(lut.format !== RGBAFormat || this.format !== RGBAFormat) {\n\n\t\t\tconsole.error(\"Both LUTs must be RGBA textures\");\n\n\t\t} else {\n\n\t\t\tconst data0 = img0.data;\n\t\t\tconst data1 = img1.data;\n\t\t\tconst size = size0;\n\t\t\tconst sizeSq = size ** 2;\n\t\t\tconst s = size - 1;\n\n\t\t\tfor(let i = 0, l = size ** 3; i < l; ++i) {\n\n\t\t\t\tconst i4 = i * 4;\n\t\t\t\tconst r = data0[i4 + 0] * s;\n\t\t\t\tconst g = data0[i4 + 1] * s;\n\t\t\t\tconst b = data0[i4 + 2] * s;\n\t\t\t\tconst iRGB = Math.round(r + g * size + b * sizeSq) * 4;\n\n\t\t\t\tdata0[i4 + 0] = data1[iRGB + 0];\n\t\t\t\tdata0[i4 + 1] = data1[iRGB + 1];\n\t\t\t\tdata0[i4 + 2] = data1[iRGB + 2];\n\n\t\t\t}\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Converts the LUT data into unsigned byte data.\n\t *\n\t * This is a lossy operation which should only be performed after all other transformations have been applied.\n\t *\n\t * @return {LookupTexture} This texture.\n\t */\n\n\tconvertToUint8() {\n\n\t\tif(this.type === FloatType) {\n\n\t\t\tconst floatData = this.image.data;\n\t\t\tconst uint8Data = new Uint8Array(floatData.length);\n\n\t\t\tfor(let i = 0, l = floatData.length; i < l; ++i) {\n\n\t\t\t\tuint8Data[i] = floatData[i] * 255 + 0.5;\n\n\t\t\t}\n\n\t\t\tthis.image.data = uint8Data;\n\t\t\tthis.type = UnsignedByteType;\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Converts the LUT data into float data.\n\t *\n\t * @return {LookupTexture} This texture.\n\t */\n\n\tconvertToFloat() {\n\n\t\tif(this.type === UnsignedByteType) {\n\n\t\t\tconst uint8Data = this.image.data;\n\t\t\tconst floatData = new Float32Array(uint8Data.length);\n\n\t\t\tfor(let i = 0, l = uint8Data.length; i < l; ++i) {\n\n\t\t\t\tfloatData[i] = uint8Data[i] / 255;\n\n\t\t\t}\n\n\t\t\tthis.image.data = floatData;\n\t\t\tthis.type = FloatType;\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Converts this LUT into RGBA data.\n\t *\n\t * @deprecated LUTs are RGBA by default since three r137.\n\t * @return {LookupTexture} This texture.\n\t */\n\n\tconvertToRGBA() {\n\n\t\tconsole.warn(\"LookupTexture\", \"convertToRGBA() is deprecated, LUTs are now RGBA by default\");\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Converts the output of this LUT into sRGB color space.\n\t *\n\t * @return {LookupTexture} This texture.\n\t */\n\n\tconvertLinearToSRGB() {\n\n\t\tconst data = this.image.data;\n\n\t\tif(this.type === FloatType) {\n\n\t\t\tfor(let i = 0, l = data.length; i < l; i += 4) {\n\n\t\t\t\tc.fromArray(data, i).convertLinearToSRGB().toArray(data, i);\n\n\t\t\t}\n\n\t\t\tthis.encoding = sRGBEncoding;\n\t\t\tthis.needsUpdate = true;\n\n\t\t} else {\n\n\t\t\tconsole.error(\"Color space conversion requires FloatType data\");\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Converts the output of this LUT into linear color space.\n\t *\n\t * @return {LookupTexture} This texture.\n\t */\n\n\tconvertSRGBToLinear() {\n\n\t\tconst data = this.image.data;\n\n\t\tif(this.type === FloatType) {\n\n\t\t\tfor(let i = 0, l = data.length; i < l; i += 4) {\n\n\t\t\t\tc.fromArray(data, i).convertSRGBToLinear().toArray(data, i);\n\n\t\t\t}\n\n\t\t\tthis.encoding = LinearEncoding;\n\t\t\tthis.needsUpdate = true;\n\n\t\t} else {\n\n\t\t\tconsole.error(\"Color space conversion requires FloatType data\");\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Converts this LUT into a 2D data texture.\n\t *\n\t * Please note that custom input domains are not carried over to 2D textures.\n\t *\n\t * @return {DataTexture} The texture.\n\t */\n\n\ttoDataTexture() {\n\n\t\tconst width = this.image.width;\n\t\tconst height = this.image.height * this.image.depth;\n\n\t\tconst texture = new DataTexture(this.image.data, width, height);\n\t\ttexture.name = this.name;\n\t\ttexture.type = this.type;\n\t\ttexture.format = this.format;\n\t\ttexture.encoding = this.encoding;\n\t\ttexture.minFilter = LinearFilter;\n\t\ttexture.magFilter = LinearFilter;\n\t\ttexture.wrapS = this.wrapS;\n\t\ttexture.wrapT = this.wrapT;\n\t\ttexture.generateMipmaps = false;\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n\t/**\n\t * Creates a new 3D LUT by copying a given LUT.\n\t *\n\t * Common image-based textures will be converted into 3D data textures.\n\t *\n\t * @param {Texture} texture - The LUT. Assumed to be cubic.\n\t * @return {LookupTexture} A new 3D LUT.\n\t */\n\n\tstatic from(texture) {\n\n\t\tconst image = texture.image;\n\t\tconst { width, height } = image;\n\t\tconst size = Math.min(width, height);\n\n\t\tlet data;\n\n\t\tif(image instanceof Image) {\n\n\t\t\t// Convert the image into RGBA Uint8 data.\n\t\t\tconst rawImageData = RawImageData.from(image);\n\t\t\tconst src = rawImageData.data;\n\n\t\t\t// Horizontal layout?\n\t\t\tif(width > height) {\n\n\t\t\t\tdata = new Uint8Array(src.length);\n\n\t\t\t\t// Slices -> Rows -> Columns.\n\t\t\t\tfor(let z = 0; z < size; ++z) {\n\n\t\t\t\t\tfor(let y = 0; y < size; ++y) {\n\n\t\t\t\t\t\tfor(let x = 0; x < size; ++x) {\n\n\t\t\t\t\t\t\t// Source: horizontal arrangement. Swap Y and Z.\n\t\t\t\t\t\t\tconst i4 = (x + z * size + y * size * size) * 4;\n\n\t\t\t\t\t\t\t// Target: vertical arrangement.\n\t\t\t\t\t\t\tconst j4 = (x + y * size + z * size * size) * 4;\n\n\t\t\t\t\t\t\tdata[j4 + 0] = src[i4 + 0];\n\t\t\t\t\t\t\tdata[j4 + 1] = src[i4 + 1];\n\t\t\t\t\t\t\tdata[j4 + 2] = src[i4 + 2];\n\t\t\t\t\t\t\tdata[j4 + 3] = src[i4 + 3];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Same layout: convert from Uint8ClampedArray to Uint8Array.\n\t\t\t\tdata = new Uint8Array(src.buffer);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdata = image.data.slice();\n\n\t\t}\n\n\t\tconst lut = new LookupTexture(data, size);\n\t\tlut.encoding = texture.encoding;\n\t\tlut.type = texture.type;\n\t\tlut.name = texture.name;\n\n\t\treturn lut;\n\n\t}\n\n\t/**\n\t * Creates a neutral 3D LUT.\n\t *\n\t * @param {Number} size - The sidelength.\n\t * @return {LookupTexture} A neutral 3D LUT.\n\t */\n\n\tstatic createNeutral(size) {\n\n\t\tconst data = new Float32Array(size ** 3 * 4);\n\t\tconst sizeSq = size ** 2;\n\t\tconst s = 1.0 / (size - 1.0);\n\n\t\tfor(let r = 0; r < size; ++r) {\n\n\t\t\tfor(let g = 0; g < size; ++g) {\n\n\t\t\t\tfor(let b = 0; b < size; ++b) {\n\n\t\t\t\t\tconst i4 = (r + g * size + b * sizeSq) * 4;\n\t\t\t\t\tdata[i4 + 0] = r * s;\n\t\t\t\t\tdata[i4 + 1] = g * s;\n\t\t\t\t\tdata[i4 + 2] = b * s;\n\t\t\t\t\tdata[i4 + 3] = 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst lut = new LookupTexture(data, size);\n\t\tlut.name = \"neutral\";\n\n\t\treturn lut;\n\n\t}\n\n}\n", "/**\n * Creates a new canvas from raw image data.\n *\n * @private\n * @param {Number} width - The image width.\n * @param {Number} height - The image height.\n * @param {Uint8ClampedArray|Image} data - The image data.\n * @return {Canvas} The canvas.\n */\n\nfunction createCanvas(width, height, data) {\n\n\tconst canvas = document.createElement(\"canvas\");\n\tconst context = canvas.getContext(\"2d\");\n\n\tcanvas.width = width;\n\tcanvas.height = height;\n\n\tif(data instanceof Image) {\n\n\t\tcontext.drawImage(data, 0, 0);\n\n\t} else {\n\n\t\tconst imageData = context.createImageData(width, height);\n\t\timageData.data.set(data);\n\t\tcontext.putImageData(imageData, 0, 0);\n\n\t}\n\n\treturn canvas;\n\n}\n\n/**\n * A container for raw RGBA image data.\n *\n * @implements {ImageData}\n */\n\nexport class RawImageData {\n\n\t/**\n\t * Constructs a new image data container.\n\t *\n\t * @param {Number} [width=0] - The width of the image.\n\t * @param {Number} [height=0] - The height of the image.\n\t * @param {Uint8ClampedArray} [data=null] - The image data.\n\t */\n\n\tconstructor(width = 0, height = 0, data = null) {\n\n\t\t/**\n\t\t * The width of the image.\n\t\t *\n\t\t * @type {Number}\n\t\t */\n\n\t\tthis.width = width;\n\n\t\t/**\n\t\t * The height of the image.\n\t\t *\n\t\t * @type {Number}\n\t\t */\n\n\t\tthis.height = height;\n\n\t\t/**\n\t\t * The RGBA image data.\n\t\t *\n\t\t * @type {Uint8ClampedArray}\n\t\t */\n\n\t\tthis.data = data;\n\n\t}\n\n\t/**\n\t * Creates a canvas from this image data.\n\t *\n\t * @return {Canvas} The canvas, or null if it couldn't be created.\n\t */\n\n\ttoCanvas() {\n\n\t\treturn (typeof document === \"undefined\") ? null : createCanvas(this.width, this.height, this.data);\n\n\t}\n\n\t/**\n\t * Creates a new image data container.\n\t *\n\t * @param {ImageData|Image} image - An image or plain image data.\n\t * @return {RawImageData} The image data.\n\t */\n\n\tstatic from(image) {\n\n\t\tconst { width, height } = image;\n\t\tlet data;\n\n\t\tif(image instanceof Image) {\n\n\t\t\tconst canvas = createCanvas(width, height, image);\n\n\t\t\tif(canvas !== null) {\n\n\t\t\t\tconst context = canvas.getContext(\"2d\");\n\t\t\t\tdata = context.getImageData(0, 0, width, height).data;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdata = image.data;\n\n\t\t}\n\n\t\treturn new RawImageData(width, height, data);\n\n\t}\n\n}\n", "/**\n * Two temporary vectors.\n *\n * @type {Float32Array[]}\n * @private\n */\n\nconst P = [\n\tnew Float32Array(3),\n\tnew Float32Array(3)\n];\n\n/**\n * Four temporary RGB color containers.\n *\n * @type {Float32Array[]}\n * @private\n */\n\nconst C = [\n\tnew Float32Array(3),\n\tnew Float32Array(3),\n\tnew Float32Array(3),\n\tnew Float32Array(3)\n];\n\n/**\n * Six congruent and equal sized tetrahedra, each defined by four vertices.\n *\n * @type {Float32Array[][]}\n * @private\n */\n\nconst T = [\n\t[\n\t\tnew Float32Array([0, 0, 0]),\n\t\tnew Float32Array([1, 0, 0]),\n\t\tnew Float32Array([1, 1, 0]),\n\t\tnew Float32Array([1, 1, 1])\n\t], [\n\t\tnew Float32Array([0, 0, 0]),\n\t\tnew Float32Array([1, 0, 0]),\n\t\tnew Float32Array([1, 0, 1]),\n\t\tnew Float32Array([1, 1, 1])\n\t], [\n\t\tnew Float32Array([0, 0, 0]),\n\t\tnew Float32Array([0, 0, 1]),\n\t\tnew Float32Array([1, 0, 1]),\n\t\tnew Float32Array([1, 1, 1])\n\t], [\n\t\tnew Float32Array([0, 0, 0]),\n\t\tnew Float32Array([0, 1, 0]),\n\t\tnew Float32Array([1, 1, 0]),\n\t\tnew Float32Array([1, 1, 1])\n\t], [\n\t\tnew Float32Array([0, 0, 0]),\n\t\tnew Float32Array([0, 1, 0]),\n\t\tnew Float32Array([0, 1, 1]),\n\t\tnew Float32Array([1, 1, 1])\n\t], [\n\t\tnew Float32Array([0, 0, 0]),\n\t\tnew Float32Array([0, 0, 1]),\n\t\tnew Float32Array([0, 1, 1]),\n\t\tnew Float32Array([1, 1, 1])\n\t]\n];\n\n/**\n * Calculates the volume of a given tetrahedron.\n *\n * @private\n * @param {Float32Array} a - A tetrahedron vertex.\n * @param {Float32Array} b - A tetrahedron vertex.\n * @param {Float32Array} c - A tetrahedron vertex.\n * @param {Float32Array} d - A tetrahedron vertex.\n * @return {Number} The volume.\n */\n\nfunction calculateTetrahedronVolume(a, b, c, d) {\n\n\t// Calculate the area of the base triangle.\n\tconst bcX = c[0] - b[0];\n\tconst bcY = c[1] - b[1];\n\tconst bcZ = c[2] - b[2];\n\n\tconst baX = a[0] - b[0];\n\tconst baY = a[1] - b[1];\n\tconst baZ = a[2] - b[2];\n\n\tconst crossX = bcY * baZ - bcZ * baY;\n\tconst crossY = bcZ * baX - bcX * baZ;\n\tconst crossZ = bcX * baY - bcY * baX;\n\n\tconst length = Math.sqrt(crossX * crossX + crossY * crossY + crossZ * crossZ);\n\tconst triangleArea = length * 0.5;\n\n\t// Construct the base plane.\n\tconst normalX = crossX / length;\n\tconst normalY = crossY / length;\n\tconst normalZ = crossZ / length;\n\tconst constant = -(a[0] * normalX + a[1] * normalY + a[2] * normalZ);\n\n\t// Calculate the height of the tetrahedron.\n\tconst dot = d[0] * normalX + d[1] * normalY + d[2] * normalZ;\n\tconst height = Math.abs(dot + constant);\n\n\treturn height * triangleArea / 3.0;\n\n}\n\n/**\n * Samples the given data.\n *\n * @private\n * @param {TypedArray} data - The source data (RGBA).\n * @param {Number} size - The size of the source texture.\n * @param {Number} x - The X coordinate.\n * @param {Number} y - The Y coordinate.\n * @param {Number} z - The Z coordinate.\n * @param {Float32Array} color - A container for the sampled color.\n */\n\nfunction sample(data, size, x, y, z, color) {\n\n\tconst i4 = (x + y * size + z * size * size) * 4;\n\tcolor[0] = data[i4 + 0];\n\tcolor[1] = data[i4 + 1];\n\tcolor[2] = data[i4 + 2];\n\n}\n\n/**\n * Samples the given data using tetrahedral interpolation.\n *\n * @private\n * @param {TypedArray} data - The source data.\n * @param {Number} size - The size of the source texture.\n * @param {Number} u - The U coordinate.\n * @param {Number} v - The V coordinate.\n * @param {Number} w - The W coordinate.\n * @param {Float32Array} color - A container for the sampled color.\n */\n\nfunction tetrahedralSample(data, size, u, v, w, color) {\n\n\tconst px = u * (size - 1.0);\n\tconst py = v * (size - 1.0);\n\tconst pz = w * (size - 1.0);\n\n\tconst minX = Math.floor(px);\n\tconst minY = Math.floor(py);\n\tconst minZ = Math.floor(pz);\n\n\tconst maxX = Math.ceil(px);\n\tconst maxY = Math.ceil(py);\n\tconst maxZ = Math.ceil(pz);\n\n\t// Get the UVW coordinates relative to the min and max pixels.\n\tconst su = px - minX;\n\tconst sv = py - minY;\n\tconst sw = pz - minZ;\n\n\tif(minX === px && minY === py && minZ === pz) {\n\n\t\tsample(data, size, px, py, pz, color);\n\n\t} else {\n\n\t\tlet vertices;\n\n\t\tif(su >= sv && sv >= sw) {\n\n\t\t\tvertices = T[0];\n\n\t\t} else if(su >= sw && sw >= sv) {\n\n\t\t\tvertices = T[1];\n\n\t\t} else if(sw >= su && su >= sv) {\n\n\t\t\tvertices = T[2];\n\n\t\t} else if(sv >= su && su >= sw) {\n\n\t\t\tvertices = T[3];\n\n\t\t} else if(sv >= sw && sw >= su) {\n\n\t\t\tvertices = T[4];\n\n\t\t} else if(sw >= sv && sv >= su) {\n\n\t\t\tvertices = T[5];\n\n\t\t}\n\n\t\tconst [P0, P1, P2, P3] = vertices;\n\n\t\tconst coords = P[0];\n\t\tcoords[0] = su; coords[1] = sv; coords[2] = sw;\n\n\t\tconst tmp = P[1];\n\t\tconst diffX = maxX - minX;\n\t\tconst diffY = maxY - minY;\n\t\tconst diffZ = maxZ - minZ;\n\n\t\ttmp[0] = diffX * P0[0] + minX;\n\t\ttmp[1] = diffY * P0[1] + minY;\n\t\ttmp[2] = diffZ * P0[2] + minZ;\n\t\tsample(data, size, tmp[0], tmp[1], tmp[2], C[0]);\n\n\t\ttmp[0] = diffX * P1[0] + minX;\n\t\ttmp[1] = diffY * P1[1] + minY;\n\t\ttmp[2] = diffZ * P1[2] + minZ;\n\t\tsample(data, size, tmp[0], tmp[1], tmp[2], C[1]);\n\n\t\ttmp[0] = diffX * P2[0] + minX;\n\t\ttmp[1] = diffY * P2[1] + minY;\n\t\ttmp[2] = diffZ * P2[2] + minZ;\n\t\tsample(data, size, tmp[0], tmp[1], tmp[2], C[2]);\n\n\t\ttmp[0] = diffX * P3[0] + minX;\n\t\ttmp[1] = diffY * P3[1] + minY;\n\t\ttmp[2] = diffZ * P3[2] + minZ;\n\t\tsample(data, size, tmp[0], tmp[1], tmp[2], C[3]);\n\n\t\tconst V0 = calculateTetrahedronVolume(P1, P2, P3, coords) * 6.0;\n\t\tconst V1 = calculateTetrahedronVolume(P0, P2, P3, coords) * 6.0;\n\t\tconst V2 = calculateTetrahedronVolume(P0, P1, P3, coords) * 6.0;\n\t\tconst V3 = calculateTetrahedronVolume(P0, P1, P2, coords) * 6.0;\n\n\t\tC[0][0] *= V0; C[0][1] *= V0; C[0][2] *= V0;\n\t\tC[1][0] *= V1; C[1][1] *= V1; C[1][2] *= V1;\n\t\tC[2][0] *= V2; C[2][1] *= V2; C[2][2] *= V2;\n\t\tC[3][0] *= V3; C[3][1] *= V3; C[3][2] *= V3;\n\n\t\tcolor[0] = C[0][0] + C[1][0] + C[2][0] + C[3][0];\n\t\tcolor[1] = C[0][1] + C[1][1] + C[2][1] + C[3][1];\n\t\tcolor[2] = C[0][2] + C[1][2] + C[2][2] + C[3][2];\n\n\t}\n\n}\n\n/**\n * A tetrahedral upscaler that can be used to augment 3D LUTs.\n *\n * Based on an implementation by Garrett Johnson:\n * https://github.com/gkjohnson/threejs-sandbox/blob/master/3d-lut/src/TetrahedralUpscaler.js\n */\n\nexport class TetrahedralUpscaler {\n\n\t/**\n\t * Expands the given data to the target size.\n\t *\n\t * @param {TypedArray} data - The input RGBA data. Assumed to be cubic.\n\t * @param {Number} size - The target size.\n\t * @return {TypedArray} The new data.\n\t */\n\n\tstatic expand(data, size) {\n\n\t\tconst originalSize = Math.cbrt(data.length / 4);\n\n\t\tconst rgb = new Float32Array(3);\n\t\tconst array = new data.constructor(size ** 3 * 4);\n\t\tconst maxValue = (data instanceof Uint8Array) ? 255 : 1.0;\n\t\tconst sizeSq = size ** 2;\n\t\tconst s = 1.0 / (size - 1.0);\n\n\t\tfor(let z = 0; z < size; ++z) {\n\n\t\t\tfor(let y = 0; y < size; ++y) {\n\n\t\t\t\tfor(let x = 0; x < size; ++x) {\n\n\t\t\t\t\tconst u = x * s;\n\t\t\t\t\tconst v = y * s;\n\t\t\t\t\tconst w = z * s;\n\t\t\t\t\tconst i4 = Math.round(x + y * size + z * sizeSq) * 4;\n\n\t\t\t\t\ttetrahedralSample(data, originalSize, u, v, w, rgb);\n\n\t\t\t\t\tarray[i4 + 0] = rgb[0];\n\t\t\t\t\tarray[i4 + 1] = rgb[1];\n\t\t\t\t\tarray[i4 + 2] = rgb[2];\n\t\t\t\t\tarray[i4 + 3] = maxValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn array;\n\n\t}\n\n}\n", "import { RawImageData } from \"../RawImageData\";\n\n/**\n * An 2D area, described by lower and upper bounds.\n *\n * @type {Float32Array[]}\n * @private\n */\n\nconst area = [\n\tnew Float32Array(2),\n\tnew Float32Array(2)\n];\n\n/**\n * The orthogonal texture size.\n *\n * @type {Number}\n * @private\n */\n\nconst ORTHOGONAL_SIZE = 16;\n\n/**\n * The diagonal texture size.\n *\n * @type {Number}\n * @private\n */\n\nconst DIAGONAL_SIZE = 20;\n\n/**\n * The number of samples for calculating areas in the diagonal textures.\n * Diagonal areas are calculated using brute force sampling.\n *\n * @type {Number}\n * @private\n */\n\nconst DIAGONAL_SAMPLES = 30;\n\n/**\n * The maximum distance for smoothing U-shapes.\n *\n * @type {Number}\n * @private\n */\n\nconst SMOOTH_MAX_DISTANCE = 32;\n\n/**\n * Subsampling offsets for orthogonal areas.\n *\n * @type {Float32Array}\n * @private\n */\n\nconst orthogonalSubsamplingOffsets = new Float32Array([\n\t0.0, -0.25, 0.25, -0.125, 0.125, -0.375, 0.375\n]);\n\n/**\n * Subsampling offset pairs for diagonal areas.\n *\n * @type {Float32Array[]}\n * @private\n */\n\nconst diagonalSubsamplingOffsets = [\n\n\tnew Float32Array([0.0, 0.0]),\n\tnew Float32Array([0.25, -0.25]),\n\tnew Float32Array([-0.25, 0.25]),\n\tnew Float32Array([0.125, -0.125]),\n\tnew Float32Array([-0.125, 0.125])\n\n];\n\n/**\n * Orthogonal pattern positioning coordinates.\n *\n * Used for placing each pattern subtexture into a specific spot.\n *\n * @type {Uint8Array[]}\n * @private\n */\n\nconst orthogonalEdges = [\n\n\tnew Uint8Array([0, 0]),\n\tnew Uint8Array([3, 0]),\n\tnew Uint8Array([0, 3]),\n\tnew Uint8Array([3, 3]),\n\n\tnew Uint8Array([1, 0]),\n\tnew Uint8Array([4, 0]),\n\tnew Uint8Array([1, 3]),\n\tnew Uint8Array([4, 3]),\n\n\tnew Uint8Array([0, 1]),\n\tnew Uint8Array([3, 1]),\n\tnew Uint8Array([0, 4]),\n\tnew Uint8Array([3, 4]),\n\n\tnew Uint8Array([1, 1]),\n\tnew Uint8Array([4, 1]),\n\tnew Uint8Array([1, 4]),\n\tnew Uint8Array([4, 4])\n\n];\n\n/**\n * Diagonal pattern positioning coordinates.\n *\n * Used for placing each pattern subtexture into a specific spot.\n *\n * @type {Uint8Array[]}\n * @private\n */\n\nconst diagonalEdges = [\n\n\tnew Uint8Array([0, 0]),\n\tnew Uint8Array([1, 0]),\n\tnew Uint8Array([0, 2]),\n\tnew Uint8Array([1, 2]),\n\n\tnew Uint8Array([2, 0]),\n\tnew Uint8Array([3, 0]),\n\tnew Uint8Array([2, 2]),\n\tnew Uint8Array([3, 2]),\n\n\tnew Uint8Array([0, 1]),\n\tnew Uint8Array([1, 1]),\n\tnew Uint8Array([0, 3]),\n\tnew Uint8Array([1, 3]),\n\n\tnew Uint8Array([2, 1]),\n\tnew Uint8Array([3, 1]),\n\tnew Uint8Array([2, 3]),\n\tnew Uint8Array([3, 3])\n\n];\n\n/**\n * Linearly interpolates between two values.\n *\n * @private\n * @param {Number} a - The initial value.\n * @param {Number} b - The target value.\n * @param {Number} p - The interpolation value.\n * @return {Number} The interpolated value.\n */\n\nfunction lerp(a, b, p) {\n\n\treturn a + (b - a) * p;\n\n}\n\n/**\n * Clamps a value to the range [0, 1].\n *\n * @private\n * @param {Number} a - The value.\n * @return {Number} The saturated value.\n */\n\nfunction saturate(a) {\n\n\treturn Math.min(Math.max(a, 0.0), 1.0);\n\n}\n\n/**\n * A smoothing function for small U-patterns.\n *\n * @private\n * @param {Number} d - A smoothing factor.\n */\n\nfunction smoothArea(d) {\n\n\tconst a1 = area[0];\n\tconst a2 = area[1];\n\n\tconst b1X = Math.sqrt(a1[0] * 2.0) * 0.5;\n\tconst b1Y = Math.sqrt(a1[1] * 2.0) * 0.5;\n\tconst b2X = Math.sqrt(a2[0] * 2.0) * 0.5;\n\tconst b2Y = Math.sqrt(a2[1] * 2.0) * 0.5;\n\n\tconst p = saturate(d / SMOOTH_MAX_DISTANCE);\n\n\ta1[0] = lerp(b1X, a1[0], p);\n\ta1[1] = lerp(b1Y, a1[1], p);\n\ta2[0] = lerp(b2X, a2[0], p);\n\ta2[1] = lerp(b2Y, a2[1], p);\n\n}\n\n/**\n * Calculates the orthogonal area under the line p1 -> p2 for the pixels (x, x + 1).\n *\n * @private\n * @param {Number} p1X - The starting point of the line, X-component.\n * @param {Number} p1Y - The starting point of the line, Y-component.\n * @param {Number} p2X - The ending point of the line, X-component.\n * @param {Number} p2Y - The ending point of the line, Y-component.\n * @param {Number} x - The pixel index.\n * @param {Float32Array} result - A target tupel to store the area in.\n * @return {Float32Array} The area.\n */\n\nfunction getOrthArea(p1X, p1Y, p2X, p2Y, x, result) {\n\n\tconst dX = p2X - p1X;\n\tconst dY = p2Y - p1Y;\n\n\tconst x1 = x;\n\tconst x2 = x + 1.0;\n\n\tconst y1 = p1Y + dY * (x1 - p1X) / dX;\n\tconst y2 = p1Y + dY * (x2 - p1X) / dX;\n\n\t// Check if x is inside the area.\n\tif((x1 >= p1X && x1 < p2X) || (x2 > p1X && x2 <= p2X)) {\n\n\t\t// Check if this is a trapezoid.\n\t\tif(Math.sign(y1) === Math.sign(y2) || Math.abs(y1) < 1e-4 || Math.abs(y2) < 1e-4) {\n\n\t\t\tconst a = (y1 + y2) / 2.0;\n\n\t\t\tif(a < 0.0) {\n\n\t\t\t\tresult[0] = Math.abs(a);\n\t\t\t\tresult[1] = 0.0;\n\n\t\t\t} else {\n\n\t\t\t\tresult[0] = 0.0;\n\t\t\t\tresult[1] = Math.abs(a);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Two triangles.\n\t\t\tconst t = -p1Y * dX / dY + p1X;\n\t\t\tconst tInt = Math.trunc(t);\n\n\t\t\tconst a1 = (t > p1X) ? y1 * (t - tInt) / 2.0 : 0.0;\n\t\t\tconst a2 = (t < p2X) ? y2 * (1.0 - (t - tInt)) / 2.0 : 0.0;\n\n\t\t\tconst a = (Math.abs(a1) > Math.abs(a2)) ? a1 : -a2;\n\n\t\t\tif(a < 0.0) {\n\n\t\t\t\tresult[0] = Math.abs(a1);\n\t\t\t\tresult[1] = Math.abs(a2);\n\n\t\t\t} else {\n\n\t\t\t\tresult[0] = Math.abs(a2);\n\t\t\t\tresult[1] = Math.abs(a1);\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\tresult[0] = 0.0;\n\t\tresult[1] = 0.0;\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * Calculates the area for a given pattern and distances to the left and to the\n * right, biased by an offset.\n *\n * @private\n * @param {Number} pattern - A pattern index.\n * @param {Number} left - The left distance.\n * @param {Number} right - The right distance.\n * @param {Number} offset - An offset.\n * @param {Float32Array} result - A target tupel to store the area in.\n * @return {Float32Array} The orthogonal area.\n */\n\nfunction getOrthAreaForPattern(pattern, left, right, offset, result) {\n\n\tconst a1 = area[0];\n\tconst a2 = area[1];\n\n\t/* o1           |\n\t *      .-------\u00B4\n\t * o2   |\n\t *\n\t *      <---d--->\n\t */\n\n\tconst o1 = 0.5 + offset;\n\tconst o2 = 0.5 + offset - 1.0;\n\tconst d = left + right + 1;\n\n\tswitch(pattern) {\n\n\t\tcase 0: {\n\n\t\t\t//    ------\n\n\t\t\tresult[0] = 0.0;\n\t\t\tresult[1] = 0.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 1: {\n\n\t\t\t/*   .------\n\t\t\t *   |\n\t\t\t *\n\t\t\t * The offset is only applied to L patterns in the crossing edge side to make it converge with\n\t\t\t * the unfiltered pattern 0. The pattern 0 must not be filtered to avoid artifacts.\n\t\t\t */\n\n\t\t\tif(left <= right) {\n\n\t\t\t\tgetOrthArea(0.0, o2, d / 2.0, 0.0, left, result);\n\n\t\t\t} else {\n\n\t\t\t\tresult[0] = 0.0;\n\t\t\t\tresult[1] = 0.0;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 2: {\n\n\t\t\t/*    ------.\n\t\t\t *          |\n\t\t\t */\n\n\t\t\tif(left >= right) {\n\n\t\t\t\tgetOrthArea(d / 2.0, 0.0, d, o2, left, result);\n\n\t\t\t} else {\n\n\t\t\t\tresult[0] = 0.0;\n\t\t\t\tresult[1] = 0.0;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 3: {\n\n\t\t\t/*   .------.\n\t\t\t *   |      |\n\t\t\t */\n\n\t\t\tgetOrthArea(0.0, o2, d / 2.0, 0.0, left, a1);\n\t\t\tgetOrthArea(d / 2.0, 0.0, d, o2, left, a2);\n\n\t\t\tsmoothArea(d, area);\n\n\t\t\tresult[0] = a1[0] + a2[0];\n\t\t\tresult[1] = a1[1] + a2[1];\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 4: {\n\n\t\t\t/*   |\n\t\t\t *   `------\n\t\t\t */\n\n\t\t\tif(left <= right) {\n\n\t\t\t\tgetOrthArea(0.0, o1, d / 2.0, 0.0, left, result);\n\n\t\t\t} else {\n\n\t\t\t\tresult[0] = 0.0;\n\t\t\t\tresult[1] = 0.0;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 5: {\n\n\t\t\t/*   |\n\t\t\t *   +------\n\t\t\t *   |\n\t\t\t */\n\n\t\t\tresult[0] = 0.0;\n\t\t\tresult[1] = 0.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 6: {\n\n\t\t\t/*   |\n\t\t\t *   `------.\n\t\t\t *          |\n\t\t\t *\n\t\t\t * A problem of not offseting L patterns (see above) is that for certain max search distances,\n\t\t\t * the pixels in the center of a Z pattern will detect the full Z pattern, while the pixels in\n\t\t\t * the sides will detect an L pattern. To avoid discontinuities, the full offsetted Z\n\t\t\t * revectorization is blended with partially offsetted L patterns.\n\t\t\t */\n\n\t\t\tif(Math.abs(offset) > 0.0) {\n\n\t\t\t\tgetOrthArea(0.0, o1, d, o2, left, a1);\n\t\t\t\tgetOrthArea(0.0, o1, d / 2.0, 0.0, left, a2);\n\t\t\t\tgetOrthArea(d / 2.0, 0.0, d, o2, left, result);\n\n\t\t\t\ta2[0] = a2[0] + result[0];\n\t\t\t\ta2[1] = a2[1] + result[1];\n\n\t\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\t} else {\n\n\t\t\t\tgetOrthArea(0.0, o1, d, o2, left, result);\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 7: {\n\n\t\t\t/*   |\n\t\t\t *   +------.\n\t\t\t *   |      |\n\t\t\t */\n\n\t\t\tgetOrthArea(0.0, o1, d, o2, left, result);\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 8: {\n\n\t\t\t/*          |\n\t\t\t *    ------\u00B4\n\t\t\t */\n\n\t\t\tif(left >= right) {\n\n\t\t\t\tgetOrthArea(d / 2.0, 0.0, d, o1, left, result);\n\n\t\t\t} else {\n\n\t\t\t\tresult[0] = 0.0;\n\t\t\t\tresult[1] = 0.0;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 9: {\n\n\t\t\t/*          |\n\t\t\t *   .------\u00B4\n\t\t\t *   |\n\t\t\t */\n\n\t\t\tif(Math.abs(offset) > 0.0) {\n\n\t\t\t\tgetOrthArea(0.0, o2, d, o1, left, a1);\n\t\t\t\tgetOrthArea(0.0, o2, d / 2.0, 0.0, left, a2);\n\t\t\t\tgetOrthArea(d / 2.0, 0.0, d, o1, left, result);\n\n\t\t\t\ta2[0] = a2[0] + result[0];\n\t\t\t\ta2[1] = a2[1] + result[1];\n\n\t\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\t} else {\n\n\t\t\t\tgetOrthArea(0.0, o2, d, o1, left, result);\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 10: {\n\n\t\t\t/*          |\n\t\t\t *    ------+\n\t\t\t *          |\n\t\t\t */\n\n\t\t\tresult[0] = 0.0;\n\t\t\tresult[1] = 0.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 11: {\n\n\t\t\t/*          |\n\t\t\t *   .------+\n\t\t\t *   |      |\n\t\t\t */\n\n\t\t\tgetOrthArea(0.0, o2, d, o1, left, result);\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 12: {\n\n\t\t\t/*   |      |\n\t\t\t *   `------\u00B4\n\t\t\t */\n\n\t\t\tgetOrthArea(0.0, o1, d / 2.0, 0.0, left, a1);\n\t\t\tgetOrthArea(d / 2.0, 0.0, d, o1, left, a2);\n\n\t\t\tsmoothArea(d, area);\n\n\t\t\tresult[0] = a1[0] + a2[0];\n\t\t\tresult[1] = a1[1] + a2[1];\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 13: {\n\n\t\t\t/*   |      |\n\t\t\t *   +------\u00B4\n\t\t\t *   |\n\t\t\t */\n\n\t\t\tgetOrthArea(0.0, o2, d, o1, left, result);\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 14: {\n\n\t\t\t/*   |      |\n\t\t\t *   `------+\n\t\t\t *          |\n\t\t\t */\n\n\t\t\tgetOrthArea(0.0, o1, d, o2, left, result);\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 15: {\n\n\t\t\t/*   |      |\n\t\t\t *   +------+\n\t\t\t *   |      |\n\t\t\t */\n\n\t\t\tresult[0] = 0.0;\n\t\t\tresult[1] = 0.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * Determines whether the given pixel is inside the specified area.\n *\n * @private\n * @param {Number} a1X - The lower bounds of the area, X-component.\n * @param {Number} a1Y - The lower bounds of the area, Y-component.\n * @param {Number} a2X - The upper bounds of the area, X-component.\n * @param {Number} a2Y - The upper bounds of the area, Y-component.\n * @param {Number} x - The X-coordinate.\n * @param {Number} y - The Y-coordinate.\n * @return {Boolean} Whether the pixel lies inside the area.\n */\n\nfunction isInsideArea(a1X, a1Y, a2X, a2Y, x, y) {\n\n\tlet result = (a1X === a2X && a1Y === a2Y);\n\n\tif(!result) {\n\n\t\tconst xm = (a1X + a2X) / 2.0;\n\t\tconst ym = (a1Y + a2Y) / 2.0;\n\n\t\tconst a = a2Y - a1Y;\n\t\tconst b = a1X - a2X;\n\n\t\tconst c = a * (x - xm) + b * (y - ym);\n\n\t\tresult = (c > 0.0);\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * Calculates the diagonal area under the line p1 -> p2 for the pixel p using brute force sampling.\n *\n * @private\n * @param {Number} a1X - The lower bounds of the area, X-component.\n * @param {Number} a1Y - The lower bounds of the area, Y-component.\n * @param {Number} a2X - The upper bounds of the area, X-component.\n * @param {Number} a2Y - The upper bounds of the area, Y-component.\n * @param {Number} pX - The X-coordinate.\n * @param {Number} pY - The Y-coordinate.\n * @return {Number} The amount of pixels inside the area relative to the total amount of sampled pixels.\n */\n\nfunction getDiagAreaForPixel(a1X, a1Y, a2X, a2Y, pX, pY) {\n\n\tlet n = 0;\n\n\tfor(let y = 0; y < DIAGONAL_SAMPLES; ++y) {\n\n\t\tfor(let x = 0; x < DIAGONAL_SAMPLES; ++x) {\n\n\t\t\tconst offsetX = x / (DIAGONAL_SAMPLES - 1.0);\n\t\t\tconst offsetY = y / (DIAGONAL_SAMPLES - 1.0);\n\n\t\t\tif(isInsideArea(a1X, a1Y, a2X, a2Y, pX + offsetX, pY + offsetY)) {\n\n\t\t\t\t++n;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn n / (DIAGONAL_SAMPLES * DIAGONAL_SAMPLES);\n\n}\n\n/**\n * Calculates the area under the line p1 -> p2. This includes the pixel and its opposite.\n *\n * @private\n * @param {Number} pattern - A pattern index.\n * @param {Number} a1X - The lower bounds of the area, X-component.\n * @param {Number} a1Y - The lower bounds of the area, Y-component.\n * @param {Number} a2X - The upper bounds of the area, X-component.\n * @param {Number} a2Y - The upper bounds of the area, Y-component.\n * @param {Number} left - The left distance.\n * @param {Float32Array} offset - An offset.\n * @param {Float32Array} result - A target tupel to store the area in.\n * @return {Float32Array} The area.\n */\n\nfunction getDiagArea(pattern, a1X, a1Y, a2X, a2Y, left, offset, result) {\n\n\tconst e = diagonalEdges[pattern];\n\tconst e1 = e[0];\n\tconst e2 = e[1];\n\n\tif(e1 > 0) {\n\n\t\ta1X += offset[0];\n\t\ta1Y += offset[1];\n\n\t}\n\n\tif(e2 > 0) {\n\n\t\ta2X += offset[0];\n\t\ta2Y += offset[1];\n\n\t}\n\n\tresult[0] = 1.0 - getDiagAreaForPixel(a1X, a1Y, a2X, a2Y, 1.0 + left, 0.0 + left);\n\tresult[1] = getDiagAreaForPixel(a1X, a1Y, a2X, a2Y, 1.0 + left, 1.0 + left);\n\n\treturn result;\n\n}\n\n/**\n * Calculates the area for a given pattern and distances to the left and right, biased by an offset.\n *\n * @private\n * @param {Number} pattern - A pattern index.\n * @param {Number} left - The left distance.\n * @param {Number} right - The right distance.\n * @param {Float32Array} offset - An offset.\n * @param {Float32Array} result - A target tupel to store the area in.\n * @return {Float32Array} The orthogonal area.\n */\n\nfunction getDiagAreaForPattern(pattern, left, right, offset, result) {\n\n\tconst a1 = area[0];\n\tconst a2 = area[1];\n\n\tconst d = left + right + 1;\n\n\t/* There is some Black Magic involved in the diagonal area calculations.\n\t *\n\t * Unlike orthogonal patterns, the \"null\" pattern (one without crossing edges) must be filtered, and the ends of both\n\t * the \"null\" and L patterns are not known: L and U patterns have different endings, and the adjacent pattern is\n\t * unknown. Therefore, a blend of both possibilities is computed.\n\t */\n\n\tswitch(pattern) {\n\n\t\tcase 0: {\n\n\t\t\t/*         .-\u00B4\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t *   .-\u00B4\n\t\t\t *   \u00B4\n\t\t\t */\n\n\t\t\t// First possibility.\n\t\t\tgetDiagArea(pattern, 1.0, 1.0, 1.0 + d, 1.0 + d, left, offset, a1);\n\n\t\t\t// Second possibility.\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 0.0 + d, left, offset, a2);\n\n\t\t\t// Blend both possibilities together.\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 1: {\n\n\t\t\t/*         .-\u00B4\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t *   .-\u00B4\n\t\t\t *   |\n\t\t\t *   |\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 0.0 + d, 0.0 + d, left, offset, a1);\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 0.0 + d, left, offset, a2);\n\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 2: {\n\n\t\t\t/*         .----\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t *   .-\u00B4\n\t\t\t *   \u00B4\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 0.0, 0.0, 1.0 + d, 0.0 + d, left, offset, a1);\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 0.0 + d, left, offset, a2);\n\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 3: {\n\n\t\t\t/*\n\t\t\t *         .----\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t *   .-\u00B4\n\t\t\t *   |\n\t\t\t *   |\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 0.0 + d, left, offset, result);\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 4: {\n\n\t\t\t/*         .-\u00B4\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t * ----\u00B4\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 1.0, 0.0 + d, 0.0 + d, left, offset, a1);\n\t\t\tgetDiagArea(pattern, 1.0, 1.0, 1.0 + d, 0.0 + d, left, offset, a2);\n\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 5: {\n\n\t\t\t/*         .-\u00B4\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t * --.-\u00B4\n\t\t\t *   |\n\t\t\t *   |\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 1.0, 0.0 + d, 0.0 + d, left, offset, a1);\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 0.0 + d, left, offset, a2);\n\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 6: {\n\n\t\t\t/*         .----\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t * ----\u00B4\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 1.0, 1.0 + d, 0.0 + d, left, offset, result);\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 7: {\n\n\t\t\t/*         .----\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t * --.-\u00B4\n\t\t\t *   |\n\t\t\t *   |\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 1.0, 1.0 + d, 0.0 + d, left, offset, a1);\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 0.0 + d, left, offset, a2);\n\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 8: {\n\n\t\t\t/*         |\n\t\t\t *         |\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t *   .-\u00B4\n\t\t\t *   \u00B4\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 0.0, 0.0, 1.0 + d, 1.0 + d, left, offset, a1);\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 1.0 + d, left, offset, a2);\n\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 9: {\n\n\t\t\t/*         |\n\t\t\t *         |\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t *   .-\u00B4\n\t\t\t *   |\n\t\t\t *   |\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 1.0 + d, left, offset, result);\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 1.0 + d, left, offset, result);\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 10: {\n\n\t\t\t/*         |\n\t\t\t *         .----\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t *   .-\u00B4\n\t\t\t *   \u00B4\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 0.0, 0.0, 1.0 + d, 1.0 + d, left, offset, a1);\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 0.0 + d, left, offset, a2);\n\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 11: {\n\n\t\t\t/*         |\n\t\t\t *         .----\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t *   .-\u00B4\n\t\t\t *   |\n\t\t\t *   |\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 1.0 + d, left, offset, a1);\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 0.0 + d, left, offset, a2);\n\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 12: {\n\n\t\t\t/*         |\n\t\t\t *         |\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t * ----\u00B4\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 1.0, 1.0 + d, 1.0 + d, left, offset, result);\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 13: {\n\n\t\t\t/*         |\n\t\t\t *         |\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t * --.-\u00B4\n\t\t\t *   |\n\t\t\t *   |\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 1.0, 1.0 + d, 1.0 + d, left, offset, a1);\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 1.0 + d, left, offset, a2);\n\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 14: {\n\n\t\t\t/*         |\n\t\t\t *         .----\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t * ----\u00B4\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 1.0, 1.0 + d, 1.0 + d, left, offset, a1);\n\t\t\tgetDiagArea(pattern, 1.0, 1.0, 1.0 + d, 0.0 + d, left, offset, a2);\n\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tcase 15: {\n\n\t\t\t/*         |\n\t\t\t *         .----\n\t\t\t *       .-\u00B4\n\t\t\t *     .-\u00B4\n\t\t\t * --.-\u00B4\n\t\t\t *   |\n\t\t\t *   |\n\t\t\t */\n\n\t\t\tgetDiagArea(pattern, 1.0, 1.0, 1.0 + d, 1.0 + d, left, offset, a1);\n\t\t\tgetDiagArea(pattern, 1.0, 0.0, 1.0 + d, 0.0 + d, left, offset, a2);\n\n\t\t\tresult[0] = (a1[0] + a2[0]) / 2.0;\n\t\t\tresult[1] = (a1[1] + a2[1]) / 2.0;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * Calculates orthogonal or diagonal patterns for a given offset.\n *\n * @private\n * @param {RawImageData[]} patterns - The patterns to assemble.\n * @param {Number|Float32Array} offset - A pattern offset. Diagonal offsets are pairs.\n * @param {Boolean} orthogonal - Whether the patterns are orthogonal or diagonal.\n */\n\nfunction generatePatterns(patterns, offset, orthogonal) {\n\n\tconst result = new Float32Array(2);\n\n\tfor(let i = 0, l = patterns.length; i < l; ++i) {\n\n\t\tconst pattern = patterns[i];\n\t\tconst data = pattern.data;\n\t\tconst size = pattern.width;\n\n\t\tfor(let y = 0; y < size; ++y) {\n\n\t\t\tfor(let x = 0; x < size; ++x) {\n\n\t\t\t\tif(orthogonal) {\n\n\t\t\t\t\tgetOrthAreaForPattern(i, x, y, offset, result);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgetDiagAreaForPattern(i, x, y, offset, result);\n\n\t\t\t\t}\n\n\t\t\t\tconst c = (y * size + x) * 2;\n\t\t\t\tdata[c] = result[0] * 255;\n\t\t\t\tdata[c + 1] = result[1] * 255;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Assembles orthogonal or diagonal patterns into the final area image.\n *\n * @private\n * @param {Number} baseX - The base X-position.\n * @param {Number} baseY - The base Y-position.\n * @param {RawImageData[]} patterns - The patterns to assemble.\n * @param {Uint8Array[]} edges - Edge coordinate pairs, used for positioning.\n * @param {Number} size - The pattern size.\n * @param {Boolean} orthogonal - Whether the patterns are orthogonal or diagonal.\n * @param {RawImageData} target - The target image data.\n */\n\nfunction assemble(baseX, baseY, patterns, edges, size, orthogonal, target) {\n\n\tconst dstData = target.data;\n\tconst dstWidth = target.width;\n\n\tfor(let i = 0, l = patterns.length; i < l; ++i) {\n\n\t\tconst edge = edges[i];\n\t\tconst pattern = patterns[i];\n\n\t\tconst srcData = pattern.data;\n\t\tconst srcWidth = pattern.width;\n\n\t\tfor(let y = 0; y < size; ++y) {\n\n\t\t\tfor(let x = 0; x < size; ++x) {\n\n\t\t\t\tconst pX = edge[0] * size + baseX + x;\n\t\t\t\tconst pY = edge[1] * size + baseY + y;\n\n\t\t\t\tconst c = (pY * dstWidth + pX) * 4;\n\n\t\t\t\t// The texture coords of orthogonal patterns are compressed quadratically to reach longer distances.\n\t\t\t\tconst d = orthogonal ? ((y * y * srcWidth + x * x) * 2) : ((y * srcWidth + x) * 2);\n\n\t\t\t\tdstData[c] = srcData[d];\n\t\t\t\tdstData[c + 1] = srcData[d + 1];\n\t\t\t\tdstData[c + 2] = 0;\n\t\t\t\tdstData[c + 3] = 255;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * SMAA area image data.\n *\n * This texture allows to obtain the area for a certain pattern and distances to the left and right of identified lines.\n *\n * Based on the official python scripts:\n *  https://github.com/iryoku/smaa/tree/master/Scripts\n */\n\nexport class SMAAAreaImageData {\n\n\t/**\n\t * Creates a new area image.\n\t *\n\t * @return {RawImageData} The generated image data.\n\t */\n\n\tstatic generate() {\n\n\t\tconst width = 2 * 5 * ORTHOGONAL_SIZE;\n\t\tconst height = orthogonalSubsamplingOffsets.length * 5 * ORTHOGONAL_SIZE;\n\n\t\tconst data = new Uint8ClampedArray(width * height * 4);\n\t\tconst result = new RawImageData(width, height, data);\n\n\t\tconst orthPatternSize = Math.pow(ORTHOGONAL_SIZE - 1, 2) + 1;\n\t\tconst diagPatternSize = DIAGONAL_SIZE;\n\n\t\tconst orthogonalPatterns = [];\n\t\tconst diagonalPatterns = [];\n\n\t\tfor(let i = 3, l = data.length; i < l; i += 4) {\n\n\t\t\tdata[i] = 255;\n\n\t\t}\n\n\t\t// Prepare 16 image data sets for the orthogonal and diagonal subtextures.\n\t\tfor(let i = 0; i < 16; ++i) {\n\n\t\t\torthogonalPatterns.push(new RawImageData(\n\t\t\t\torthPatternSize, orthPatternSize,\n\t\t\t\tnew Uint8ClampedArray(orthPatternSize * orthPatternSize * 2),\n\t\t\t\t2\n\t\t\t));\n\n\t\t\tdiagonalPatterns.push(new RawImageData(\n\t\t\t\tdiagPatternSize, diagPatternSize,\n\t\t\t\tnew Uint8ClampedArray(diagPatternSize * diagPatternSize * 2),\n\t\t\t\t2\n\t\t\t));\n\n\t\t}\n\n\t\tfor(let i = 0, l = orthogonalSubsamplingOffsets.length; i < l; ++i) {\n\n\t\t\t// Generate 16 orthogonal patterns for each offset.\n\t\t\tgeneratePatterns(orthogonalPatterns, orthogonalSubsamplingOffsets[i], true);\n\n\t\t\t// Assemble the orthogonal patterns and place them on the left side.\n\t\t\tassemble(\n\t\t\t\t0,\n\t\t\t\t5 * ORTHOGONAL_SIZE * i,\n\t\t\t\torthogonalPatterns,\n\t\t\t\torthogonalEdges,\n\t\t\t\tORTHOGONAL_SIZE,\n\t\t\t\ttrue,\n\t\t\t\tresult\n\t\t\t);\n\n\t\t}\n\n\t\tfor(let i = 0, l = diagonalSubsamplingOffsets.length; i < l; ++i) {\n\n\t\t\t// Generate 16 diagonal patterns for each offset.\n\t\t\tgeneratePatterns(diagonalPatterns, diagonalSubsamplingOffsets[i], false);\n\n\t\t\t// Assemble the diagonal patterns and place them on the right side.\n\t\t\tassemble(\n\t\t\t\t5 * ORTHOGONAL_SIZE,\n\t\t\t\t4 * DIAGONAL_SIZE * i,\n\t\t\t\tdiagonalPatterns,\n\t\t\t\tdiagonalEdges,\n\t\t\t\tDIAGONAL_SIZE,\n\t\t\t\tfalse,\n\t\t\t\tresult\n\t\t\t);\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n", "import { LoadingManager } from \"three\";\nimport { RawImageData } from \"../RawImageData\";\nimport workerProgram from \"../../../tmp/smaa/worker.txt\";\n\n/**\n * Generates the SMAA data images.\n *\n * @private\n * @param {Boolean} [useCache=true] - Determines whether the generated image data should be cached.\n * @return {Promise} A promise that returns the search image and area image as a data URL pair.\n */\n\nfunction generate(useCache = true) {\n\n\tconst workerURL = URL.createObjectURL(new Blob([workerProgram], {\n\t\ttype: \"text/javascript\"\n\t}));\n\n\tconst worker = new Worker(workerURL);\n\tURL.revokeObjectURL(workerURL);\n\n\treturn new Promise((resolve, reject) => {\n\n\t\tworker.addEventListener(\"error\", (event) => reject(event.error));\n\t\tworker.addEventListener(\"message\", (event) => {\n\n\t\t\tconst searchImageData = RawImageData.from(event.data.searchImageData);\n\t\t\tconst areaImageData = RawImageData.from(event.data.areaImageData);\n\n\t\t\tconst urls = [\n\t\t\t\tsearchImageData.toCanvas().toDataURL(\"image/png\", 1.0),\n\t\t\t\tareaImageData.toCanvas().toDataURL(\"image/png\", 1.0)\n\t\t\t];\n\n\t\t\tif(useCache) {\n\n\t\t\t\tlocalStorage.setItem(\"smaa-search\", urls[0]);\n\t\t\t\tlocalStorage.setItem(\"smaa-area\", urls[1]);\n\n\t\t\t}\n\n\t\t\tresolve(urls);\n\n\t\t});\n\n\t\tworker.postMessage(null);\n\n\t});\n\n}\n\n/**\n * An SMAA image generator.\n *\n * This class uses a worker thread to generate the search and area images. The generated data URLs will be cached using\n * localStorage, if available. To disable caching use {@link SMAAImageGenerator.setCacheEnabled}.\n */\n\nexport class SMAAImageGenerator {\n\n\t/**\n\t * Constructs a new SMAA image generator.\n\t */\n\n\tconstructor() {\n\n\t\t/**\n\t\t * Indicates whether data image caching is disabled.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @deprecated Use setCacheEnabled() instead.\n\t\t */\n\n\t\tthis.disableCache = false;\n\n\t}\n\n\t/**\n\t * Enables or disables caching via localStorage.\n\t *\n\t * @param {Boolean} value - Whether the cache should be enabled.\n\t */\n\n\tsetCacheEnabled(value) {\n\n\t\tthis.disableCache = !value;\n\n\t}\n\n\t/**\n\t * Generates the SMAA data images.\n\t *\n\t * @example\n\t * SMAAImageGenerator.generate().then(([search, area]) => {\n\t *   const smaaEffect = new SMAAEffect(search, area);\n\t * });\n\t * @return {Promise<Image[]>} A promise that returns the search image and area image as a pair.\n\t */\n\n\tgenerate() {\n\n\t\tconst useCache = (!this.disableCache && window.localStorage !== undefined);\n\n\t\tconst cachedURLs = useCache ? [\n\t\t\tlocalStorage.getItem(\"smaa-search\"),\n\t\t\tlocalStorage.getItem(\"smaa-area\")\n\t\t] : [null, null];\n\n\t\tconst promise = (cachedURLs[0] !== null && cachedURLs[1] !== null) ?\n\t\t\tPromise.resolve(cachedURLs) : generate(useCache);\n\n\t\treturn promise.then((urls) => {\n\n\t\t\treturn new Promise((resolve, reject) => {\n\n\t\t\t\tconst searchImage = new Image();\n\t\t\t\tconst areaImage = new Image();\n\n\t\t\t\tconst manager = new LoadingManager();\n\t\t\t\tmanager.onLoad = () => resolve([searchImage, areaImage]);\n\t\t\t\tmanager.onError = reject;\n\n\t\t\t\tsearchImage.addEventListener(\"error\", (e) => manager.itemError(\"smaa-search\"));\n\t\t\t\tareaImage.addEventListener(\"error\", (e) => manager.itemError(\"smaa-area\"));\n\t\t\t\tsearchImage.addEventListener(\"load\", () => manager.itemEnd(\"smaa-search\"));\n\t\t\t\tareaImage.addEventListener(\"load\", () => manager.itemEnd(\"smaa-area\"));\n\t\t\t\tmanager.itemStart(\"smaa-search\");\n\t\t\t\tmanager.itemStart(\"smaa-area\");\n\t\t\t\tsearchImage.src = urls[0];\n\t\t\t\tareaImage.src = urls[1];\n\n\t\t\t});\n\n\t\t});\n\n\t}\n\n}\n", "import { RawImageData } from \"../RawImageData\";\n\n/**\n * This dictionary returns which edges are active for a certain bilinear fetch: it's the reverse lookup of the bilinear\n * function.\n *\n * @type {Map<Number, Float32Array>}\n * @private\n */\n\nconst edges = new Map([\n\n\t[bilinear(0, 0, 0, 0), new Float32Array([0, 0, 0, 0])],\n\t[bilinear(0, 0, 0, 1), new Float32Array([0, 0, 0, 1])],\n\t[bilinear(0, 0, 1, 0), new Float32Array([0, 0, 1, 0])],\n\t[bilinear(0, 0, 1, 1), new Float32Array([0, 0, 1, 1])],\n\n\t[bilinear(0, 1, 0, 0), new Float32Array([0, 1, 0, 0])],\n\t[bilinear(0, 1, 0, 1), new Float32Array([0, 1, 0, 1])],\n\t[bilinear(0, 1, 1, 0), new Float32Array([0, 1, 1, 0])],\n\t[bilinear(0, 1, 1, 1), new Float32Array([0, 1, 1, 1])],\n\n\t[bilinear(1, 0, 0, 0), new Float32Array([1, 0, 0, 0])],\n\t[bilinear(1, 0, 0, 1), new Float32Array([1, 0, 0, 1])],\n\t[bilinear(1, 0, 1, 0), new Float32Array([1, 0, 1, 0])],\n\t[bilinear(1, 0, 1, 1), new Float32Array([1, 0, 1, 1])],\n\n\t[bilinear(1, 1, 0, 0), new Float32Array([1, 1, 0, 0])],\n\t[bilinear(1, 1, 0, 1), new Float32Array([1, 1, 0, 1])],\n\t[bilinear(1, 1, 1, 0), new Float32Array([1, 1, 1, 0])],\n\t[bilinear(1, 1, 1, 1), new Float32Array([1, 1, 1, 1])]\n\n]);\n\n/**\n * Linearly interpolates between two values.\n *\n * @private\n * @param {Number} a - The initial value.\n * @param {Number} b - The target value.\n * @param {Number} p - The interpolation value.\n * @return {Number} The interpolated value.\n */\n\nfunction lerp(a, b, p) {\n\n\treturn a + (b - a) * p;\n\n}\n\n/**\n * Calculates the bilinear fetch for a certain edge combination.\n *\n *     e[0]       e[1]\n *\n *              x <-------- Sample Position: (-0.25, -0.125)\n *     e[2]       e[3] <--- Current Pixel [3]: (0.0, 0.0)\n *\n * @private\n * @param {Number} e0 - The edge combination.\n * @param {Number} e1 - The edge combination.\n * @param {Number} e2 - The edge combination.\n * @param {Number} e3 - The edge combination.\n * @return {Number} The interpolated value.\n */\n\nfunction bilinear(e0, e1, e2, e3) {\n\n\tconst a = lerp(e0, e1, 1.0 - 0.25);\n\tconst b = lerp(e2, e3, 1.0 - 0.25);\n\n\treturn lerp(a, b, 1.0 - 0.125);\n\n}\n\n/**\n * Computes the delta distance to add in the last step of searches to the left.\n *\n * @private\n * @param {Float32Array} left - The left edge combination.\n * @param {Float32Array} top - The top edge combination.\n * @return {Number} The left delta distance.\n */\n\nfunction deltaLeft(left, top) {\n\n\tlet d = 0;\n\n\t// If there is an edge, continue.\n\tif(top[3] === 1) {\n\n\t\td += 1;\n\n\t}\n\n\t// If an edge was previously found, there's another edge and no crossing edges, continue.\n\tif(d === 1 && top[2] === 1 && left[1] !== 1 && left[3] !== 1) {\n\n\t\td += 1;\n\n\t}\n\n\treturn d;\n\n}\n\n/**\n * Computes the delta distance to add in the last step of searches to the right.\n *\n * @private\n * @param {Float32Array} left - The left edge combination.\n * @param {Float32Array} top - The top edge combination.\n * @return {Number} The right delta distance.\n */\n\nfunction deltaRight(left, top) {\n\n\tlet d = 0;\n\n\t// If there is an edge, and no crossing edges, continue.\n\tif(top[3] === 1 && left[1] !== 1 && left[3] !== 1) {\n\n\t\td += 1;\n\n\t}\n\n\t// If an edge was previously found, there's another edge and there are no crossing edges.\n\tif(d === 1 && top[2] === 1 && left[0] !== 1 && left[2] !== 1) {\n\n\t\td += 1;\n\n\t}\n\n\treturn d;\n\n}\n\n/**\n * SMAA search image data.\n *\n * This image stores information about how many pixels the line search algorithm must advance in the last step.\n *\n * Based on the official python scripts:\n *  https://github.com/iryoku/smaa/tree/master/Scripts\n */\n\nexport class SMAASearchImageData {\n\n\t/**\n\t * Creates a new search image.\n\t *\n\t * @return {RawImageData} The generated image data.\n\t */\n\n\tstatic generate() {\n\n\t\tconst width = 66;\n\t\tconst height = 33;\n\t\tconst halfWidth = width / 2;\n\n\t\tconst croppedWidth = 64;\n\t\tconst croppedHeight = 16;\n\n\t\tconst data = new Uint8ClampedArray(width * height);\n\t\tconst croppedData = new Uint8ClampedArray(croppedWidth * croppedHeight * 4);\n\n\t\t// Calculate delta distances.\n\t\tfor(let y = 0; y < height; ++y) {\n\n\t\t\tfor(let x = 0; x < width; ++x) {\n\n\t\t\t\tconst s = 0.03125 * x;\n\t\t\t\tconst t = 0.03125 * y;\n\n\t\t\t\tif(edges.has(s) && edges.has(t)) {\n\n\t\t\t\t\tconst e1 = edges.get(s);\n\t\t\t\t\tconst e2 = edges.get(t);\n\n\t\t\t\t\tconst i = y * width + x;\n\n\t\t\t\t\t// Maximize the dynamic range to help the compression.\n\t\t\t\t\tdata[i] = (127 * deltaLeft(e1, e2));\n\t\t\t\t\tdata[i + halfWidth] = (127 * deltaRight(e1, e2));\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Crop the result to powers-of-two to make it BC4-friendly.\n\t\tfor(let i = 0, y = height - croppedHeight; y < height; ++y) {\n\n\t\t\tfor(let x = 0; x < croppedWidth; ++x, i += 4) {\n\n\t\t\t\tcroppedData[i] = data[y * width + x];\n\t\t\t\tcroppedData[i + 3] = 255;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn new RawImageData(croppedWidth, croppedHeight, croppedData);\n\n\t}\n\n}\n", "import { BlendFunction } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/noise.frag\";\n\n/**\n * A noise effect.\n */\n\nexport class NoiseEffect extends Effect {\n\n\t/**\n\t * Constructs a new noise effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function of this effect.\n\t * @param {Boolean} [options.premultiply=false] - Whether the noise should be multiplied with the input colors prior to blending.\n\t */\n\n\tconstructor({ blendFunction = BlendFunction.SCREEN, premultiply = false } = {}) {\n\n\t\tsuper(\"NoiseEffect\", fragmentShader, { blendFunction });\n\t\tthis.premultiply = premultiply;\n\n\t}\n\n\t/**\n\t * Indicates whether noise will be multiplied with the input colors prior to blending.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget premultiply() {\n\n\t\treturn this.defines.has(\"PREMULTIPLY\");\n\n\t}\n\n\tset premultiply(value) {\n\n\t\tif(this.premultiply !== value) {\n\n\t\t\tif(value) {\n\n\t\t\t\tthis.defines.set(\"PREMULTIPLY\", \"1\");\n\n\t\t\t} else {\n\n\t\t\t\tthis.defines.delete(\"PREMULTIPLY\");\n\n\t\t\t}\n\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indicates whether noise will be multiplied with the input colors prior to blending.\n\t *\n\t * @deprecated Use premultiply instead.\n\t * @return {Boolean} Whether noise is premultiplied.\n\t */\n\n\tisPremultiplied() {\n\n\t\treturn this.premultiply;\n\n\t}\n\n\t/**\n\t * Controls whether noise should be multiplied with the input colors prior to blending.\n\t *\n\t * @deprecated Use premultiply instead.\n\t * @param {Boolean} value - Whether noise should be premultiplied.\n\t */\n\n\tsetPremultiplied(value) {\n\n\t\tthis.premultiply = value;\n\n\t}\n\n}\n", "import { Color, RepeatWrapping, Uniform, UnsignedByteType, WebGLRenderTarget } from \"three\";\nimport { Resolution, Selection } from \"../core\";\nimport { BlendFunction, KernelSize } from \"../enums\";\nimport { DepthComparisonMaterial, OutlineMaterial } from \"../materials\";\nimport { KawaseBlurPass, ClearPass, DepthPass, RenderPass, ShaderPass } from \"../passes\";\nimport { getTextureDecoding } from \"../utils/getTextureDecoding\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/outline.frag\";\nimport vertexShader from \"./glsl/outline.vert\";\n\n/**\n * An outline effect.\n */\n\nexport class OutlineEffect extends Effect {\n\n\t/**\n\t * Constructs a new outline effect.\n\t *\n\t * @param {Scene} scene - The main scene.\n\t * @param {Camera} camera - The main camera.\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function. Use `BlendFunction.ALPHA` for dark outlines.\n\t * @param {Number} [options.patternTexture=null] - A pattern texture.\n\t * @param {Number} [options.patternScale=1.0] - The pattern scale.\n\t * @param {Number} [options.edgeStrength=1.0] - The edge strength.\n\t * @param {Number} [options.pulseSpeed=0.0] - The pulse speed. A value of zero disables the pulse effect.\n\t * @param {Number} [options.visibleEdgeColor=0xffffff] - The color of visible edges.\n\t * @param {Number} [options.hiddenEdgeColor=0x22090a] - The color of hidden edges.\n\t * @param {KernelSize} [options.kernelSize=KernelSize.VERY_SMALL] - The blur kernel size.\n\t * @param {Boolean} [options.blur=false] - Whether the outline should be blurred.\n\t * @param {Boolean} [options.xRay=true] - Whether occluded parts of selected objects should be visible.\n\t * @param {Number} [options.resolutionScale=0.5] - The resolution scale.\n\t * @param {Number} [options.resolutionX=Resolution.AUTO_SIZE] - The horizontal resolution.\n\t * @param {Number} [options.resolutionY=Resolution.AUTO_SIZE] - The vertical resolution.\n\t * @param {Number} [options.width=Resolution.AUTO_SIZE] - Deprecated. Use resolutionX instead.\n\t * @param {Number} [options.height=Resolution.AUTO_SIZE] - Deprecated. Use resolutionY instead.\n\t */\n\n\tconstructor(scene, camera, {\n\t\tblendFunction = BlendFunction.SCREEN,\n\t\tpatternTexture = null,\n\t\tpatternScale = 1.0,\n\t\tedgeStrength = 1.0,\n\t\tpulseSpeed = 0.0,\n\t\tvisibleEdgeColor = 0xffffff,\n\t\thiddenEdgeColor = 0x22090a,\n\t\tkernelSize = KernelSize.VERY_SMALL,\n\t\tblur = false,\n\t\txRay = true,\n\t\tresolutionScale = 0.5,\n\t\twidth = Resolution.AUTO_SIZE,\n\t\theight = Resolution.AUTO_SIZE,\n\t\tresolutionX = width,\n\t\tresolutionY = height\n\t} = {}) {\n\n\t\tsuper(\"OutlineEffect\", fragmentShader, {\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"maskTexture\", new Uniform(null)],\n\t\t\t\t[\"edgeTexture\", new Uniform(null)],\n\t\t\t\t[\"edgeStrength\", new Uniform(edgeStrength)],\n\t\t\t\t[\"visibleEdgeColor\", new Uniform(new Color(visibleEdgeColor))],\n\t\t\t\t[\"hiddenEdgeColor\", new Uniform(new Color(hiddenEdgeColor))],\n\t\t\t\t[\"pulse\", new Uniform(1.0)],\n\t\t\t\t[\"patternScale\", new Uniform(patternScale)],\n\t\t\t\t[\"patternTexture\", new Uniform(null)]\n\t\t\t])\n\t\t});\n\n\t\t// Handle alpha blending.\n\t\tthis.blendMode.addEventListener(\"change\", (event) => {\n\n\t\t\tif(this.blendMode.getBlendFunction() === BlendFunction.ALPHA) {\n\n\t\t\t\tthis.defines.set(\"ALPHA\", \"1\");\n\n\t\t\t} else {\n\n\t\t\t\tthis.defines.delete(\"ALPHA\");\n\n\t\t\t}\n\n\t\t\tthis.setChanged();\n\n\t\t});\n\n\t\tthis.blendMode.setBlendFunction(blendFunction);\n\t\tthis.patternTexture = patternTexture;\n\t\tthis.xRay = xRay;\n\n\t\t/**\n\t\t * The main scene.\n\t\t *\n\t\t * @type {Scene}\n\t\t * @private\n\t\t */\n\n\t\tthis.scene = scene;\n\n\t\t/**\n\t\t * The main camera.\n\t\t *\n\t\t * @type {Camera}\n\t\t * @private\n\t\t */\n\n\t\tthis.camera = camera;\n\n\t\t/**\n\t\t * A render target for the outline mask.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetMask = new WebGLRenderTarget(1, 1);\n\t\tthis.renderTargetMask.texture.name = \"Outline.Mask\";\n\t\tthis.uniforms.get(\"maskTexture\").value = this.renderTargetMask.texture;\n\n\t\t/**\n\t\t * A render target for the edge detection.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetOutline = new WebGLRenderTarget(1, 1, { depthBuffer: false });\n\t\tthis.renderTargetOutline.texture.name = \"Outline.Edges\";\n\t\tthis.uniforms.get(\"edgeTexture\").value = this.renderTargetOutline.texture;\n\n\t\t/**\n\t\t * A clear pass.\n\t\t *\n\t\t * @type {ClearPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.clearPass = new ClearPass();\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\n\t\tthis.clearPass.overrideClearAlpha = 1;\n\n\t\t/**\n\t\t * A depth pass.\n\t\t *\n\t\t * @type {DepthPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.depthPass = new DepthPass(scene, camera);\n\n\t\t/**\n\t\t * A depth comparison mask pass.\n\t\t *\n\t\t * @type {RenderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.maskPass = new RenderPass(scene, camera, new DepthComparisonMaterial(this.depthPass.texture, camera));\n\t\tconst clearPass = this.maskPass.clearPass;\n\t\tclearPass.overrideClearColor = new Color(0xffffff);\n\t\tclearPass.overrideClearAlpha = 1;\n\n\t\t/**\n\t\t * A blur pass.\n\t\t *\n\t\t * @type {KawaseBlurPass}\n\t\t */\n\n\t\tthis.blurPass = new KawaseBlurPass({ resolutionScale, resolutionX, resolutionY, kernelSize });\n\t\tthis.blurPass.enabled = blur;\n\t\tconst resolution = this.blurPass.resolution;\n\t\tresolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n\n\t\t/**\n\t\t * An outline detection pass.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.outlinePass = new ShaderPass(new OutlineMaterial());\n\t\tconst outlineMaterial = this.outlinePass.fullscreenMaterial;\n\t\toutlineMaterial.inputBuffer = this.renderTargetMask.texture;\n\n\t\t/**\n\t\t * The current animation time.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.time = 0;\n\n\t\t/**\n\t\t * A selection of objects that will be outlined.\n\t\t *\n\t\t * The default layer of this selection is 10.\n\t\t *\n\t\t * @type {Selection}\n\t\t */\n\n\t\tthis.selection = new Selection();\n\t\tthis.selection.layer = 10;\n\n\t\t/**\n\t\t * The pulse speed. Set to 0 to disable.\n\t\t *\n\t\t * @type {Number}\n\t\t */\n\n\t\tthis.pulseSpeed = pulseSpeed;\n\n\t}\n\n\t/**\n\t * The resolution of this effect.\n\t *\n\t * @type {Resolution}\n\t */\n\n\tget resolution() {\n\n\t\treturn this.blurPass.resolution;\n\n\t}\n\n\t/**\n\t * Returns the resolution.\n\t *\n\t * @return {Resizer} The resolution.\n\t */\n\n\tgetResolution() {\n\n\t\treturn this.blurPass.getResolution();\n\n\t}\n\n\t/**\n\t * The pattern scale.\n\t *\n\t * @type {Number}\n\t */\n\n\tget patternScale() {\n\n\t\treturn this.uniforms.get(\"patternScale\").value;\n\n\t}\n\n\tset patternScale(value) {\n\n\t\tthis.uniforms.get(\"patternScale\").value = value;\n\n\t}\n\n\t/**\n\t * The edge strength.\n\t *\n\t * @type {Number}\n\t */\n\n\tget edgeStrength() {\n\n\t\treturn this.uniforms.get(\"edgeStrength\").value;\n\n\t}\n\n\tset edgeStrength(value) {\n\n\t\tthis.uniforms.get(\"edgeStrength\").value = value;\n\n\t}\n\n\t/**\n\t * The visible edge color.\n\t *\n\t * @type {Color}\n\t */\n\n\tget visibleEdgeColor() {\n\n\t\treturn this.uniforms.get(\"visibleEdgeColor\").value;\n\n\t}\n\n\tset visibleEdgeColor(value) {\n\n\t\tthis.uniforms.get(\"visibleEdgeColor\").value = value;\n\n\t}\n\n\t/**\n\t * The hidden edge color.\n\t *\n\t * @type {Color}\n\t */\n\n\tget hiddenEdgeColor() {\n\n\t\treturn this.uniforms.get(\"hiddenEdgeColor\").value;\n\n\t}\n\n\tset hiddenEdgeColor(value) {\n\n\t\tthis.uniforms.get(\"hiddenEdgeColor\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the blur pass.\n\t *\n\t * @deprecated Use blurPass instead.\n\t * @return {KawaseBlurPass} The blur pass.\n\t */\n\n\tgetBlurPass() {\n\n\t\treturn this.blurPass;\n\n\t}\n\n\t/**\n\t * Returns the selection.\n\t *\n\t * @deprecated Use selection instead.\n\t * @return {Selection} The selection.\n\t */\n\n\tgetSelection() {\n\n\t\treturn this.selection;\n\n\t}\n\n\t/**\n\t * Returns the pulse speed.\n\t *\n\t * @deprecated Use pulseSpeed instead.\n\t * @return {Number} The speed.\n\t */\n\n\tgetPulseSpeed() {\n\n\t\treturn this.pulseSpeed;\n\n\t}\n\n\t/**\n\t * Sets the pulse speed. Set to zero to disable.\n\t *\n\t * @deprecated Use pulseSpeed instead.\n\t * @param {Number} value - The speed.\n\t */\n\n\tsetPulseSpeed(value) {\n\n\t\tthis.pulseSpeed = value;\n\n\t}\n\n\t/**\n\t * The current width of the internal render targets.\n\t *\n\t * @type {Number}\n\t * @deprecated Use resolution.width instead.\n\t */\n\n\tget width() {\n\n\t\treturn this.resolution.width;\n\n\t}\n\n\tset width(value) {\n\n\t\tthis.resolution.preferredWidth = value;\n\n\t}\n\n\t/**\n\t * The current height of the internal render targets.\n\t *\n\t * @type {Number}\n\t * @deprecated Use resolution.height instead.\n\t */\n\n\tget height() {\n\n\t\treturn this.resolution.height;\n\n\t}\n\n\tset height(value) {\n\n\t\tthis.resolution.preferredHeight = value;\n\n\t}\n\n\t/**\n\t * The selection layer.\n\t *\n\t * @type {Number}\n\t * @deprecated Use selection.layer instead.\n\t */\n\n\tget selectionLayer() {\n\n\t\treturn this.selection.layer;\n\n\t}\n\n\tset selectionLayer(value) {\n\n\t\tthis.selection.layer = value;\n\n\t}\n\n\t/**\n\t * Indicates whether dithering is enabled.\n\t *\n\t * @type {Boolean}\n\t * @deprecated\n\t */\n\n\tget dithering() {\n\n\t\treturn this.blurPass.dithering;\n\n\t}\n\n\tset dithering(value) {\n\n\t\tthis.blurPass.dithering = value;\n\n\t}\n\n\t/**\n\t * The blur kernel size.\n\t *\n\t * @type {KernelSize}\n\t * @deprecated Use blurPass.kernelSize instead.\n\t */\n\n\tget kernelSize() {\n\n\t\treturn this.blurPass.kernelSize;\n\n\t}\n\n\tset kernelSize(value) {\n\n\t\tthis.blurPass.kernelSize = value;\n\n\t}\n\n\t/**\n\t * Indicates whether the outlines should be blurred.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use blurPass.enabled instead.\n\t */\n\n\tget blur() {\n\n\t\treturn this.blurPass.enabled;\n\n\t}\n\n\tset blur(value) {\n\n\t\tthis.blurPass.enabled = value;\n\n\t}\n\n\t/**\n\t * Indicates whether X-ray mode is enabled.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget xRay() {\n\n\t\treturn this.defines.has(\"X_RAY\");\n\n\t}\n\n\tset xRay(value) {\n\n\t\tif(this.xRay !== value) {\n\n\t\t\tif(value) {\n\n\t\t\t\tthis.defines.set(\"X_RAY\", \"1\");\n\n\t\t\t} else {\n\n\t\t\t\tthis.defines.delete(\"X_RAY\");\n\n\t\t\t}\n\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indicates whether X-ray mode is enabled.\n\t *\n\t * @deprecated Use xRay instead.\n\t * @return {Boolean} Whether X-ray mode is enabled.\n\t */\n\n\tisXRayEnabled() {\n\n\t\treturn this.xRay;\n\n\t}\n\n\t/**\n\t * Enables or disables X-ray outlines.\n\t *\n\t * @deprecated Use xRay instead.\n\t * @param {Boolean} value - Whether X-ray should be enabled.\n\t */\n\n\tsetXRayEnabled(value) {\n\n\t\tthis.xRay = value;\n\n\t}\n\n\t/**\n\t * The pattern texture. Set to `null` to disable.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget patternTexture() {\n\n\t\treturn this.uniforms.get(\"patternTexture\").value;\n\n\t}\n\n\tset patternTexture(value) {\n\n\t\tif(value !== null) {\n\n\t\t\tvalue.wrapS = value.wrapT = RepeatWrapping;\n\t\t\tthis.defines.set(\"USE_PATTERN\", \"1\");\n\t\t\tthis.setVertexShader(vertexShader);\n\n\t\t} else {\n\n\t\t\tthis.defines.delete(\"USE_PATTERN\");\n\t\t\tthis.setVertexShader(null);\n\n\t\t}\n\n\t\tif(this.renderer !== null) {\n\n\t\t\tconst decoding = getTextureDecoding(value, this.renderer.capabilities.isWebGL2);\n\t\t\tthis.defines.set(\"texelToLinear(texel)\", decoding);\n\n\t\t}\n\n\t\tthis.uniforms.get(\"patternTexture\").value = value;\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * Sets the pattern texture.\n\t *\n\t * @deprecated Use patternTexture instead.\n\t * @param {Texture} value - The new texture.\n\t */\n\n\tsetPatternTexture(value) {\n\n\t\tthis.patternTexture = value;\n\n\t}\n\n\t/**\n\t * Returns the current resolution scale.\n\t *\n\t * @return {Number} The resolution scale.\n\t * @deprecated Use resolution instead.\n\t */\n\n\tgetResolutionScale() {\n\n\t\treturn this.resolution.scale;\n\n\t}\n\n\t/**\n\t * Sets the resolution scale.\n\t *\n\t * @param {Number} scale - The new resolution scale.\n\t * @deprecated Use resolution instead.\n\t */\n\n\tsetResolutionScale(scale) {\n\n\t\tthis.resolution.scale = scale;\n\n\t}\n\n\t/**\n\t * Clears the current selection and selects a list of objects.\n\t *\n\t * @param {Object3D[]} objects - The objects that should be outlined. This array will be copied.\n\t * @return {OutlinePass} This pass.\n\t * @deprecated Use selection.set() instead.\n\t */\n\n\tsetSelection(objects) {\n\n\t\tthis.selection.set(objects);\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Clears the list of selected objects.\n\t *\n\t * @return {OutlinePass} This pass.\n\t * @deprecated Use selection.clear() instead.\n\t */\n\n\tclearSelection() {\n\n\t\tthis.selection.clear();\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Selects an object.\n\t *\n\t * @param {Object3D} object - The object that should be outlined.\n\t * @return {OutlinePass} This pass.\n\t * @deprecated Use selection.add() instead.\n\t */\n\n\tselectObject(object) {\n\n\t\tthis.selection.add(object);\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Deselects an object.\n\t *\n\t * @param {Object3D} object - The object that should no longer be outlined.\n\t * @return {OutlinePass} This pass.\n\t * @deprecated Use selection.delete() instead.\n\t */\n\n\tdeselectObject(object) {\n\n\t\tthis.selection.delete(object);\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Updates this effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, deltaTime) {\n\n\t\tconst scene = this.scene;\n\t\tconst camera = this.camera;\n\t\tconst selection = this.selection;\n\t\tconst uniforms = this.uniforms;\n\t\tconst pulse = uniforms.get(\"pulse\");\n\n\t\tconst background = scene.background;\n\t\tconst mask = camera.layers.mask;\n\n\t\tif(selection.size > 0) {\n\n\t\t\tscene.background = null;\n\t\t\tpulse.value = 1;\n\n\t\t\tif(this.pulseSpeed > 0) {\n\n\t\t\t\tpulse.value = Math.cos(this.time * this.pulseSpeed * 10.0) * 0.375 + 0.625;\n\n\t\t\t}\n\n\t\t\tthis.time += deltaTime;\n\n\t\t\t// Render a custom depth texture and ignore selected objects.\n\t\t\tselection.setVisible(false);\n\t\t\tthis.depthPass.render(renderer);\n\t\t\tselection.setVisible(true);\n\n\t\t\t// Compare the depth of the selected objects with the depth texture.\n\t\t\tcamera.layers.set(selection.layer);\n\t\t\tthis.maskPass.render(renderer, this.renderTargetMask);\n\n\t\t\t// Restore the camera layer mask and the scene background.\n\t\t\tcamera.layers.mask = mask;\n\t\t\tscene.background = background;\n\n\t\t\t// Detect the outline.\n\t\t\tthis.outlinePass.render(renderer, null, this.renderTargetOutline);\n\n\t\t\tif(this.blurPass.enabled) {\n\n\t\t\t\tthis.blurPass.render(renderer, this.renderTargetOutline, this.renderTargetOutline);\n\n\t\t\t}\n\n\t\t} else if(this.time > 0) {\n\n\t\t\tthis.clearPass.render(renderer, this.renderTargetMask);\n\t\t\tthis.time = 0;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the size of internal render targets.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.blurPass.setSize(width, height);\n\t\tthis.renderTargetMask.setSize(width, height);\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.setBaseSize(width, height);\n\t\tconst w = resolution.width, h = resolution.height;\n\n\t\tthis.depthPass.setSize(w, h);\n\t\tthis.renderTargetOutline.setSize(w, h);\n\t\tthis.outlinePass.fullscreenMaterial.setSize(w, h);\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tconst texture = this.patternTexture;\n\t\tconst decoding = getTextureDecoding(texture, renderer.capabilities.isWebGL2);\n\t\tthis.defines.set(\"texelToLinear(texel)\", decoding);\n\n\t\t// No need for high precision: the blur pass operates on a mask texture.\n\t\tthis.blurPass.initialize(renderer, alpha, UnsignedByteType);\n\n\t\tif(frameBufferType !== undefined) {\n\n\t\t\t// These passes ignore the buffer type.\n\t\t\tthis.depthPass.initialize(renderer, alpha, frameBufferType);\n\t\t\tthis.maskPass.initialize(renderer, alpha, frameBufferType);\n\t\t\tthis.outlinePass.initialize(renderer, alpha, frameBufferType);\n\n\t\t}\n\n\t}\n\n}\n", "import { Uniform, Vector2, Vector4 } from \"three\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/pixelation.frag\";\n\n/**\n * A pixelation effect.\n *\n * Warning: This effect cannot be merged with convolution effects.\n */\n\nexport class PixelationEffect extends Effect {\n\n\t/**\n\t * Constructs a new pixelation effect.\n\t *\n\t * @param {Object} [granularity=30.0] - The pixel granularity.\n\t */\n\n\tconstructor(granularity = 30.0) {\n\n\t\tsuper(\"PixelationEffect\", fragmentShader, {\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"active\", new Uniform(false)],\n\t\t\t\t[\"d\", new Uniform(new Vector4())]\n\t\t\t])\n\t\t});\n\n\t\t/**\n\t\t * The original resolution.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @private\n\t\t */\n\n\t\tthis.resolution = new Vector2();\n\n\t\t/**\n\t\t * Backing data for {@link granularity}.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis._granularity = 0;\n\t\tthis.granularity = granularity;\n\n\t}\n\n\t/**\n\t * The pixel granularity.\n\t *\n\t * A higher value yields coarser visuals.\n\t *\n\t * @type {Number}\n\t */\n\n\tget granularity() {\n\n\t\treturn this._granularity;\n\n\t}\n\n\tset granularity(value) {\n\n\t\tlet d = Math.floor(value);\n\n\t\tif(d % 2 > 0) {\n\n\t\t\td += 1;\n\n\t\t}\n\n\t\tthis._granularity = d;\n\t\tthis.uniforms.get(\"active\").value = (d > 0);\n\t\tthis.setSize(this.resolution.width, this.resolution.height);\n\n\t}\n\n\t/**\n\t * Returns the pixel granularity.\n\t *\n\t * @deprecated Use granularity instead.\n\t * @return {Number} The granularity.\n\t */\n\n\tgetGranularity() {\n\n\t\treturn this.granularity;\n\n\t}\n\n\t/**\n\t * Sets the pixel granularity.\n\t *\n\t * @deprecated Use granularity instead.\n\t * @param {Number} value - The new granularity.\n\t */\n\n\tsetGranularity(value) {\n\n\t\tthis.granularity = value;\n\n\t}\n\n\t/**\n\t * Updates the granularity.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.set(width, height);\n\n\t\tconst d = this.granularity;\n\t\tconst x = d / resolution.x;\n\t\tconst y = d / resolution.y;\n\t\tthis.uniforms.get(\"d\").value.set(x, y, 1.0 / x, 1.0 / y);\n\n\t}\n\n}\n", "import { Uniform, Vector4 } from \"three\";\nimport { EffectAttribute } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/realistic-bokeh.frag\";\n\n/**\n * Depth of Field shader v2.4.\n *\n * Yields more realistic results but is also more demanding.\n *\n * Original shader code by Martins Upitis:\n * http://blenderartists.org/forum/showthread.php?237488-GLSL-depth-of-field-with-bokeh-v2-4-(update)\n *\n * @deprecated Use DepthOfFieldEffect instead.\n */\n\nexport class RealisticBokehEffect extends Effect {\n\n\t/**\n\t * Constructs a new bokeh effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction] - The blend function of this effect.\n\t * @param {Number} [options.focus=1.0] - The focus distance in world units.\n\t * @param {Number} [options.focalLength=24.0] - The focal length of the main camera.\n\t * @param {Number} [options.fStop=0.9] - The ratio of the lens focal length to the diameter of the entrance pupil (aperture).\n\t * @param {Number} [options.luminanceThreshold=0.5] - A luminance threshold.\n\t * @param {Number} [options.luminanceGain=2.0] - A luminance gain factor.\n\t * @param {Number} [options.bias=0.5] - A blur bias.\n\t * @param {Number} [options.fringe=0.7] - A blur offset.\n\t * @param {Number} [options.maxBlur=1.0] - The maximum blur strength.\n\t * @param {Boolean} [options.rings=3] - The number of blur iterations.\n\t * @param {Boolean} [options.samples=2] - The amount of samples taken per ring.\n\t * @param {Boolean} [options.showFocus=false] - Whether the focal point should be highlighted. Useful for debugging.\n\t * @param {Boolean} [options.manualDoF=false] - Enables manual control over the depth of field.\n\t * @param {Boolean} [options.pentagon=false] - Enables pentagonal blur shapes. Requires a high number of rings and samples.\n\t */\n\n\tconstructor({\n\t\tblendFunction,\n\t\tfocus = 1.0,\n\t\tfocalLength = 24.0,\n\t\tfStop = 0.9,\n\t\tluminanceThreshold = 0.5,\n\t\tluminanceGain = 2.0,\n\t\tbias = 0.5,\n\t\tfringe = 0.7,\n\t\tmaxBlur = 1.0,\n\t\trings = 3,\n\t\tsamples = 2,\n\t\tshowFocus = false,\n\t\tmanualDoF = false,\n\t\tpentagon = false\n\t} = {}) {\n\n\t\tsuper(\"RealisticBokehEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tattributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"focus\", new Uniform(focus)],\n\t\t\t\t[\"focalLength\", new Uniform(focalLength)],\n\t\t\t\t[\"fStop\", new Uniform(fStop)],\n\t\t\t\t[\"luminanceThreshold\", new Uniform(luminanceThreshold)],\n\t\t\t\t[\"luminanceGain\", new Uniform(luminanceGain)],\n\t\t\t\t[\"bias\", new Uniform(bias)],\n\t\t\t\t[\"fringe\", new Uniform(fringe)],\n\t\t\t\t[\"maxBlur\", new Uniform(maxBlur)],\n\t\t\t\t[\"dof\", new Uniform(null)]\n\t\t\t])\n\t\t});\n\n\t\tthis.rings = rings;\n\t\tthis.samples = samples;\n\t\tthis.showFocus = showFocus;\n\t\tthis.manualDoF = manualDoF;\n\t\tthis.pentagon = pentagon;\n\n\t}\n\n\t/**\n\t * The amount of blur iterations.\n\t *\n\t * @type {Number}\n\t */\n\n\tget rings() {\n\n\t\treturn Number.parseInt(this.defines.get(\"RINGS_INT\"));\n\n\t}\n\n\tset rings(value) {\n\n\t\tconst r = Math.floor(value);\n\t\tthis.defines.set(\"RINGS_INT\", r.toFixed(0));\n\t\tthis.defines.set(\"RINGS_FLOAT\", r.toFixed(1));\n\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * The amount of blur samples per ring.\n\t *\n\t * @type {Number}\n\t */\n\n\tget samples() {\n\n\t\treturn Number.parseInt(this.defines.get(\"SAMPLES_INT\"));\n\n\t}\n\n\tset samples(value) {\n\n\t\tconst s = Math.floor(value);\n\t\tthis.defines.set(\"SAMPLES_INT\", s.toFixed(0));\n\t\tthis.defines.set(\"SAMPLES_FLOAT\", s.toFixed(1));\n\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * Indicates whether the focal point will be highlighted.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget showFocus() {\n\n\t\treturn this.defines.has(\"SHOW_FOCUS\");\n\n\t}\n\n\tset showFocus(value) {\n\n\t\tif(this.showFocus !== value) {\n\n\t\t\tif(value) {\n\n\t\t\t\tthis.defines.set(\"SHOW_FOCUS\", \"1\");\n\n\t\t\t} else {\n\n\t\t\t\tthis.defines.delete(\"SHOW_FOCUS\");\n\n\t\t\t}\n\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indicates whether the Depth of Field should be calculated manually.\n\t *\n\t * If enabled, the Depth of Field can be adjusted via the `dof` uniform.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget manualDoF() {\n\n\t\treturn this.defines.has(\"MANUAL_DOF\");\n\n\t}\n\n\tset manualDoF(value) {\n\n\t\tif(this.manualDoF !== value) {\n\n\t\t\tif(value) {\n\n\t\t\t\tthis.defines.set(\"MANUAL_DOF\", \"1\");\n\t\t\t\tthis.uniforms.get(\"dof\").value = new Vector4(0.2, 1.0, 0.2, 2.0);\n\n\t\t\t} else {\n\n\t\t\t\tthis.defines.delete(\"MANUAL_DOF\");\n\t\t\t\tthis.uniforms.get(\"dof\").value = null;\n\n\t\t\t}\n\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indicates whether the blur shape should be pentagonal.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget pentagon() {\n\n\t\treturn this.defines.has(\"PENTAGON\");\n\n\t}\n\n\tset pentagon(value) {\n\n\t\tif(this.pentagon !== value) {\n\n\t\t\tif(value) {\n\n\t\t\t\tthis.defines.set(\"PENTAGON\", \"1\");\n\n\t\t\t} else {\n\n\t\t\t\tthis.defines.delete(\"PENTAGON\");\n\n\t\t\t}\n\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n}\n", "import { Uniform, Vector2 } from \"three\";\nimport { BlendFunction } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/scanlines.frag\";\n\n/**\n * A scanline effect.\n *\n * Based on an implementation by Georg 'Leviathan' Steinrohder (CC BY 3.0):\n * http://www.truevision3d.com/forums/showcase/staticnoise_colorblackwhite_scanline_shaders-t18698.0.html\n */\n\nexport class ScanlineEffect extends Effect {\n\n\t/**\n\t * Constructs a new scanline effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.OVERLAY] - The blend function of this effect.\n\t * @param {Number} [options.density=1.25] - The scanline density.\n\t * @param {Number} [options.scrollSpeed=0.0] - The scanline scroll speed.\n\t */\n\n\tconstructor({ blendFunction = BlendFunction.OVERLAY, density = 1.25, scrollSpeed = 0.0 } = {}) {\n\n\t\tsuper(\"ScanlineEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"count\", new Uniform(0.0)],\n\t\t\t\t[\"scrollSpeed\", new Uniform(0.0)]\n\t\t\t])\n\t\t});\n\n\t\t/**\n\t\t * The original resolution.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @private\n\t\t */\n\n\t\tthis.resolution = new Vector2();\n\n\t\t/**\n\t\t * The amount of scanlines, relative to the screen height.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.d = density;\n\n\t\tthis.scrollSpeed = scrollSpeed;\n\n\t}\n\n\t/**\n\t * The scanline density.\n\t *\n\t * @type {Number}\n\t */\n\n\tget density() {\n\n\t\treturn this.d;\n\n\t}\n\n\tset density(value) {\n\n\t\tthis.d = value;\n\t\tthis.setSize(this.resolution.width, this.resolution.height);\n\n\t}\n\n\t/**\n\t * Returns the current scanline density.\n\t *\n\t * @deprecated Use density instead.\n\t * @return {Number} The scanline density.\n\t */\n\n\tgetDensity() {\n\n\t\treturn this.density;\n\n\t}\n\n\t/**\n\t * Sets the scanline density.\n\t *\n\t * @deprecated Use density instead.\n\t * @param {Number} value - The new scanline density.\n\t */\n\n\tsetDensity(value) {\n\n\t\tthis.density = value;\n\n\t}\n\n\t/**\n\t * The scanline scroll speed. Default is 0 (disabled).\n\t *\n\t * @type {Number}\n\t */\n\n\tget scrollSpeed() {\n\n\t\treturn this.uniforms.get(\"scrollSpeed\").value;\n\n\t}\n\n\tset scrollSpeed(value) {\n\n\t\tthis.uniforms.get(\"scrollSpeed\").value = value;\n\n\t\tif(value === 0) {\n\n\t\t\tif(this.defines.delete(\"SCROLL\")) {\n\n\t\t\t\tthis.setChanged();\n\n\t\t\t}\n\n\t\t} else if(!this.defines.has(\"SCROLL\")) {\n\n\t\t\tthis.defines.set(\"SCROLL\", \"1\");\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the size of this pass.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.resolution.set(width, height);\n\t\tthis.uniforms.get(\"count\").value = Math.round(height * this.density);\n\n\t}\n\n}\n", "import { Uniform, Vector2, Vector3 } from \"three\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/shock-wave.frag\";\nimport vertexShader from \"./glsl/shock-wave.vert\";\n\nconst HALF_PI = Math.PI * 0.5;\nconst v = new Vector3();\nconst ab = new Vector3();\n\n/**\n * A shock wave effect.\n *\n * Based on a Gist by Jean-Philippe Sarda:\n * https://gist.github.com/jpsarda/33cea67a9f2ecb0a0eda\n */\n\nexport class ShockWaveEffect extends Effect {\n\n\t/**\n\t * Constructs a new shock wave effect.\n\t *\n\t * @param {Camera} camera - The main camera.\n\t * @param {Vector3} [position] - The world position of the shock wave.\n\t * @param {Object} [options] - The options.\n\t * @param {Number} [options.speed=2.0] - The animation speed.\n\t * @param {Number} [options.maxRadius=1.0] - The extent of the shock wave.\n\t * @param {Number} [options.waveSize=0.2] - The wave size.\n\t * @param {Number} [options.amplitude=0.05] - The distortion amplitude.\n\t */\n\n\tconstructor(camera, position = new Vector3(), {\n\t\tspeed = 2.0,\n\t\tmaxRadius = 1.0,\n\t\twaveSize = 0.2,\n\t\tamplitude = 0.05\n\t} = {}) {\n\n\t\tsuper(\"ShockWaveEffect\", fragmentShader, {\n\t\t\tvertexShader,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"active\", new Uniform(false)],\n\t\t\t\t[\"center\", new Uniform(new Vector2(0.5, 0.5))],\n\t\t\t\t[\"cameraDistance\", new Uniform(1.0)],\n\t\t\t\t[\"size\", new Uniform(1.0)],\n\t\t\t\t[\"radius\", new Uniform(-waveSize)],\n\t\t\t\t[\"maxRadius\", new Uniform(maxRadius)],\n\t\t\t\t[\"waveSize\", new Uniform(waveSize)],\n\t\t\t\t[\"amplitude\", new Uniform(amplitude)]\n\t\t\t])\n\t\t});\n\n\t\t/**\n\t\t * The position of the shock wave.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\n\t\tthis.position = position;\n\n\t\t/**\n\t\t * The speed of the shock wave animation.\n\t\t *\n\t\t * @type {Number}\n\t\t */\n\n\t\tthis.speed = speed;\n\n\t\t/**\n\t\t * The main camera.\n\t\t *\n\t\t * @type {Camera}\n\t\t * @private\n\t\t */\n\n\t\tthis.camera = camera;\n\n\t\t/**\n\t\t * The object position in screen space.\n\t\t *\n\t\t * @type {Vector3}\n\t\t * @private\n\t\t */\n\n\t\tthis.screenPosition = this.uniforms.get(\"center\").value;\n\n\t\t/**\n\t\t * A time accumulator.\n\t\t *\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\n\t\tthis.time = 0.0;\n\n\t\t/**\n\t\t * Indicates whether the shock wave animation is active.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\n\t\tthis.active = false;\n\n\t}\n\n\t/**\n\t * The amplitude.\n\t *\n\t * @type {Number}\n\t */\n\n\tget amplitude() {\n\n\t\treturn this.uniforms.get(\"amplitude\").value;\n\n\t}\n\n\tset amplitude(value) {\n\n\t\tthis.uniforms.get(\"amplitude\").value = value;\n\n\t}\n\n\t/**\n\t * The wave size.\n\t *\n\t * @type {Number}\n\t */\n\n\tget waveSize() {\n\n\t\treturn this.uniforms.get(\"waveSize\").value;\n\n\t}\n\n\tset waveSize(value) {\n\n\t\tthis.uniforms.get(\"waveSize\").value = value;\n\n\t}\n\n\t/**\n\t * The maximum radius.\n\t *\n\t * @type {Number}\n\t */\n\n\tget maxRadius() {\n\n\t\treturn this.uniforms.get(\"maxRadius\").value;\n\n\t}\n\n\tset maxRadius(value) {\n\n\t\tthis.uniforms.get(\"maxRadius\").value = value;\n\n\t}\n\n\t/**\n\t * The position of the shock wave.\n\t *\n\t * @type {Vector3}\n\t * @deprecated Use position instead.\n\t */\n\n\tget epicenter() {\n\n\t\treturn this.position;\n\n\t}\n\n\tset epicenter(value) {\n\n\t\tthis.position = value;\n\n\t}\n\n\t/**\n\t * Returns the position of the shock wave.\n\t *\n\t * @deprecated Use position instead.\n\t * @return {Vector3} The position.\n\t */\n\n\tgetPosition() {\n\n\t\treturn this.position;\n\n\t}\n\n\t/**\n\t * Sets the position of the shock wave.\n\t *\n\t * @deprecated Use position instead.\n\t * @param {Vector3} value - The position.\n\t */\n\n\tsetPosition(value) {\n\n\t\tthis.position = value;\n\n\t}\n\n\t/**\n\t * Returns the speed of the shock wave.\n\t *\n\t * @deprecated Use speed instead.\n\t * @return {Number} The speed.\n\t */\n\n\tgetSpeed() {\n\n\t\treturn this.speed;\n\n\t}\n\n\t/**\n\t * Sets the speed of the shock wave.\n\t *\n\t * @deprecated Use speed instead.\n\t * @param {Number} value - The speed.\n\t */\n\n\tsetSpeed(value) {\n\n\t\tthis.speed = value;\n\n\t}\n\n\t/**\n\t * Emits the shock wave.\n\t */\n\n\texplode() {\n\n\t\tthis.time = 0.0;\n\t\tthis.active = true;\n\t\tthis.uniforms.get(\"active\").value = true;\n\n\t}\n\n\t/**\n\t * Updates this effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [delta] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, delta) {\n\n\t\tconst position = this.position;\n\t\tconst camera = this.camera;\n\t\tconst uniforms = this.uniforms;\n\t\tconst uActive = uniforms.get(\"active\");\n\n\t\tif(this.active) {\n\n\t\t\tconst waveSize = uniforms.get(\"waveSize\").value;\n\n\t\t\t// Calculate direction vectors.\n\t\t\tcamera.getWorldDirection(v);\n\t\t\tab.copy(camera.position).sub(position);\n\n\t\t\t// Don't render the effect if the object is behind the camera.\n\t\t\tuActive.value = (v.angleTo(ab) > HALF_PI);\n\n\t\t\tif(uActive.value) {\n\n\t\t\t\t// Scale the effect based on distance to the object.\n\t\t\t\tuniforms.get(\"cameraDistance\").value = camera.position.distanceTo(position);\n\n\t\t\t\t// Calculate the screen position of the shock wave.\n\t\t\t\tv.copy(position).project(camera);\n\t\t\t\tthis.screenPosition.set((v.x + 1.0) * 0.5, (v.y + 1.0) * 0.5);\n\n\t\t\t}\n\n\t\t\t// Update the shock wave radius based on time.\n\t\t\tthis.time += delta * this.speed;\n\t\t\tconst radius = this.time - waveSize;\n\t\t\tuniforms.get(\"radius\").value = radius;\n\n\t\t\tif(radius >= (uniforms.get(\"maxRadius\").value + waveSize) * 2.0) {\n\n\t\t\t\tthis.active = false;\n\t\t\t\tuActive.value = false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n", "import {\n\tBasicDepthPacking,\n\tColor,\n\tNotEqualDepth,\n\tEqualDepth,\n\tRGBADepthPacking,\n\tsRGBEncoding,\n\tWebGLRenderTarget\n} from \"three\";\n\nimport { Selection } from \"../core\";\nimport { DepthTestStrategy, EffectAttribute } from \"../enums\";\nimport { DepthMaskMaterial } from \"../materials\";\nimport { ClearPass, DepthPass, ShaderPass } from \"../passes\";\nimport { BloomEffect } from \"./BloomEffect\";\n\n/**\n * A selective bloom effect.\n *\n * This effect applies bloom to selected objects only.\n */\n\nexport class SelectiveBloomEffect extends BloomEffect {\n\n\t/**\n\t * Constructs a new selective bloom effect.\n\t *\n\t * @param {Scene} scene - The main scene.\n\t * @param {Camera} camera - The main camera.\n\t * @param {Object} [options] - The options. See {@link BloomEffect} for details.\n\t */\n\n\tconstructor(scene, camera, options) {\n\n\t\tsuper(options);\n\n\t\tthis.setAttributes(this.getAttributes() | EffectAttribute.DEPTH);\n\n\t\t/**\n\t\t * The main camera.\n\t\t *\n\t\t * @type {Camera}\n\t\t * @private\n\t\t */\n\n\t\tthis.camera = camera;\n\n\t\t/**\n\t\t * A depth pass.\n\t\t *\n\t\t * @type {DepthPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.depthPass = new DepthPass(scene, camera);\n\n\t\t/**\n\t\t * A clear pass.\n\t\t *\n\t\t * @type {ClearPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.clearPass = new ClearPass(true, false, false);\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\n\n\t\t/**\n\t\t * A depth mask pass.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.depthMaskPass = new ShaderPass(new DepthMaskMaterial());\n\n\t\tconst depthMaskMaterial = this.depthMaskMaterial;\n\t\tdepthMaskMaterial.adoptCameraSettings(camera);\n\t\tdepthMaskMaterial.depthBuffer1 = this.depthPass.texture;\n\t\tdepthMaskMaterial.depthPacking1 = RGBADepthPacking;\n\t\tdepthMaskMaterial.depthMode = EqualDepth;\n\n\t\t/**\n\t\t * A render target.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetMasked = new WebGLRenderTarget(1, 1, { depthBuffer: false });\n\t\tthis.renderTargetMasked.texture.name = \"Bloom.Masked\";\n\n\t\t/**\n\t\t * A selection of objects.\n\t\t *\n\t\t * The default layer of this selection is 11.\n\t\t *\n\t\t * @type {Selection}\n\t\t * @readonly\n\t\t */\n\n\t\tthis.selection = new Selection();\n\t\tthis.selection.layer = 11;\n\n\t\t/**\n\t\t * Backing data for {@link inverted}.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\n\t\tthis._inverted = false;\n\n\t\t/**\n\t\t * Backing data for {@link ignoreBackground}.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\n\t\tthis._ignoreBackground = false;\n\n\t}\n\n\t/**\n\t * Returns the selection.\n\t *\n\t * @deprecated Use selection instead.\n\t * @return {Selection} The selection.\n\t */\n\n\tgetSelection() {\n\n\t\treturn this.selection;\n\n\t}\n\n\t/**\n\t * The depth mask material.\n\t *\n\t * @type {DepthMaskMaterial}\n\t * @private\n\t */\n\n\tget depthMaskMaterial() {\n\n\t\treturn this.depthMaskPass.fullscreenMaterial;\n\n\t}\n\n\t/**\n\t * Indicates whether the selection should be considered inverted.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget inverted() {\n\n\t\treturn this._inverted;\n\n\t}\n\n\tset inverted(value) {\n\n\t\tthis._inverted = value;\n\t\tthis.depthMaskMaterial.depthMode = value ? NotEqualDepth : EqualDepth;\n\n\t}\n\n\t/**\n\t * Indicates whether the mask is inverted.\n\t *\n\t * @deprecated Use inverted instead.\n\t * @return {Boolean} Whether the mask is inverted.\n\t */\n\n\tisInverted() {\n\n\t\treturn this.inverted;\n\n\t}\n\n\t/**\n\t * Enables or disable mask inversion.\n\t *\n\t * @deprecated Use inverted instead.\n\t * @param {Boolean} value - Whether the mask should be inverted.\n\t */\n\n\tsetInverted(value) {\n\n\t\tthis.inverted = value;\n\n\t}\n\n\t/**\n\t * Indicates whether the background colors will be ignored.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget ignoreBackground() {\n\n\t\treturn this._ignoreBackground;\n\n\t}\n\n\tset ignoreBackground(value) {\n\n\t\tthis._ignoreBackground = value;\n\t\tthis.depthMaskMaterial.maxDepthStrategy = value ?\n\t\t\tDepthTestStrategy.DISCARD_MAX_DEPTH :\n\t\t\tDepthTestStrategy.KEEP_MAX_DEPTH;\n\n\t}\n\n\t/**\n\t * Indicates whether the background is disabled.\n\t *\n\t * @deprecated Use ignoreBackground instead.\n\t * @return {Boolean} Whether the background is disabled.\n\t */\n\n\tisBackgroundDisabled() {\n\n\t\treturn this.ignoreBackground;\n\n\t}\n\n\t/**\n\t * Enables or disables the background.\n\t *\n\t * @deprecated Use ignoreBackground instead.\n\t * @param {Boolean} value - Whether the background should be disabled.\n\t */\n\n\tsetBackgroundDisabled(value) {\n\n\t\tthis.ignoreBackground = value;\n\n\t}\n\n\t/**\n\t * Sets the depth texture.\n\t *\n\t * @param {Texture} depthTexture - A depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing.\n\t */\n\n\tsetDepthTexture(depthTexture, depthPacking = BasicDepthPacking) {\n\n\t\tthis.depthMaskMaterial.depthBuffer0 = depthTexture;\n\t\tthis.depthMaskMaterial.depthPacking0 = depthPacking;\n\n\t}\n\n\t/**\n\t * Updates this effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, deltaTime) {\n\n\t\tconst camera = this.camera;\n\t\tconst selection = this.selection;\n\t\tconst inverted = this.inverted;\n\t\tlet renderTarget = inputBuffer;\n\n\t\tif(this.ignoreBackground || !inverted || selection.size > 0) {\n\n\t\t\t// Render depth of selected objects.\n\t\t\tconst mask = camera.layers.mask;\n\t\t\tcamera.layers.set(selection.layer);\n\t\t\tthis.depthPass.render(renderer);\n\t\t\tcamera.layers.mask = mask;\n\n\t\t\t// Discard colors based on depth.\n\t\t\trenderTarget = this.renderTargetMasked;\n\t\t\tthis.clearPass.render(renderer, renderTarget);\n\t\t\tthis.depthMaskPass.render(renderer, inputBuffer, renderTarget);\n\n\t\t}\n\n\t\t// Render the bloom texture as usual.\n\t\tsuper.update(renderer, renderTarget, deltaTime);\n\n\t}\n\n\t/**\n\t * Updates the size of internal render targets.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tsuper.setSize(width, height);\n\t\tthis.renderTargetMasked.setSize(width, height);\n\t\tthis.depthPass.setSize(width, height);\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tsuper.initialize(renderer, alpha, frameBufferType);\n\n\t\tthis.clearPass.initialize(renderer, alpha, frameBufferType);\n\t\tthis.depthPass.initialize(renderer, alpha, frameBufferType);\n\t\tthis.depthMaskPass.initialize(renderer, alpha, frameBufferType);\n\n\t\tif(frameBufferType !== undefined) {\n\n\t\t\tthis.renderTargetMasked.texture.type = frameBufferType;\n\n\t\t\tif(renderer.outputEncoding === sRGBEncoding) {\n\n\t\t\t\tthis.renderTargetMasked.texture.encoding = sRGBEncoding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n", "import { Uniform } from \"three\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/sepia.frag\";\n\n/**\n * A sepia effect.\n */\n\nexport class SepiaEffect extends Effect {\n\n\t/**\n\t * Constructs a new sepia effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction] - The blend function of this effect.\n\t * @param {Number} [options.intensity=1.0] - The intensity of the effect.\n\t */\n\n\tconstructor({ blendFunction, intensity = 1.0 } = {}) {\n\n\t\tsuper(\"SepiaEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"intensity\", new Uniform(intensity)]\n\t\t\t])\n\t\t});\n\n\t}\n\n\t/**\n\t * The intensity.\n\t *\n\t * @deprecated Use blendMode.opacity instead.\n\t * @type {Number}\n\t */\n\n\tget intensity() {\n\n\t\treturn this.uniforms.get(\"intensity\").value;\n\n\t}\n\n\tset intensity(value) {\n\n\t\tthis.uniforms.get(\"intensity\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the current sepia intensity.\n\t *\n\t * @deprecated Use blendMode.opacity instead.\n\t * @return {Number} The intensity.\n\t */\n\n\tgetIntensity() {\n\n\t\treturn this.intensity;\n\n\t}\n\n\t/**\n\t * Sets the sepia intensity.\n\t *\n\t * @deprecated Use blendMode.opacity instead.\n\t * @param {Number} value - The intensity.\n\t */\n\n\tsetIntensity(value) {\n\n\t\tthis.intensity = value;\n\n\t}\n\n}\n", "import {\n\tBasicDepthPacking,\n\tColor,\n\tLinearFilter,\n\tLoadingManager,\n\tNearestFilter,\n\tTexture,\n\tUniform,\n\tWebGLRenderTarget\n} from \"three\";\n\nimport { BlendFunction, EdgeDetectionMode, EffectAttribute, PredicationMode, SMAAPreset } from \"../enums\";\nimport { EdgeDetectionMaterial, SMAAWeightsMaterial } from \"../materials\";\nimport { ClearPass, ShaderPass } from \"../passes\";\nimport { Effect } from \"./Effect\";\n\nimport searchImageDataURL from \"../textures/smaa/searchImageDataURL\";\nimport areaImageDataURL from \"../textures/smaa/areaImageDataURL\";\n\nimport fragmentShader from \"./glsl/smaa.frag\";\nimport vertexShader from \"./glsl/smaa.vert\";\n\n/**\n * Subpixel Morphological Antialiasing (SMAA).\n *\n * https://github.com/iryoku/smaa/releases/tag/v2.8\n */\n\nexport class SMAAEffect extends Effect {\n\n\t/**\n\t * Constructs a new SMAA effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SRC] - The blend function of this effect.\n\t * @param {SMAAPreset} [options.preset=SMAAPreset.MEDIUM] - The quality preset.\n\t * @param {EdgeDetectionMode} [options.edgeDetectionMode=EdgeDetectionMode.COLOR] - The edge detection mode.\n\t * @param {PredicationMode} [options.predicationMode=PredicationMode.DISABLED] - The predication mode.\n\t */\n\n\tconstructor({\n\t\tblendFunction = BlendFunction.SRC,\n\t\tpreset = SMAAPreset.MEDIUM,\n\t\tedgeDetectionMode = EdgeDetectionMode.COLOR,\n\t\tpredicationMode = PredicationMode.DISABLED\n\t} = {}) {\n\n\t\tsuper(\"SMAAEffect\", fragmentShader, {\n\t\t\tvertexShader,\n\t\t\tblendFunction,\n\t\t\tattributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"weightMap\", new Uniform(null)]\n\t\t\t])\n\t\t});\n\n\t\t// TODO Added for backward-compatibility.\n\t\tlet searchImage, areaImage;\n\n\t\tif(arguments.length > 1) {\n\n\t\t\tsearchImage = arguments[0];\n\t\t\tareaImage = arguments[1];\n\n\t\t\tif(arguments.length > 2) {\n\n\t\t\t\tpreset = arguments[2];\n\n\t\t\t}\n\n\t\t\tif(arguments.length > 3) {\n\n\t\t\t\tedgeDetectionMode = arguments[3];\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * A render target for the edge detection.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetEdges = new WebGLRenderTarget(1, 1, { depthBuffer: false });\n\t\tthis.renderTargetEdges.texture.name = \"SMAA.Edges\";\n\n\t\t/**\n\t\t * A render target for the edge weights.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetWeights = this.renderTargetEdges.clone();\n\t\tthis.renderTargetWeights.texture.name = \"SMAA.Weights\";\n\t\tthis.uniforms.get(\"weightMap\").value = this.renderTargetWeights.texture;\n\n\t\t/**\n\t\t * A clear pass for the edges buffer.\n\t\t *\n\t\t * @type {ClearPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.clearPass = new ClearPass(true, false, false);\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\n\t\tthis.clearPass.overrideClearAlpha = 1;\n\n\t\t/**\n\t\t * An edge detection pass.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.edgeDetectionPass = new ShaderPass(new EdgeDetectionMaterial());\n\t\tthis.edgeDetectionMaterial.edgeDetectionMode = edgeDetectionMode;\n\t\tthis.edgeDetectionMaterial.predicationMode = predicationMode;\n\n\t\t/**\n\t\t * An SMAA weights pass.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.weightsPass = new ShaderPass(new SMAAWeightsMaterial());\n\n\t\t// Load the lookup textures.\n\t\tconst loadingManager = new LoadingManager();\n\t\tloadingManager.onLoad = () => {\n\n\t\t\tconst searchTexture = new Texture(searchImage);\n\t\t\tsearchTexture.name = \"SMAA.Search\";\n\t\t\tsearchTexture.magFilter = NearestFilter;\n\t\t\tsearchTexture.minFilter = NearestFilter;\n\t\t\tsearchTexture.generateMipmaps = false;\n\t\t\tsearchTexture.needsUpdate = true;\n\t\t\tsearchTexture.flipY = true;\n\t\t\tthis.weightsMaterial.searchTexture = searchTexture;\n\n\t\t\tconst areaTexture = new Texture(areaImage);\n\t\t\tareaTexture.name = \"SMAA.Area\";\n\t\t\tareaTexture.magFilter = LinearFilter;\n\t\t\tareaTexture.minFilter = LinearFilter;\n\t\t\tareaTexture.generateMipmaps = false;\n\t\t\tareaTexture.needsUpdate = true;\n\t\t\tareaTexture.flipY = false;\n\t\t\tthis.weightsMaterial.areaTexture = areaTexture;\n\n\t\t\tthis.dispatchEvent({ type: \"load\" });\n\n\t\t};\n\n\t\tloadingManager.itemStart(\"search\");\n\t\tloadingManager.itemStart(\"area\");\n\n\t\tif(searchImage !== undefined && areaImage !== undefined) {\n\n\t\t\t// Use the provided images.\n\t\t\tloadingManager.itemEnd(\"search\");\n\t\t\tloadingManager.itemEnd(\"area\");\n\n\t\t} else if(typeof Image !== \"undefined\") {\n\n\t\t\t// Load the lookup textures.\n\t\t\tsearchImage = new Image();\n\t\t\tareaImage = new Image();\n\t\t\tsearchImage.addEventListener(\"load\", () => loadingManager.itemEnd(\"search\"));\n\t\t\tareaImage.addEventListener(\"load\", () => loadingManager.itemEnd(\"area\"));\n\t\t\tsearchImage.src = searchImageDataURL;\n\t\t\tareaImage.src = areaImageDataURL;\n\n\t\t}\n\n\t\tthis.applyPreset(preset);\n\n\t}\n\n\t/**\n\t * The edges texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget edgesTexture() {\n\n\t\treturn this.renderTargetEdges.texture;\n\n\t}\n\n\t/**\n\t * Returns the edges texture.\n\t *\n\t * @deprecated Use edgesTexture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetEdgesTexture() {\n\n\t\treturn this.edgesTexture;\n\n\t}\n\n\t/**\n\t * The edge weights texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget weightsTexture() {\n\n\t\treturn this.renderTargetWeights.texture;\n\n\t}\n\n\t/**\n\t * Returns the edge weights texture.\n\t *\n\t * @deprecated Use weightsTexture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetWeightsTexture() {\n\n\t\treturn this.weightsTexture;\n\n\t}\n\n\t/**\n\t * The edge detection material.\n\t *\n\t * @type {EdgeDetectionMaterial}\n\t */\n\n\tget edgeDetectionMaterial() {\n\n\t\treturn this.edgeDetectionPass.fullscreenMaterial;\n\n\t}\n\n\t/**\n\t * The edge detection material.\n\t *\n\t * @type {EdgeDetectionMaterial}\n\t * @deprecated Use edgeDetectionMaterial instead.\n\t */\n\n\tget colorEdgesMaterial() {\n\n\t\treturn this.edgeDetectionMaterial;\n\n\t}\n\n\t/**\n\t * Returns the edge detection material.\n\t *\n\t * @deprecated Use edgeDetectionMaterial instead.\n\t * @return {EdgeDetectionMaterial} The material.\n\t */\n\n\tgetEdgeDetectionMaterial() {\n\n\t\treturn this.edgeDetectionMaterial;\n\n\t}\n\n\t/**\n\t * The edge weights material.\n\t *\n\t * @type {SMAAWeightsMaterial}\n\t */\n\n\tget weightsMaterial() {\n\n\t\treturn this.weightsPass.fullscreenMaterial;\n\n\t}\n\n\t/**\n\t * Returns the edge weights material.\n\t *\n\t * @deprecated Use weightsMaterial instead.\n\t * @return {SMAAWeightsMaterial} The material.\n\t */\n\n\tgetWeightsMaterial() {\n\n\t\treturn this.weightsMaterial;\n\n\t}\n\n\t/**\n\t * Sets the edge detection sensitivity.\n\t *\n\t * See {@link EdgeDetectionMaterial#setEdgeDetectionThreshold} for more details.\n\t *\n\t * @deprecated Use edgeDetectionMaterial instead.\n\t * @param {Number} threshold - The edge detection sensitivity. Range: [0.05, 0.5].\n\t */\n\n\tsetEdgeDetectionThreshold(threshold) {\n\n\t\tthis.edgeDetectionMaterial.edgeDetectionThreshold = threshold;\n\n\t}\n\n\t/**\n\t * Sets the maximum amount of horizontal/vertical search steps.\n\t *\n\t * See {@link SMAAWeightsMaterial#setOrthogonalSearchSteps} for more details.\n\t *\n\t * @deprecated Use weightsMaterial instead.\n\t * @param {Number} steps - The search steps. Range: [0, 112].\n\t */\n\n\tsetOrthogonalSearchSteps(steps) {\n\n\t\tthis.weightsMaterial.orthogonalSearchSteps = steps;\n\n\t}\n\n\t/**\n\t * Applies the given quality preset.\n\t *\n\t * @param {SMAAPreset} preset - The preset.\n\t */\n\n\tapplyPreset(preset) {\n\n\t\tconst edgeDetectionMaterial = this.edgeDetectionMaterial;\n\t\tconst weightsMaterial = this.weightsMaterial;\n\n\t\tswitch(preset) {\n\n\t\t\tcase SMAAPreset.LOW:\n\t\t\t\tedgeDetectionMaterial.edgeDetectionThreshold = 0.15;\n\t\t\t\tweightsMaterial.orthogonalSearchSteps = 4;\n\t\t\t\tweightsMaterial.diagonalDetection = false;\n\t\t\t\tweightsMaterial.cornerDetection = false;\n\t\t\t\tbreak;\n\n\t\t\tcase SMAAPreset.MEDIUM:\n\t\t\t\tedgeDetectionMaterial.edgeDetectionThreshold = 0.1;\n\t\t\t\tweightsMaterial.orthogonalSearchSteps = 8;\n\t\t\t\tweightsMaterial.diagonalDetection = false;\n\t\t\t\tweightsMaterial.cornerDetection = false;\n\t\t\t\tbreak;\n\n\t\t\tcase SMAAPreset.HIGH:\n\t\t\t\tedgeDetectionMaterial.edgeDetectionThreshold = 0.1;\n\t\t\t\tweightsMaterial.orthogonalSearchSteps = 16;\n\t\t\t\tweightsMaterial.diagonalSearchSteps = 8;\n\t\t\t\tweightsMaterial.cornerRounding = 25;\n\t\t\t\tweightsMaterial.diagonalDetection = true;\n\t\t\t\tweightsMaterial.cornerDetection = true;\n\t\t\t\tbreak;\n\n\t\t\tcase SMAAPreset.ULTRA:\n\t\t\t\tedgeDetectionMaterial.edgeDetectionThreshold = 0.05;\n\t\t\t\tweightsMaterial.orthogonalSearchSteps = 32;\n\t\t\t\tweightsMaterial.diagonalSearchSteps = 16;\n\t\t\t\tweightsMaterial.cornerRounding = 25;\n\t\t\t\tweightsMaterial.diagonalDetection = true;\n\t\t\t\tweightsMaterial.cornerDetection = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets the depth texture.\n\t *\n\t * @param {Texture} depthTexture - A depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing.\n\t */\n\n\tsetDepthTexture(depthTexture, depthPacking = BasicDepthPacking) {\n\n\t\tthis.edgeDetectionMaterial.depthBuffer = depthTexture;\n\t\tthis.edgeDetectionMaterial.depthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * Updates this effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, deltaTime) {\n\n\t\tthis.clearPass.render(renderer, this.renderTargetEdges);\n\t\tthis.edgeDetectionPass.render(renderer, inputBuffer, this.renderTargetEdges);\n\t\tthis.weightsPass.render(renderer, this.renderTargetEdges, this.renderTargetWeights);\n\n\t}\n\n\t/**\n\t * Updates the size of internal render targets.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tthis.edgeDetectionMaterial.setSize(width, height);\n\t\tthis.weightsMaterial.setSize(width, height);\n\t\tthis.renderTargetEdges.setSize(width, height);\n\t\tthis.renderTargetWeights.setSize(width, height);\n\n\t}\n\n\t/**\n\t * Deletes internal render targets and textures.\n\t */\n\n\tdispose() {\n\n\t\tconst { searchTexture, areaTexture } = this.weightsMaterial;\n\n\t\tif(searchTexture !== null && areaTexture !== null) {\n\n\t\t\tsearchTexture.dispose();\n\t\t\tareaTexture.dispose();\n\n\t\t}\n\n\t\tsuper.dispose();\n\n\t}\n\n\t/**\n\t * The SMAA search image, encoded as a base64 data URL.\n\t *\n\t * @type {String}\n\t * @deprecated\n\t */\n\n\tstatic get searchImageDataURL() {\n\n\t\treturn searchImageDataURL;\n\n\t}\n\n\t/**\n\t * The SMAA area image, encoded as a base64 data URL.\n\t *\n\t * @type {String}\n\t * @deprecated\n\t */\n\n\tstatic get areaImageDataURL() {\n\n\t\treturn areaImageDataURL;\n\n\t}\n\n}\n", "// Generated with SMAASearchImageData.generate().toCanvas().toDataURL(), cropped, high dynamic range.\n/* eslint-disable max-len */\nexport default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC\";\n", "// Generated with SMAAAreaImageData.generate().toCanvas().toDataURL().\n/* eslint-disable max-len */\nexport default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC\";\n", "import { BasicDepthPacking, Color, RepeatWrapping, RGBAFormat, Uniform, WebGLRenderTarget } from \"three\";\nimport { Resolution } from \"../core/Resolution\";\nimport { BlendFunction, EffectAttribute } from \"../enums\";\nimport { NoiseTexture } from \"../textures/NoiseTexture\";\nimport { SSAOMaterial } from \"../materials\";\nimport { ShaderPass } from \"../passes\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/ssao.frag\";\n\nconst NOISE_TEXTURE_SIZE = 64;\n\n/**\n * A Screen Space Ambient Occlusion (SSAO) effect.\n *\n * For high quality visuals use two SSAO effect instances in a row with different radii, one for rough AO and one for\n * fine details.\n *\n * This effect supports depth-aware upsampling and should be rendered at a lower resolution. The resolution should match\n * that of the downsampled normals and depth. If you intend to render SSAO at full resolution, do not provide a\n * downsampled `normalDepthBuffer`.\n *\n * It's recommended to specify a relative render resolution using the `resolutionScale` constructor parameter to avoid\n * undesired sampling patterns.\n *\n * Based on \"Scalable Ambient Obscurance\" by Morgan McGuire et al. and \"Depth-aware upsampling experiments\" by Eleni\n * Maria Stea:\n * https://research.nvidia.com/publication/scalable-ambient-obscurance\n * https://eleni.mutantstargoat.com/hikiko/on-depth-aware-upsampling\n *\n * The view position calculation is based on a shader by Norbert Nopper:\n * https://github.com/McNopper/OpenGL/blob/master/Example28/shader/ssao.frag.glsl\n */\n\nexport class SSAOEffect extends Effect {\n\n\t/**\n\t * Constructs a new SSAO effect.\n\t *\n\t * @todo Move normalBuffer to options.\n\t * @param {Camera} camera - The main camera.\n\t * @param {Texture} normalBuffer - A texture that contains the scene normals. May be null if a normalDepthBuffer is provided. See {@link NormalPass}.\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.MULTIPLY] - The blend function of this effect.\n\t * @param {Boolean} [options.distanceScaling=true] - Enables or disables distance-based radius scaling.\n\t * @param {Boolean} [options.depthAwareUpsampling=true] - Enables or disables depth-aware upsampling. Has no effect if WebGL 2 is not supported.\n\t * @param {Texture} [options.normalDepthBuffer=null] - A texture that contains downsampled scene normals and depth. See {@link DepthDownsamplingPass}.\n\t * @param {Number} [options.samples=9] - The amount of samples per pixel. Should not be a multiple of the ring count.\n\t * @param {Number} [options.rings=7] - The amount of spiral turns in the occlusion sampling pattern. Should be a prime number.\n\t * @param {Number} [options.worldDistanceThreshold] - The world distance threshold at which the occlusion effect starts to fade out.\n\t * @param {Number} [options.worldDistanceFalloff] - The world distance falloff. Influences the smoothness of the occlusion cutoff.\n\t * @param {Number} [options.worldProximityThreshold] - The world proximity threshold at which the occlusion starts to fade out.\n\t * @param {Number} [options.worldProximityFalloff] - The world proximity falloff. Influences the smoothness of the proximity cutoff.\n\t * @param {Number} [options.distanceThreshold=0.97] - The distance threshold at which the occlusion effect starts to fade out. Range [0.0, 1.0].\n\t * @param {Number} [options.distanceFalloff=0.03] - The distance falloff. Influences the smoothness of the overall occlusion cutoff. Range [0.0, 1.0].\n\t * @param {Number} [options.rangeThreshold=0.0005] - The proximity threshold at which the occlusion starts to fade out. Range [0.0, 1.0].\n\t * @param {Number} [options.rangeFalloff=0.001] - The proximity falloff. Influences the smoothness of the proximity cutoff. Range [0.0, 1.0].\n\t * @param {Number} [options.minRadiusScale=0.1] - The minimum radius scale. Has no effect if distance scaling is disabled.\n\t * @param {Number} [options.luminanceInfluence=0.7] - Determines how much the luminance of the scene influences the ambient occlusion.\n\t * @param {Number} [options.radius=0.1825] - The occlusion sampling radius, expressed as a scale relative to the resolution. Range [1e-6, 1.0].\n\t * @param {Number} [options.intensity=1.0] - The intensity of the ambient occlusion.\n\t * @param {Number} [options.bias=0.025] - An occlusion bias. Eliminates artifacts caused by depth discontinuities.\n\t * @param {Number} [options.fade=0.01] - Influences the smoothness of the shadows. A lower value results in higher contrast.\n\t * @param {Color} [options.color=null] - The color of the ambient occlusion.\n\t * @param {Number} [options.resolutionScale=1.0] - The resolution scale.\n\t * @param {Number} [options.resolutionX=Resolution.AUTO_SIZE] - The horizontal resolution.\n\t * @param {Number} [options.resolutionY=Resolution.AUTO_SIZE] - The vertical resolution.\n\t * @param {Number} [options.width=Resolution.AUTO_SIZE] - Deprecated. Use resolutionX instead.\n\t * @param {Number} [options.height=Resolution.AUTO_SIZE] - Deprecated. Use resolutionY instead.\n\t */\n\n\tconstructor(camera, normalBuffer, {\n\t\tblendFunction = BlendFunction.MULTIPLY,\n\t\tdistanceScaling = true,\n\t\tdepthAwareUpsampling = true,\n\t\tnormalDepthBuffer = null,\n\t\tsamples = 9,\n\t\trings = 7,\n\t\tworldDistanceThreshold,\n\t\tworldDistanceFalloff,\n\t\tworldProximityThreshold,\n\t\tworldProximityFalloff,\n\t\tdistanceThreshold = 0.97,\n\t\tdistanceFalloff = 0.03,\n\t\trangeThreshold = 0.0005,\n\t\trangeFalloff = 0.001,\n\t\tminRadiusScale = 0.1,\n\t\tluminanceInfluence = 0.7,\n\t\tradius = 0.1825,\n\t\tintensity = 1.0,\n\t\tbias = 0.025,\n\t\tfade = 0.01,\n\t\tcolor = null,\n\t\tresolutionScale = 1.0,\n\t\twidth = Resolution.AUTO_SIZE,\n\t\theight = Resolution.AUTO_SIZE,\n\t\tresolutionX = width,\n\t\tresolutionY = height\n\t} = {}) {\n\n\t\tsuper(\"SSAOEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tattributes: EffectAttribute.DEPTH,\n\t\t\tdefines: new Map([\n\t\t\t\t[\"THRESHOLD\", \"0.997\"]\n\t\t\t]),\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"aoBuffer\", new Uniform(null)],\n\t\t\t\t[\"normalDepthBuffer\", new Uniform(normalDepthBuffer)],\n\t\t\t\t[\"luminanceInfluence\", new Uniform(luminanceInfluence)],\n\t\t\t\t[\"color\", new Uniform(null)],\n\t\t\t\t[\"scale\", new Uniform(0.0)] // Unused.\n\t\t\t])\n\t\t});\n\n\t\t/**\n\t\t * A render target for the ambient occlusion shadows.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetAO = new WebGLRenderTarget(1, 1, { depthBuffer: false });\n\t\tthis.renderTargetAO.texture.name = \"AO.Target\";\n\t\tthis.uniforms.get(\"aoBuffer\").value = this.renderTargetAO.texture;\n\n\t\t/**\n\t\t * The resolution.\n\t\t *\n\t\t * @type {Resolution}\n\t\t */\n\n\t\tconst resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n\t\tresolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n\n\t\t/**\n\t\t * The main camera.\n\t\t *\n\t\t * @type {Camera}\n\t\t * @private\n\t\t */\n\n\t\tthis.camera = camera;\n\n\t\t/**\n\t\t * An SSAO pass.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.ssaoPass = new ShaderPass(new SSAOMaterial(camera));\n\n\t\tconst noiseTexture = new NoiseTexture(NOISE_TEXTURE_SIZE, NOISE_TEXTURE_SIZE, RGBAFormat);\n\t\tnoiseTexture.wrapS = noiseTexture.wrapT = RepeatWrapping;\n\n\t\tconst material = this.ssaoMaterial;\n\t\tmaterial.noiseTexture = noiseTexture;\n\t\tmaterial.minRadiusScale = minRadiusScale;\n\t\tmaterial.intensity = intensity;\n\t\tmaterial.fade = fade;\n\t\tmaterial.bias = bias;\n\n\t\tif(normalDepthBuffer !== null) {\n\n\t\t\tmaterial.normalDepthBuffer = normalDepthBuffer;\n\t\t\tthis.depthAwareUpsampling = depthAwareUpsampling;\n\n\t\t} else {\n\n\t\t\tmaterial.normalBuffer = normalBuffer;\n\n\t\t}\n\n\t\tmaterial.distanceThreshold = distanceThreshold;\n\t\tmaterial.distanceFalloff = distanceFalloff;\n\t\tmaterial.proximityThreshold = rangeThreshold;\n\t\tmaterial.proximityFalloff = rangeFalloff;\n\n\t\tif(worldDistanceThreshold !== undefined) {\n\n\t\t\tmaterial.worldDistanceThreshold = worldDistanceThreshold;\n\n\t\t}\n\n\t\tif(worldDistanceFalloff !== undefined) {\n\n\t\t\tmaterial.worldDistanceFalloff = worldDistanceFalloff;\n\n\t\t}\n\n\t\tif(worldProximityThreshold !== undefined) {\n\n\t\t\tmaterial.worldProximityThreshold = worldProximityThreshold;\n\n\t\t}\n\n\t\tif(worldProximityFalloff !== undefined) {\n\n\t\t\tmaterial.worldProximityFalloff = worldProximityFalloff;\n\n\t\t}\n\n\t\tmaterial.distanceScaling = distanceScaling;\n\t\tmaterial.samples = samples;\n\t\tmaterial.radius = radius;\n\t\tmaterial.rings = rings;\n\t\tthis.color = color;\n\n\t}\n\n\t/**\n\t * Returns the resolution settings.\n\t *\n\t * @deprecated Use resolution instead.\n\t * @return {Resolution} The resolution.\n\t */\n\n\tgetResolution() {\n\n\t\treturn this.resolution;\n\n\t}\n\n\t/**\n\t * The SSAO material.\n\t *\n\t * @type {SSAOMaterial}\n\t */\n\n\tget ssaoMaterial() {\n\n\t\treturn this.ssaoPass.fullscreenMaterial;\n\n\t}\n\n\t/**\n\t * Returns the SSAO material.\n\t *\n\t * @deprecated Use ssaoMaterial instead.\n\t * @return {SSAOMaterial} The material.\n\t */\n\n\tgetSSAOMaterial() {\n\n\t\treturn this.ssaoMaterial;\n\n\t}\n\n\t/**\n\t * The amount of occlusion samples per pixel.\n\t *\n\t * @type {Number}\n\t * @deprecated Use ssaoMaterial.samples instead.\n\t */\n\n\tget samples() {\n\n\t\treturn this.ssaoMaterial.samples;\n\n\t}\n\n\tset samples(value) {\n\n\t\tthis.ssaoMaterial.samples = value;\n\n\t}\n\n\t/**\n\t * The amount of spiral turns in the occlusion sampling pattern.\n\t *\n\t * @type {Number}\n\t * @deprecated Use ssaoMaterial.rings instead.\n\t */\n\n\tget rings() {\n\n\t\treturn this.ssaoMaterial.rings;\n\n\t}\n\n\tset rings(value) {\n\n\t\tthis.ssaoMaterial.rings = value;\n\n\t}\n\n\t/**\n\t * The occlusion sampling radius.\n\t *\n\t * @type {Number}\n\t * @deprecated Use ssaoMaterial.radius instead.\n\t */\n\n\tget radius() {\n\n\t\treturn this.ssaoMaterial.radius;\n\n\t}\n\n\tset radius(value) {\n\n\t\tthis.ssaoMaterial.radius = value;\n\n\t}\n\n\t/**\n\t * Indicates whether depth-aware upsampling is enabled.\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget depthAwareUpsampling() {\n\n\t\treturn this.defines.has(\"DEPTH_AWARE_UPSAMPLING\");\n\n\t}\n\n\tset depthAwareUpsampling(value) {\n\n\t\tif(this.depthAwareUpsampling !== value) {\n\n\t\t\tif(value && this.uniforms.get(\"normalDepthBuffer\").value !== null) {\n\n\t\t\t\tthis.defines.set(\"DEPTH_AWARE_UPSAMPLING\", \"1\");\n\n\t\t\t} else {\n\n\t\t\t\tthis.defines.delete(\"DEPTH_AWARE_UPSAMPLING\");\n\n\t\t\t}\n\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indicates whether depth-aware upsampling is enabled.\n\t *\n\t * @deprecated Use depthAwareUpsampling instead.\n\t * @return {Boolean} Whether depth-aware upsampling is enabled.\n\t */\n\n\tisDepthAwareUpsamplingEnabled() {\n\n\t\treturn this.depthAwareUpsampling;\n\n\t}\n\n\t/**\n\t * Enables or disables depth-aware upsampling.\n\t *\n\t * @deprecated Use depthAwareUpsampling instead.\n\t * @param {Boolean} value - Whether depth-aware upsampling should be enabled.\n\t */\n\n\tsetDepthAwareUpsamplingEnabled(value) {\n\n\t\tthis.depthAwareUpsampling = value;\n\n\t}\n\n\t/**\n\t * Indicates whether distance-based radius scaling is enabled.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use ssaoMaterial.distanceScaling instead.\n\t */\n\n\tget distanceScaling() {\n\n\t\treturn this.ssaoMaterial.distanceScaling;\n\n\t}\n\n\tset distanceScaling(value) {\n\n\t\tthis.ssaoMaterial.distanceScaling = value;\n\n\t}\n\n\t/**\n\t * The color of the ambient occlusion. Set to `null` to disable.\n\t *\n\t * @type {Color}\n\t */\n\n\tget color() {\n\n\t\treturn this.uniforms.get(\"color\").value;\n\n\t}\n\n\tset color(value) {\n\n\t\tconst uniforms = this.uniforms;\n\t\tconst defines = this.defines;\n\n\t\tif(value !== null) {\n\n\t\t\tif(defines.has(\"COLORIZE\")) {\n\n\t\t\t\tuniforms.get(\"color\").value.set(value);\n\n\t\t\t} else {\n\n\t\t\t\tdefines.set(\"COLORIZE\", \"1\");\n\t\t\t\tuniforms.get(\"color\").value = new Color(value);\n\t\t\t\tthis.setChanged();\n\n\t\t\t}\n\n\t\t} else if(defines.has(\"COLORIZE\")) {\n\n\t\t\tdefines.delete(\"COLORIZE\");\n\t\t\tuniforms.get(\"color\").value = null;\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * The luminance influence factor. Range: [0.0, 1.0].\n\t *\n\t * @type {Boolean}\n\t */\n\n\tget luminanceInfluence() {\n\n\t\treturn this.uniforms.get(\"luminanceInfluence\").value;\n\n\t}\n\n\tset luminanceInfluence(value) {\n\n\t\tthis.uniforms.get(\"luminanceInfluence\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the color of the ambient occlusion.\n\t *\n\t * @deprecated Use color instead.\n\t * @return {Color} The color.\n\t */\n\n\tgetColor() {\n\n\t\treturn this.color;\n\n\t}\n\n\t/**\n\t * Sets the color of the ambient occlusion. Set to `null` to disable colorization.\n\t *\n\t * @deprecated Use color instead.\n\t * @param {Color} value - The color.\n\t */\n\n\tsetColor(value) {\n\n\t\tthis.color = value;\n\n\t}\n\n\t/**\n\t * Sets the occlusion distance cutoff.\n\t *\n\t * @deprecated Use ssaoMaterial instead.\n\t * @param {Number} threshold - The distance threshold. Range [0.0, 1.0].\n\t * @param {Number} falloff - The falloff. Range [0.0, 1.0].\n\t */\n\n\tsetDistanceCutoff(threshold, falloff) {\n\n\t\tthis.ssaoMaterial.distanceThreshold = threshold;\n\t\tthis.ssaoMaterial.distanceFalloff = falloff;\n\n\t}\n\n\t/**\n\t * Sets the occlusion proximity cutoff.\n\t *\n\t * @deprecated Use ssaoMaterial instead.\n\t * @param {Number} threshold - The proximity threshold. Range [0.0, 1.0].\n\t * @param {Number} falloff - The falloff. Range [0.0, 1.0].\n\t */\n\n\tsetProximityCutoff(threshold, falloff) {\n\n\t\tthis.ssaoMaterial.proximityThreshold = threshold;\n\t\tthis.ssaoMaterial.proximityFalloff = falloff;\n\n\t}\n\n\t/**\n\t * Sets the depth texture.\n\t *\n\t * @param {Texture} depthTexture - A depth texture.\n\t * @param {DepthPackingStrategies} [depthPacking=BasicDepthPacking] - The depth packing.\n\t */\n\n\tsetDepthTexture(depthTexture, depthPacking = BasicDepthPacking) {\n\n\t\tthis.ssaoMaterial.depthBuffer = depthTexture;\n\t\tthis.ssaoMaterial.depthPacking = depthPacking;\n\n\t}\n\n\t/**\n\t * Updates this effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, deltaTime) {\n\n\t\tthis.ssaoPass.render(renderer, null, this.renderTargetAO);\n\n\t}\n\n\t/**\n\t * Sets the size.\n\t *\n\t * @param {Number} width - The width.\n\t * @param {Number} height - The height.\n\t */\n\n\tsetSize(width, height) {\n\n\t\tconst resolution = this.resolution;\n\t\tresolution.setBaseSize(width, height);\n\t\tconst w = resolution.width, h = resolution.height;\n\n\t\tconst material = this.ssaoMaterial;\n\t\tmaterial.adoptCameraSettings(this.camera);\n\t\tmaterial.setSize(w, h);\n\t\tthis.renderTargetAO.setSize(w, h);\n\n\t}\n\n}\n", "import { Uniform, UnsignedByteType } from \"three\";\nimport { ColorChannel } from \"../enums\";\nimport { getTextureDecoding } from \"../utils\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/texture.frag\";\nimport vertexShader from \"./glsl/texture.vert\";\n\n/**\n * A texture effect.\n */\n\nexport class TextureEffect extends Effect {\n\n\t/**\n\t * Constructs a new texture effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction] - The blend function of this effect.\n\t * @param {Texture} [options.texture] - A texture.\n\t * @param {Boolean} [options.aspectCorrection=false] - Deprecated. Adjust the texture's offset, repeat and center instead.\n\t */\n\n\tconstructor({ blendFunction, texture = null, aspectCorrection = false } = {}) {\n\n\t\tsuper(\"TextureEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tdefines: new Map([\n\t\t\t\t[\"TEXEL\", \"texel\"]\n\t\t\t]),\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"map\", new Uniform(null)],\n\t\t\t\t[\"scale\", new Uniform(1.0)],\n\t\t\t\t[\"uvTransform\", new Uniform(null)]\n\t\t\t])\n\t\t});\n\n\t\tthis.texture = texture;\n\t\tthis.aspectCorrection = aspectCorrection;\n\n\t}\n\n\t/**\n\t * The texture.\n\t *\n\t * @type {Texture}\n\t */\n\n\tget texture() {\n\n\t\treturn this.uniforms.get(\"map\").value;\n\n\t}\n\n\tset texture(value) {\n\n\t\tconst prevTexture = this.texture;\n\t\tconst uniforms = this.uniforms;\n\t\tconst defines = this.defines;\n\n\t\tif(prevTexture !== value) {\n\n\t\t\tuniforms.get(\"map\").value = value;\n\t\t\tuniforms.get(\"uvTransform\").value = value.matrix;\n\t\t\tdefines.delete(\"TEXTURE_PRECISION_HIGH\");\n\n\t\t\tif(this.renderer !== null) {\n\n\t\t\t\tconst decoding = getTextureDecoding(value, this.renderer.capabilities.isWebGL2);\n\t\t\t\tdefines.set(\"texelToLinear(texel)\", decoding);\n\n\t\t\t}\n\n\t\t\tif(value !== null) {\n\n\t\t\t\tif(value.matrixAutoUpdate) {\n\n\t\t\t\t\tdefines.set(\"UV_TRANSFORM\", \"1\");\n\t\t\t\t\tthis.setVertexShader(vertexShader);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdefines.delete(\"UV_TRANSFORM\");\n\t\t\t\t\tthis.setVertexShader(null);\n\n\t\t\t\t}\n\n\t\t\t\tif(value.type !== UnsignedByteType) {\n\n\t\t\t\t\tdefines.set(\"TEXTURE_PRECISION_HIGH\", \"1\");\n\n\t\t\t\t}\n\n\t\t\t\tif(prevTexture === null || prevTexture.type !== value.type || prevTexture.encoding !== value.encoding) {\n\n\t\t\t\t\tthis.setChanged();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the texture.\n\t *\n\t * @deprecated Use texture instead.\n\t * @return {Texture} The texture.\n\t */\n\n\tgetTexture() {\n\n\t\treturn this.texture;\n\n\t}\n\n\t/**\n\t * Sets the texture.\n\t *\n\t * @deprecated Use texture instead.\n\t * @param {Texture} value - The texture.\n\t */\n\n\tsetTexture(value) {\n\n\t\tthis.texture = value;\n\n\t}\n\n\t/**\n\t * Indicates whether aspect correction is enabled.\n\t *\n\t * @type {Number}\n\t * @deprecated Adjust the texture's offset, repeat, rotation and center instead.\n\t */\n\n\tget aspectCorrection() {\n\n\t\treturn this.defines.has(\"ASPECT_CORRECTION\");\n\n\t}\n\n\tset aspectCorrection(value) {\n\n\t\tif(this.aspectCorrection !== value) {\n\n\t\t\tif(value) {\n\n\t\t\t\tthis.defines.set(\"ASPECT_CORRECTION\", \"1\");\n\n\t\t\t} else {\n\n\t\t\t\tthis.defines.delete(\"ASPECT_CORRECTION\");\n\n\t\t\t}\n\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indicates whether the texture UV coordinates will be transformed using the transformation matrix of the texture.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use texture.matrixAutoUpdate instead.\n\t */\n\n\tget uvTransform() {\n\n\t\tconst texture = this.texture;\n\t\treturn (texture !== null && texture.matrixAutoUpdate);\n\n\t}\n\n\tset uvTransform(value) {\n\n\t\tconst texture = this.texture;\n\n\t\tif(texture !== null) {\n\n\t\t\ttexture.matrixAutoUpdate = value;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets the swizzles that will be applied to the components of a texel before it is written to the output color.\n\t *\n\t * @param {ColorChannel} r - The swizzle for the `r` component.\n\t * @param {ColorChannel} [g=r] - The swizzle for the `g` component.\n\t * @param {ColorChannel} [b=r] - The swizzle for the `b` component.\n\t * @param {ColorChannel} [a=r] - The swizzle for the `a` component.\n\t */\n\n\tsetTextureSwizzleRGBA(r, g = r, b = r, a = r) {\n\n\t\tconst rgba = \"rgba\";\n\t\tlet swizzle = \"\";\n\n\t\tif(r !== ColorChannel.RED || g !== ColorChannel.GREEN || b !== ColorChannel.BLUE || a !== ColorChannel.ALPHA) {\n\n\t\t\tswizzle = [\".\", rgba[r], rgba[g], rgba[b], rgba[a]].join(\"\");\n\n\t\t}\n\n\t\tthis.defines.set(\"TEXEL\", \"texel\" + swizzle);\n\t\tthis.setChanged();\n\n\t}\n\n\t/**\n\t * Updates this effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, deltaTime) {\n\n\t\tif(this.texture.matrixAutoUpdate) {\n\n\t\t\tthis.texture.updateMatrix();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tconst decoding = getTextureDecoding(this.texture, renderer.capabilities.isWebGL2);\n\t\tthis.defines.set(\"texelToLinear(texel)\", decoding);\n\t\tthis.renderer = renderer;\n\n\t}\n\n}\n", "import { LinearMipmapLinearFilter, Uniform, WebGLRenderTarget } from \"three\";\nimport { AdaptiveLuminancePass, LuminancePass } from \"../passes\";\nimport { BlendFunction, ToneMappingMode } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/tone-mapping.frag\";\n\n/**\n * A tone mapping effect.\n *\n * Note: `ToneMappingMode.REINHARD2_ADAPTIVE` requires support for `EXT_shader_texture_lod`.\n *\n * Reference:\n * GDC2007 - Wolfgang Engel, Post-Processing Pipeline\n * http://perso.univ-lyon1.fr/jean-claude.iehl/Public/educ/GAMA/2007/gdc07/Post-Processing_Pipeline.pdf\n */\n\nexport class ToneMappingEffect extends Effect {\n\n\t/**\n\t * Constructs a new tone mapping effect.\n\t *\n\t * The additional parameters only affect the Reinhard2 operator.\n\t *\n\t * TODO Change default mode to ACES_FILMIC and white point to 4.\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SRC] - The blend function of this effect.\n\t * @param {Boolean} [options.adaptive=true] - Deprecated. Use mode instead.\n\t * @param {ToneMappingMode} [options.mode=ToneMappingMode.REINHARD2_ADAPTIVE] - The tone mapping mode.\n\t * @param {Number} [options.resolution=256] - The resolution of the luminance texture. Must be a power of two.\n\t * @param {Number} [options.maxLuminance=16.0] - Deprecated. Same as whitePoint.\n\t * @param {Number} [options.whitePoint=16.0] - The white point.\n\t * @param {Number} [options.middleGrey=0.6] - The middle grey factor.\n\t * @param {Number} [options.minLuminance=0.01] - The minimum luminance. Prevents very high exposure in dark scenes.\n\t * @param {Number} [options.averageLuminance=1.0] - The average luminance. Used for the non-adaptive Reinhard operator.\n\t * @param {Number} [options.adaptationRate=1.0] - The luminance adaptation rate.\n\t */\n\n\tconstructor({\n\t\tblendFunction = BlendFunction.SRC,\n\t\tadaptive = true,\n\t\tmode = adaptive ? ToneMappingMode.REINHARD2_ADAPTIVE : ToneMappingMode.REINHARD2,\n\t\tresolution = 256,\n\t\tmaxLuminance = 16.0,\n\t\twhitePoint = maxLuminance,\n\t\tmiddleGrey = 0.6,\n\t\tminLuminance = 0.01,\n\t\taverageLuminance = 1.0,\n\t\tadaptationRate = 1.0\n\t} = {}) {\n\n\t\tsuper(\"ToneMappingEffect\", fragmentShader, {\n\t\t\tblendFunction,\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"luminanceBuffer\", new Uniform(null)],\n\t\t\t\t[\"maxLuminance\", new Uniform(maxLuminance)], // Unused\n\t\t\t\t[\"whitePoint\", new Uniform(whitePoint)],\n\t\t\t\t[\"middleGrey\", new Uniform(middleGrey)],\n\t\t\t\t[\"averageLuminance\", new Uniform(averageLuminance)]\n\t\t\t])\n\t\t});\n\n\t\t/**\n\t\t * The render target for the current luminance.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t * @private\n\t\t */\n\n\t\tthis.renderTargetLuminance = new WebGLRenderTarget(1, 1, {\n\t\t\tminFilter: LinearMipmapLinearFilter,\n\t\t\tdepthBuffer: false\n\t\t});\n\n\t\tthis.renderTargetLuminance.texture.generateMipmaps = true;\n\t\tthis.renderTargetLuminance.texture.name = \"Luminance\";\n\n\t\t/**\n\t\t * A luminance pass.\n\t\t *\n\t\t * @type {ShaderPass}\n\t\t * @private\n\t\t */\n\n\t\tthis.luminancePass = new LuminancePass({\n\t\t\trenderTarget: this.renderTargetLuminance\n\t\t});\n\n\t\t/**\n\t\t * An adaptive luminance pass.\n\t\t *\n\t\t * @type {AdaptiveLuminancePass}\n\t\t * @private\n\t\t */\n\n\t\tthis.adaptiveLuminancePass = new AdaptiveLuminancePass(this.luminancePass.texture, {\n\t\t\tminLuminance,\n\t\t\tadaptationRate\n\t\t});\n\n\t\tthis.uniforms.get(\"luminanceBuffer\").value = this.adaptiveLuminancePass.texture;\n\n\t\tthis.resolution = resolution;\n\t\tthis.mode = mode;\n\n\t}\n\n\t/**\n\t * The tone mapping mode.\n\t *\n\t * @type {ToneMappingMode}\n\t */\n\n\tget mode() {\n\n\t\treturn Number(this.defines.get(\"TONE_MAPPING_MODE\"));\n\n\t}\n\n\tset mode(value) {\n\n\t\tif(this.mode !== value) {\n\n\t\t\tthis.defines.clear();\n\t\t\tthis.defines.set(\"TONE_MAPPING_MODE\", value.toFixed(0));\n\n\t\t\t// Use one of the built-in tone mapping operators.\n\t\t\tswitch(value) {\n\n\t\t\t\tcase ToneMappingMode.REINHARD:\n\t\t\t\t\tthis.defines.set(\"toneMapping(texel)\", \"ReinhardToneMapping(texel)\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ToneMappingMode.OPTIMIZED_CINEON:\n\t\t\t\t\tthis.defines.set(\"toneMapping(texel)\", \"OptimizedCineonToneMapping(texel)\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ToneMappingMode.ACES_FILMIC:\n\t\t\t\t\tthis.defines.set(\"toneMapping(texel)\", \"ACESFilmicToneMapping(texel)\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.defines.set(\"toneMapping(texel)\", \"texel\");\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.adaptiveLuminancePass.enabled = (value === ToneMappingMode.REINHARD2_ADAPTIVE);\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the current tone mapping mode.\n\t *\n\t * @deprecated Use mode instead.\n\t * @return {ToneMappingMode} The tone mapping mode.\n\t */\n\n\tgetMode() {\n\n\t\treturn this.mode;\n\n\t}\n\n\t/**\n\t * Sets the tone mapping mode.\n\t *\n\t * @deprecated Use mode instead.\n\t * @param {ToneMappingMode} value - The tone mapping mode.\n\t */\n\n\tsetMode(value) {\n\n\t\tthis.mode = value;\n\n\t}\n\n\t/**\n\t * The white point. Default is `16.0`.\n\t *\n\t * Only applies to Reinhard2 (Modified & Adaptive).\n\t *\n\t * @type {Number}\n\t */\n\n\tget whitePoint() {\n\n\t\treturn this.uniforms.get(\"whitePoint\").value;\n\n\t}\n\n\tset whitePoint(value) {\n\n\t\tthis.uniforms.get(\"whitePoint\").value = value;\n\n\t}\n\n\t/**\n\t * The middle grey factor. Default is `0.6`.\n\t *\n\t * Only applies to Reinhard2 (Modified & Adaptive).\n\t *\n\t * @type {Number}\n\t */\n\n\tget middleGrey() {\n\n\t\treturn this.uniforms.get(\"middleGrey\").value;\n\n\t}\n\n\tset middleGrey(value) {\n\n\t\tthis.uniforms.get(\"middleGrey\").value = value;\n\n\t}\n\n\t/**\n\t * The average luminance.\n\t *\n\t * Only applies to Reinhard2 (Modified).\n\t *\n\t * @type {Number}\n\t */\n\n\tget averageLuminance() {\n\n\t\treturn this.uniforms.get(\"averageLuminance\").value;\n\n\t}\n\n\tset averageLuminance(value) {\n\n\t\tthis.uniforms.get(\"averageLuminance\").value = value;\n\n\t}\n\n\t/**\n\t * The adaptive luminance material.\n\t *\n\t * @type {AdaptiveLuminanceMaterial}\n\t */\n\n\tget adaptiveLuminanceMaterial() {\n\n\t\treturn this.adaptiveLuminancePass.fullscreenMaterial;\n\n\t}\n\n\t/**\n\t * Returns the adaptive luminance material.\n\t *\n\t * @deprecated Use adaptiveLuminanceMaterial instead.\n\t * @return {AdaptiveLuminanceMaterial} The material.\n\t */\n\n\tgetAdaptiveLuminanceMaterial() {\n\n\t\treturn this.adaptiveLuminanceMaterial;\n\n\t}\n\n\t/**\n\t * The resolution of the luminance texture. Must be a power of two.\n\t *\n\t * @type {Number}\n\t */\n\n\tget resolution() {\n\n\t\treturn this.luminancePass.resolution.width;\n\n\t}\n\n\tset resolution(value) {\n\n\t\t// Round the given value to the next power of two.\n\t\tconst exponent = Math.max(0, Math.ceil(Math.log2(value)));\n\t\tconst size = Math.pow(2, exponent);\n\n\t\tthis.luminancePass.resolution.setPreferredSize(size, size);\n\t\tthis.adaptiveLuminanceMaterial.mipLevel1x1 = exponent;\n\n\t}\n\n\t/**\n\t * Returns the resolution of the luminance texture.\n\t *\n\t * @deprecated Use resolution instead.\n\t * @return {Number} The resolution.\n\t */\n\n\tgetResolution() {\n\n\t\treturn this.resolution;\n\n\t}\n\n\t/**\n\t * Sets the resolution of the luminance texture. Must be a power of two.\n\t *\n\t * @deprecated Use resolution instead.\n\t * @param {Number} value - The resolution.\n\t */\n\n\tsetResolution(value) {\n\n\t\tthis.resolution = value;\n\n\t}\n\n\t/**\n\t * Indicates whether this pass uses adaptive luminance.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use mode instead.\n\t */\n\n\tget adaptive() {\n\n\t\treturn (this.mode === ToneMappingMode.REINHARD2_ADAPTIVE);\n\n\t}\n\n\tset adaptive(value) {\n\n\t\tthis.mode = value ? ToneMappingMode.REINHARD2_ADAPTIVE : ToneMappingMode.REINHARD2;\n\n\t}\n\n\t/**\n\t * The luminance adaptation rate.\n\t *\n\t * @type {Number}\n\t * @deprecated Use adaptiveLuminanceMaterial.adaptationRate instead.\n\t */\n\n\tget adaptationRate() {\n\n\t\treturn this.adaptiveLuminanceMaterial.adaptationRate;\n\n\t}\n\n\tset adaptationRate(value) {\n\n\t\tthis.adaptiveLuminanceMaterial.adaptationRate = value;\n\n\t}\n\n\t/**\n\t * @type {Number}\n\t * @deprecated\n\t */\n\n\tget distinction() {\n\n\t\tconsole.warn(this.name, \"distinction was removed.\");\n\t\treturn 1.0;\n\n\t}\n\n\tset distinction(value) {\n\n\t\tconsole.warn(this.name, \"distinction was removed.\");\n\n\t}\n\n\t/**\n\t * Updates this effect.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\n\t */\n\n\tupdate(renderer, inputBuffer, deltaTime) {\n\n\t\tif(this.adaptiveLuminancePass.enabled) {\n\n\t\t\tthis.luminancePass.render(renderer, inputBuffer);\n\t\t\tthis.adaptiveLuminancePass.render(renderer, null, null, deltaTime);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs initialization tasks.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\n\t */\n\n\tinitialize(renderer, alpha, frameBufferType) {\n\n\t\tthis.adaptiveLuminancePass.initialize(renderer, alpha, frameBufferType);\n\n\t}\n\n}\n", "import { Uniform } from \"three\";\nimport { VignetteTechnique } from \"../enums\";\nimport { Effect } from \"./Effect\";\n\nimport fragmentShader from \"./glsl/vignette.frag\";\n\n/**\n * A Vignette effect.\n */\n\nexport class VignetteEffect extends Effect {\n\n\t/**\n\t * Constructs a new Vignette effect.\n\t *\n\t * @param {Object} [options] - The options.\n\t * @param {BlendFunction} [options.blendFunction] - The blend function of this effect.\n\t * @param {VignetteTechnique} [options.technique=VignetteTechnique.DEFAULT] - The Vignette technique.\n\t * @param {Boolean} [options.eskil=false] - Deprecated. Use technique instead.\n\t * @param {Number} [options.offset=0.5] - The Vignette offset.\n\t * @param {Number} [options.darkness=0.5] - The Vignette darkness.\n\t */\n\n\tconstructor({\n\t\tblendFunction,\n\t\ttechnique = VignetteTechnique.DEFAULT,\n\t\teskil = false,\n\t\toffset = 0.5,\n\t\tdarkness = 0.5\n\t} = {}) {\n\n\t\tsuper(\"VignetteEffect\", fragmentShader, {\n\t\t\tblendFunction: blendFunction,\n\t\t\tdefines: new Map([\n\t\t\t\t[\"VIGNETTE_TECHNIQUE\", technique.toFixed(0)]\n\t\t\t]),\n\t\t\tuniforms: new Map([\n\t\t\t\t[\"offset\", new Uniform(offset)],\n\t\t\t\t[\"darkness\", new Uniform(darkness)]\n\t\t\t])\n\t\t});\n\n\t}\n\n\t/**\n\t * The Vignette technique.\n\t *\n\t * @type {VignetteTechnique}\n\t */\n\n\tget technique() {\n\n\t\treturn Number(this.defines.get(\"VIGNETTE_TECHNIQUE\"));\n\n\t}\n\n\tset technique(value) {\n\n\t\tif(this.technique !== value) {\n\n\t\t\tthis.defines.set(\"VIGNETTE_TECHNIQUE\", value.toFixed(0));\n\t\t\tthis.setChanged();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indicates whether Eskil's Vignette technique is enabled.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use technique instead.\n\t */\n\n\tget eskil() {\n\n\t\treturn (this.technique === VignetteTechnique.ESKIL);\n\n\t}\n\n\t/**\n\t * Indicates whether Eskil's Vignette technique is enabled.\n\t *\n\t * @type {Boolean}\n\t * @deprecated Use technique instead.\n\t */\n\n\tset eskil(value) {\n\n\t\tthis.technique = value ? VignetteTechnique.ESKIL : VignetteTechnique.DEFAULT;\n\n\t}\n\n\t/**\n\t * Returns the Vignette technique.\n\t *\n\t * @deprecated Use technique instead.\n\t * @return {VignetteTechnique} The technique.\n\t */\n\n\tgetTechnique() {\n\n\t\treturn this.technique;\n\n\t}\n\n\t/**\n\t * Sets the Vignette technique.\n\t *\n\t * @deprecated Use technique instead.\n\t * @param {VignetteTechnique} value - The technique.\n\t */\n\n\tsetTechnique(value) {\n\n\t\tthis.technique = value;\n\n\t}\n\n\t/**\n\t * The Vignette offset.\n\t *\n\t * @type {Number}\n\t */\n\n\tget offset() {\n\n\t\treturn this.uniforms.get(\"offset\").value;\n\n\t}\n\n\tset offset(value) {\n\n\t\tthis.uniforms.get(\"offset\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the Vignette offset.\n\t *\n\t * @deprecated Use offset instead.\n\t * @return {Number} The offset.\n\t */\n\n\tgetOffset() {\n\n\t\treturn this.offset;\n\n\t}\n\n\t/**\n\t * Sets the Vignette offset.\n\t *\n\t * @deprecated Use offset instead.\n\t * @param {Number} value - The offset.\n\t */\n\n\tsetOffset(value) {\n\n\t\tthis.offset = value;\n\n\t}\n\n\t/**\n\t * The Vignette darkness.\n\t *\n\t * @type {Number}\n\t */\n\n\tget darkness() {\n\n\t\treturn this.uniforms.get(\"darkness\").value;\n\n\t}\n\n\tset darkness(value) {\n\n\t\tthis.uniforms.get(\"darkness\").value = value;\n\n\t}\n\n\t/**\n\t * Returns the Vignette darkness.\n\t *\n\t * @deprecated Use darkness instead.\n\t * @return {Number} The darkness.\n\t */\n\n\tgetDarkness() {\n\n\t\treturn this.darkness;\n\n\t}\n\n\t/**\n\t * Sets the Vignette darkness.\n\t *\n\t * @deprecated Use darkness instead.\n\t * @param {Number} value - The darkness.\n\t */\n\n\tsetDarkness(value) {\n\n\t\tthis.darkness = value;\n\n\t}\n\n}\n", "import { FileLoader, Loader, LoadingManager } from \"three\";\nimport { LookupTexture } from \"../textures\";\n\n/**\n * A 3D LUT loader that supports the .3dl file format.\n *\n * Based on an implementation by Garrett Johnson:\n * https://github.com/gkjohnson/threejs-sandbox/tree/master/3d-lut\n *\n * For more details see:\n * http://download.autodesk.com/us/systemdocs/help/2011/lustre/index.html?url=./files/WSc4e151a45a3b785a24c3d9a411df9298473-7ffd.htm,topicNumber=d0e9492\n */\n\nexport class LUT3dlLoader extends Loader {\n\n\t/**\n\t * Loads a LUT.\n\t *\n\t * @param {String} url - The URL of the 3dl-file.\n\t * @param {Function} [onLoad] - A callback that receives the loaded lookup texture.\n\t * @param {Function} [onProgress] - A progress callback that receives the XMLHttpRequest instance.\n\t * @param {Function} [onError] - An error callback that receives the URL of the file that failed to load.\n\t * @return {Promise<LookupTexture>} A promise that returns the lookup texture.\n\t */\n\n\tload(url, onLoad = () => {}, onProgress = () => {}, onError = null) {\n\n\t\tconst externalManager = this.manager;\n\t\tconst internalManager = new LoadingManager();\n\n\t\tconst loader = new FileLoader(internalManager);\n\t\tloader.setPath(this.path);\n\t\tloader.setResponseType(\"text\");\n\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tinternalManager.onError = (url) => {\n\n\t\t\t\texternalManager.itemError(url);\n\n\t\t\t\tif(onError !== null) {\n\n\t\t\t\t\tonError(`Failed to load ${url}`);\n\t\t\t\t\tresolve();\n\n\t\t\t\t} else {\n\n\t\t\t\t\treject(`Failed to load ${url}`);\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\texternalManager.itemStart(url);\n\n\t\t\tloader.load(url, (data) => {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tconst result = this.parse(data);\n\t\t\t\t\texternalManager.itemEnd(url);\n\t\t\t\t\tonLoad(result);\n\t\t\t\t\tresolve(result);\n\n\t\t\t\t} catch(e) {\n\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t\tinternalManager.onError(url);\n\n\t\t\t\t}\n\n\t\t\t}, onProgress);\n\n\t\t});\n\n\t}\n\n\t/**\n\t * Parses the given data.\n\t *\n\t * @param {String} input - The LUT data.\n\t * @return {LookupTexture} The lookup texture.\n\t * @throws {Error} Fails if the data is invalid.\n\t */\n\n\tparse(input) {\n\n\t\tconst regExpGridInfo = /^[\\d ]+$/m;\n\t\tconst regExpDataPoints = /^([\\d.e+-]+) +([\\d.e+-]+) +([\\d.e+-]+) *$/gm;\n\n\t\t// The first line describes the positions of values on the LUT grid.\n\t\tlet result = regExpGridInfo.exec(input);\n\n\t\tif(result === null) {\n\n\t\t\tthrow new Error(\"Missing grid information\");\n\n\t\t}\n\n\t\tconst gridLines = result[0].trim().split(/\\s+/g).map((n) => Number(n));\n\t\tconst gridStep = gridLines[1] - gridLines[0];\n\t\tconst size = gridLines.length;\n\t\tconst sizeSq = size ** 2;\n\n\t\tfor(let i = 1, l = gridLines.length; i < l; ++i) {\n\n\t\t\tif(gridStep !== (gridLines[i] - gridLines[i - 1])) {\n\n\t\t\t\tthrow new Error(\"Inconsistent grid size\");\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst data = new Float32Array(size ** 3 * 4);\n\t\tlet maxValue = 0.0;\n\t\tlet index = 0;\n\n\t\twhile((result = regExpDataPoints.exec(input)) !== null) {\n\n\t\t\tconst r = Number(result[1]);\n\t\t\tconst g = Number(result[2]);\n\t\t\tconst b = Number(result[3]);\n\n\t\t\tmaxValue = Math.max(maxValue, r, g, b);\n\n\t\t\tconst bLayer = index % size;\n\t\t\tconst gLayer = Math.floor(index / size) % size;\n\t\t\tconst rLayer = Math.floor(index / (sizeSq)) % size;\n\n\t\t\t// b grows first, then g, then r.\n\t\t\tconst d4 = (bLayer * sizeSq + gLayer * size + rLayer) * 4;\n\t\t\tdata[d4 + 0] = r;\n\t\t\tdata[d4 + 1] = g;\n\t\t\tdata[d4 + 2] = b;\n\t\t\tdata[d4 + 3] = 1.0;\n\n\t\t\t++index;\n\n\t\t}\n\n\t\t// Determine the bit depth and scale the values to [0.0, 1.0].\n\t\tconst bits = Math.ceil(Math.log2(maxValue));\n\t\tconst maxBitValue = Math.pow(2, bits);\n\n\t\tfor(let i = 0, l = data.length; i < l; i += 4) {\n\n\t\t\tdata[i + 0] /= maxBitValue;\n\t\t\tdata[i + 1] /= maxBitValue;\n\t\t\tdata[i + 2] /= maxBitValue;\n\n\t\t}\n\n\t\treturn new LookupTexture(data, size);\n\n\t}\n\n}\n", "import { FileLoader, Loader, LoadingManager, Vector3 } from \"three\";\nimport { LookupTexture } from \"../textures\";\n\n/**\n * A 3D LUT loader that supports the .cube file format.\n *\n * Based on an implementation by Garrett Johnson:\n * https://github.com/gkjohnson/threejs-sandbox/tree/master/3d-lut\n *\n * For more details see:\n * https://wwwimages2.adobe.com/content/dam/acom/en/products/speedgrade/cc/pdfs/cube-lut-specification-1.0.pdf\n */\n\nexport class LUTCubeLoader extends Loader {\n\n\t/**\n\t * Loads a LUT.\n\t *\n\t * @param {String} url - The URL of the CUBE-file.\n\t * @param {Function} [onLoad] - A callback that receives the loaded lookup texture.\n\t * @param {Function} [onProgress] - A progress callback that receives the XMLHttpRequest instance.\n\t * @param {Function} [onError] - An error callback that receives the URL of the file that failed to load.\n\t * @return {Promise<LookupTexture>} A promise that returns the lookup texture.\n\t */\n\n\tload(url, onLoad = () => {}, onProgress = () => {}, onError = null) {\n\n\t\tconst externalManager = this.manager;\n\t\tconst internalManager = new LoadingManager();\n\n\t\tconst loader = new FileLoader(internalManager);\n\t\tloader.setPath(this.path);\n\t\tloader.setResponseType(\"text\");\n\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tinternalManager.onError = (url) => {\n\n\t\t\t\texternalManager.itemError(url);\n\n\t\t\t\tif(onError !== null) {\n\n\t\t\t\t\tonError(`Failed to load ${url}`);\n\t\t\t\t\tresolve();\n\n\t\t\t\t} else {\n\n\t\t\t\t\treject(`Failed to load ${url}`);\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\texternalManager.itemStart(url);\n\n\t\t\tloader.load(url, (data) => {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tconst result = this.parse(data);\n\t\t\t\t\texternalManager.itemEnd(url);\n\t\t\t\t\tonLoad(result);\n\t\t\t\t\tresolve(result);\n\n\t\t\t\t} catch(e) {\n\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t\tinternalManager.onError(url);\n\n\t\t\t\t}\n\n\t\t\t}, onProgress);\n\n\t\t});\n\n\t}\n\n\t/**\n\t * Parses the given data.\n\t *\n\t * @param {String} input - The LUT data.\n\t * @return {LookupTexture} The lookup texture.\n\t * @throws {Error} Fails if the data is invalid.\n\t */\n\n\tparse(input) {\n\n\t\tconst regExpTitle = /TITLE +\"([^\"]*)\"/;\n\t\tconst regExpSize = /LUT_3D_SIZE +(\\d+)/;\n\t\tconst regExpDomainMin = /DOMAIN_MIN +([\\d.]+) +([\\d.]+) +([\\d.]+)/;\n\t\tconst regExpDomainMax = /DOMAIN_MAX +([\\d.]+) +([\\d.]+) +([\\d.]+)/;\n\t\tconst regExpDataPoints = /^([\\d.e+-]+) +([\\d.e+-]+) +([\\d.e+-]+) *$/gm;\n\n\t\tlet result = regExpTitle.exec(input);\n\t\tconst title = (result !== null) ? result[1] : null;\n\n\t\tresult = regExpSize.exec(input);\n\n\t\tif(result === null) {\n\n\t\t\tthrow new Error(\"Missing LUT_3D_SIZE information\");\n\n\t\t}\n\n\t\tconst size = Number(result[1]);\n\t\tconst data = new Float32Array(size ** 3 * 4);\n\n\t\tconst domainMin = new Vector3(0.0, 0.0, 0.0);\n\t\tconst domainMax = new Vector3(1.0, 1.0, 1.0);\n\n\t\tresult = regExpDomainMin.exec(input);\n\n\t\tif(result !== null) {\n\n\t\t\tdomainMin.set(Number(result[1]), Number(result[2]), Number(result[3]));\n\n\t\t}\n\n\t\tresult = regExpDomainMax.exec(input);\n\n\t\tif(result !== null) {\n\n\t\t\tdomainMax.set(Number(result[1]), Number(result[2]), Number(result[3]));\n\n\t\t}\n\n\t\tif(domainMin.x > domainMax.x || domainMin.y > domainMax.y || domainMin.z > domainMax.z) {\n\n\t\t\tdomainMin.set(0.0, 0.0, 0.0);\n\t\t\tdomainMax.set(1.0, 1.0, 1.0);\n\n\t\t\tthrow new Error(\"Invalid input domain\");\n\n\t\t}\n\n\t\tlet i = 0;\n\n\t\twhile((result = regExpDataPoints.exec(input)) !== null) {\n\n\t\t\tdata[i++] = Number(result[1]);\n\t\t\tdata[i++] = Number(result[2]);\n\t\t\tdata[i++] = Number(result[3]);\n\t\t\tdata[i++] = 1.0;\n\n\t\t}\n\n\t\tconst lut = new LookupTexture(data, size);\n\t\tlut.domainMin.copy(domainMin);\n\t\tlut.domainMax.copy(domainMax);\n\n\t\tif(title !== null) {\n\n\t\t\tlut.name = title;\n\n\t\t}\n\n\t\treturn lut;\n\n\t}\n\n}\n", "import { Loader, LoadingManager } from \"three\";\n\nimport searchImageDataURL from \"../textures/smaa/searchImageDataURL\";\nimport areaImageDataURL from \"../textures/smaa/areaImageDataURL\";\n\n/**\n * An SMAA image loader.\n *\n * @deprecated Preloading the SMAA lookup textures is no longer required.\n * @experimental Added for testing, API might change in patch or minor releases. Requires three >= r108.\n */\n\nexport class SMAAImageLoader extends Loader {\n\n\t/**\n\t * Loads the SMAA data images.\n\t *\n\t * @param {Function} [onLoad] - A callback that receives the search image and area image as a pair.\n\t * @param {Function} [onError] - An error callback that receives the URL of the image that failed to load.\n\t * @return {Promise<Image[]>} A promise that returns the search image and area image as a pair.\n\t */\n\n\tload(onLoad = () => {}, onError = null) {\n\n\t\t// Conform to the signature (url, onLoad, onProgress, onError).\n\t\tif(arguments.length === 4) {\n\n\t\t\tonLoad = arguments[1];\n\t\t\tonError = arguments[3];\n\n\t\t} else if(arguments.length === 3 || typeof arguments[0] !== \"function\") {\n\n\t\t\tonLoad = arguments[1];\n\t\t\tonError = null;\n\n\t\t}\n\n\t\tconst externalManager = this.manager;\n\t\tconst internalManager = new LoadingManager();\n\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tconst searchImage = new Image();\n\t\t\tconst areaImage = new Image();\n\n\t\t\tinternalManager.onError = (url) => {\n\n\t\t\t\texternalManager.itemError(url);\n\n\t\t\t\tif(onError !== null) {\n\n\t\t\t\t\tonError(`Failed to load ${url}`);\n\t\t\t\t\tresolve();\n\n\t\t\t\t} else {\n\n\t\t\t\t\treject(`Failed to load ${url}`);\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tinternalManager.onLoad = () => {\n\n\t\t\t\tconst result = [searchImage, areaImage];\n\t\t\t\tonLoad(result);\n\t\t\t\tresolve(result);\n\n\t\t\t};\n\n\t\t\tsearchImage.addEventListener(\"error\", (e) => {\n\n\t\t\t\tinternalManager.itemError(\"smaa-search\");\n\n\t\t\t});\n\n\t\t\tareaImage.addEventListener(\"error\", (e) => {\n\n\t\t\t\tinternalManager.itemError(\"smaa-area\");\n\n\t\t\t});\n\n\t\t\tsearchImage.addEventListener(\"load\", () => {\n\n\t\t\t\texternalManager.itemEnd(\"smaa-search\");\n\t\t\t\tinternalManager.itemEnd(\"smaa-search\");\n\n\t\t\t});\n\n\t\t\tareaImage.addEventListener(\"load\", () => {\n\n\t\t\t\texternalManager.itemEnd(\"smaa-area\");\n\t\t\t\tinternalManager.itemEnd(\"smaa-area\");\n\n\t\t\t});\n\n\t\t\texternalManager.itemStart(\"smaa-search\");\n\t\t\texternalManager.itemStart(\"smaa-area\");\n\t\t\tinternalManager.itemStart(\"smaa-search\");\n\t\t\tinternalManager.itemStart(\"smaa-area\");\n\n\t\t\tsearchImage.src = searchImageDataURL;\n\t\t\tareaImage.src = areaImageDataURL;\n\n\t\t});\n\n\t}\n\n}\n"],
  "mappings": "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",
  "names": []
}
